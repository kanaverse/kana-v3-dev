/*! For license information please see 551.8e5084b5.chunk.js.LICENSE.txt */
(self.webpackChunkkana=self.webpackChunkkana||[]).push([[551],{5587:function(e,t,r){e.exports=function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,(function(e){return i(t[s][1][e]||e)}),l,l.exports,e,t,r,n)}return r[s].exports}for(var a=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,s,o,u,l,c=[],h=0,f=e.length,d=f,v="string"!==n.getTypeOf(e);h<e.length;)d=f-h,i=v?(t=e[h++],r=h<f?e[h++]:0,h<f?e[h++]:0):(t=e.charCodeAt(h++),r=h<f?e.charCodeAt(h++):0,h<f?e.charCodeAt(h++):0),s=t>>2,o=(3&t)<<4|r>>4,u=1<d?(15&r)<<2|i>>6:64,l=2<d?63&i:64,c.push(a.charAt(s)+a.charAt(o)+a.charAt(u)+a.charAt(l));return c.join("")},r.decode=function(e){var t,r,n,s,o,u,l=0,c=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var f,d=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&d--,e.charAt(e.length-2)===a.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|d):new Array(0|d);l<e.length;)t=a.indexOf(e.charAt(l++))<<2|(s=a.indexOf(e.charAt(l++)))>>4,r=(15&s)<<4|(o=a.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(u=a.indexOf(e.charAt(l++))),f[c++]=t,64!==o&&(f[c++]=r),64!==u&&(f[c++]=n);return f}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function o(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new a).pipe(new s("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var a=i,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}(0|t,e,e.length,0):function(e,t,r,n){var a=i,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^a[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var n=null;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),a=e("./utils"),s=e("./stream/GenericWorker"),o=n?"uint8array":"array";function u(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",a.inherits(u,s),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(o,e.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new u("Deflate",e)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,r,i,s,c){var h,f,d=e.file,v=e.compression,m=c!==o.utf8encode,p=a.transformTo("string",c(d.name)),y=a.transformTo("string",o.utf8encode(d.name)),b=d.comment,w=a.transformTo("string",c(b)),g=a.transformTo("string",o.utf8encode(b)),_=y.length!==d.name.length,Z=g.length!==b.length,k="",x="",E="",C=d.dir,O=d.date,S={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(S.crc32=e.crc32,S.compressedSize=e.compressedSize,S.uncompressedSize=e.uncompressedSize);var A=0;t&&(A|=8),m||!_&&!Z||(A|=2048);var R=0,M=0;C&&(R|=16),"UNIX"===s?(M=798,R|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(d.unixPermissions,C)):(M=20,R|=function(e){return 63&(e||0)}(d.dosPermissions)),h=O.getUTCHours(),h<<=6,h|=O.getUTCMinutes(),h<<=5,h|=O.getUTCSeconds()/2,f=O.getUTCFullYear()-1980,f<<=4,f|=O.getUTCMonth()+1,f<<=5,f|=O.getUTCDate(),_&&(x=n(1,1)+n(u(p),4)+y,k+="up"+n(x.length,2)+x),Z&&(E=n(1,1)+n(u(w),4)+g,k+="uc"+n(E.length,2)+E);var N="";return N+="\n\0",N+=n(A,2),N+=v.magic,N+=n(h,2),N+=n(f,2),N+=n(S.crc32,4),N+=n(S.compressedSize,4),N+=n(S.uncompressedSize,4),N+=n(p.length,2),N+=n(k.length,2),{fileRecord:l.LOCAL_FILE_HEADER+N+p+k,dirRecord:l.CENTRAL_FILE_HEADER+n(M,2)+N+n(w.length,2)+"\0\0\0\0"+n(R,4)+n(i,4)+p+k+w}}var a=e("../utils"),s=e("../stream/GenericWorker"),o=e("../utf8"),u=e("../crc32"),l=e("../signature");function c(e,t,r,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(c,s),c.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,i=function(e,t,r,i,s){var o=a.transformTo("string",s(i));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(r,4)+n(o.length,2)+o}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},c.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},c.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var n=e("../compressions"),i=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var a=new i(t.streamFiles,r,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,r){s++;var i=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,t.compression),o=r.options.compressionOptions||t.compressionOptions||{},u=r.dir,l=r.date;r._compressWorker(i,o).withStreamInfo("file",{name:e,dir:u,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(a)})),a.entriesCount=s}catch(e){a.error(e)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./external"),a=e("./utf8"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function l(e){return new i.Promise((function(t,r){var n=e.decompressed.getContentWorker().pipe(new o);n.on("error",(function(e){r(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new s(t);return r.load(e),r})).then((function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var a=0;a<n.length;a++)r.push(l(n[a]));return i.Promise.all(r)})).then((function(e){for(var i=e.shift(),a=i.files,s=0;s<a.length;s++){var o=a[s],u=o.fileNameStr,l=n.resolve(o.fileNameStr);r.file(l,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(r.file(l).unsafeOriginalName=u)}return i.zipComment.length&&(r.comment=i.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(a,i),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),r&&r(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function n(e,t,r){var n,i=a.getTypeOf(t),o=a.extend(r||{},u);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=m(e)),o.createFolders&&(n=v(e))&&p.call(this,n,!0);var h="string"===i&&!1===o.binary&&!1===o.base64;r&&void 0!==r.binary||(o.binary=!h),(t instanceof l&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",i="string");var y=null;y=t instanceof l||t instanceof s?t:f.isNode&&f.isStream(t)?new d(e,t):a.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var b=new c(e,y,o);this.files[e]=b}var i=e("./utf8"),a=e("./utils"),s=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),u=e("./defaults"),l=e("./compressedObject"),c=e("./zipObject"),h=e("./generate"),f=e("./nodejsUtils"),d=e("./nodejs/NodejsStreamInputAdapter"),v=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},p=function(e,t){return t=void 0!==t?t:u.createFolders,e=m(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach((function(r,n){e(r,n)&&t.push(n)})),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,r),this;if(y(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=p.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");a.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=h.generateWorker(this,r,n)}catch(e){(t=new s("error")).error(e)}return new o(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&r===a[1]&&n===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../support"),a=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new u(n.transformTo("uint8array",e)):new a(n.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK\x03\x04",r.CENTRAL_FILE_HEADER="PK\x01\x02",r.CENTRAL_DIRECTORY_END="PK\x05\x06",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../utils");function a(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,n),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,n),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),o=e("../support"),u=e("../external"),l=null;if(o.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function c(e,t){return new u.Promise((function(r,i){var a=[],o=e._internalType,u=e._outputType,l=e._mimeType;e.on("data",(function(e,r){a.push(e),t&&t(r)})).on("error",(function(e){a=[],i(e)})).on("end",(function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}(u,function(e,t){var r,n=0,i=null,a=0;for(r=0;r<t.length;r++)a+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(a),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,a),l);r(e)}catch(e){i(e)}a=[]})).resume()}))}function h(e,t,r){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=r,n.checkSupport(s),this._worker=e.pipe(new i(s)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return c(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var n=e("./utils"),i=e("./support"),a=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),u=0;u<256;u++)o[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function c(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,r.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,r,n,a,s,o=e.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),a=s=0;s<u;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t}(e)},r.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,i,a,s=e.length,u=new Array(2*s);for(t=r=0;t<s;)if((i=e[t++])<128)u[r++]=i;else if(4<(a=o[i]))u[r++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&t<s;)i=i<<6|63&e[t++],a--;1<a?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(l,s),l.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}(t),u=t;s!==t.length&&(i.uint8array?(u=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(u=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:r.utf8decode(u),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=l,n.inherits(c,s),c.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){"use strict";var n=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),s=e("./external");function o(e){return e}function u(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),r.newBlob=function(t,n){r.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,r){var n=[],i=0,a=e.length;if(a<=r)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,a)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,a)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function c(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=l.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return l.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function h(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=c;var f={};f.string={string:o,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,a.allocBuffer(e.length))}},f.array={string:c,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},f.arraybuffer={string:function(e){return c(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:c,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return a.newBufferFrom(e)}},f.nodebuffer={string:c,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:o},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return f[n][e](t)},r.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var i=t[n];"."===i||""===i&&0!==n&&n!==t.length-1||(".."===i?r.pop():r.push(i))}return r.join("/")},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&a.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){setImmediate((function(){e.apply(r||null,t||[])}))},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,a,o,l){return s.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(t){var c=r.getTypeOf(t);return c?("arraybuffer"===c?t=r.transformTo("uint8array",t):"string"===c&&(l?t=i.decode(t):a&&!0!==o&&(t=function(e){return u(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),a=e("./signature"),s=e("./zipEntry"),o=e("./support");function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),a=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),u=e("./compressions"),l=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(Object.prototype.hasOwnProperty.call(u,t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var i=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),s=e("./utf8"),o=e("./compressedObject"),u=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!n&&(t=t.pipe(new s.Utf8EncodeWorker)),!a&&n&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new i(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)n.prototype[l[h]]=c;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){"use strict";var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,s=new i(c),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),r=function(){o.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,r=function(){u.port2.postMessage(0)}}var l=[];function c(){var e,t;n=!0;for(var r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}n=!1}t.exports=function(e){1!==l.push(e)||n||r()}}).call(this,"undefined"!=typeof r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var n=e("immediate");function i(){}var a={},s=["REJECTED"],o=["FULFILLED"],u=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(e,t,r){n((function(){var n;try{n=t(r)}catch(n){return a.reject(e,n)}n===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,n)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,a.reject(e,t))}function i(t){r||(r=!0,a.resolve(e,t))}var s=v((function(){t(i,n)}));"error"===s.status&&n(s.value)}function v(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(i);return this.state!==u?h(r,this.state===o?e:t,this.outcome):this.queue.push(new c(r,e,t)),r},c.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){a.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},a.resolve=function(e,t){var r=v(f,t);if("error"===r.status)return a.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=o,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:a.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return a.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),o=0,u=-1,l=new this(i);++u<r;)c(e[u],u);return l;function c(e,i){t.resolve(e).then((function(e){s[i]=e,++o!==r||n||(n=!0,a.resolve(l,s))}),(function(e){n||(n=!0,a.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s,o=-1,u=new this(i);++o<r;)s=e[o],t.resolve(s).then((function(e){n||(n=!0,a.resolve(u,e))}),(function(e){n||(n=!0,a.reject(u,e))}));return u}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),u=Object.prototype.toString,l=0,c=-1,h=0,f=8;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({level:c,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==l)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var v;if(v="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,v))!==l)throw new Error(s[r]);this._dict_set=!0}}function v(e,t){var r=new d(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}d.prototype.push=function(e,t){var r,s,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(c),o.next_out=0,o.avail_out=c),1!==(r=n.deflate(o,s))&&r!==l)return this.onEnd(r),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(o.output,o.next_out))):this.onData(i.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==s||(this.onEnd(l),!(o.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=d,r.deflate=v,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,v(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,v(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),u=e("./zlib/zstream"),l=e("./zlib/gzheader"),c=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==s.Z_OK)throw new Error(o[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function f(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}h.prototype.push=function(e,t){var r,o,u,l,h,f,d=this.strm,v=this.options.chunkSize,m=this.options.dictionary,p=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?d.input=a.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(v),d.next_out=0,d.avail_out=v),(r=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&m&&(f="string"==typeof m?a.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,f)),r===s.Z_BUF_ERROR&&!0===p&&(r=s.Z_OK,p=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&r!==s.Z_STREAM_END&&(0!==d.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=a.utf8border(d.output,d.next_out),l=d.next_out-u,h=a.buf2string(d.output,u),d.next_out=l,d.avail_out=v-l,l&&i.arraySet(d.output,d.output,u,l,0),this.onData(h)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(p=!0)}while((0<d.avail_in||0===d.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(d.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=h,r.inflate=f,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},r.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,s;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)a=e[t],s.set(a,i),i+=a.length;return s}},a={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var n=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function u(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){var t,r,i,a,s,o=e.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(u),a=s=0;s<u;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.buf2binstring=function(e){return u(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,a,o=t||e.length,l=new Array(2*o);for(r=n=0;r<o;)if((i=e[r++])<128)l[n++]=i;else if(4<(a=s[i]))l[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&r<o;)i=i<<6|63&e[r++],a--;1<a?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return u(l,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;a=a+(i=i+t[n++]|0)|0,--s;);i%=65521,a%=65521}return i|a<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var a=n,s=i+r;e^=-1;for(var o=i;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,r){"use strict";var n,i=e("../utils/common"),a=e("./trees"),s=e("./adler32"),o=e("./crc32"),u=e("./messages"),l=0,c=4,h=0,f=-2,d=-1,v=4,m=2,p=8,y=9,b=286,w=30,g=19,_=2*b+1,Z=15,k=3,x=258,E=x+k+1,C=42,O=113,S=1,A=2,R=3,M=4;function N(e,t){return e.msg=u[t],t}function W(e){return(e<<1)-(4<e?9:0)}function I(e){for(var t=e.length;0<=--t;)e[t]=0}function z(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function D(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,z(e.strm)}function F(e,t){e.pending_buf[e.pending++]=t}function j(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function P(e,t){var r,n,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-E?e.strstart-(e.w_size-E):0,l=e.window,c=e.w_mask,h=e.prev,f=e.strstart+x,d=l[a+s-1],v=l[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(r=t)+s]===v&&l[r+s-1]===d&&l[r]===l[a]&&l[++r]===l[a+1]){a+=2,r++;do{}while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<f);if(n=x-(f-a),a=f-x,s<n){if(e.match_start=t,o<=(s=n))break;d=l[a+s-1],v=l[a+s]}}}while((t=h[t&c])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function T(e){var t,r,n,a,u,l,c,h,f,d,v=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=v+(v-E)){for(i.arraySet(e.window,e.window,v,v,0),e.match_start-=v,e.strstart-=v,e.block_start-=v,t=r=e.hash_size;n=e.head[--t],e.head[t]=v<=n?n-v:0,--r;);for(t=r=v;n=e.prev[--t],e.prev[t]=v<=n?n-v:0,--r;);a+=v}if(0===e.strm.avail_in)break;if(l=e.strm,c=e.window,h=e.strstart+e.lookahead,d=void 0,(f=a)<(d=l.avail_in)&&(d=f),r=0===d?0:(l.avail_in-=d,i.arraySet(c,l.input,l.next_in,d,h),1===l.state.wrap?l.adler=s(l.adler,c,d,h):2===l.state.wrap&&(l.adler=o(l.adler,c,d,h)),l.next_in+=d,l.total_in+=d,d),e.lookahead+=r,e.lookahead+e.insert>=k)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+k-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<k)););}while(e.lookahead<E&&0!==e.strm.avail_in)}function B(e,t){for(var r,n;;){if(e.lookahead<E){if(T(e),e.lookahead<E&&t===l)return S;if(0===e.lookahead)break}if(r=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-E&&(e.match_length=P(e,r)),e.match_length>=k)if(n=a._tr_tally(e,e.strstart-e.match_start,e.match_length-k),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=k){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(D(e,!1),0===e.strm.avail_out))return S}return e.insert=e.strstart<k-1?e.strstart:k-1,t===c?(D(e,!0),0===e.strm.avail_out?R:M):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?S:A}function L(e,t){for(var r,n,i;;){if(e.lookahead<E){if(T(e),e.lookahead<E&&t===l)return S;if(0===e.lookahead)break}if(r=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=k-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-E&&(e.match_length=P(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===k&&4096<e.strstart-e.match_start)&&(e.match_length=k-1)),e.prev_length>=k&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-k,n=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-k),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=k-1,e.strstart++,n&&(D(e,!1),0===e.strm.avail_out))return S}else if(e.match_available){if((n=a._tr_tally(e,0,e.window[e.strstart-1]))&&D(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return S}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<k-1?e.strstart:k-1,t===c?(D(e,!0),0===e.strm.avail_out?R:M):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?S:A}function U(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*_),this.dyn_dtree=new i.Buf16(2*(2*w+1)),this.bl_tree=new i.Buf16(2*(2*g+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Z+1),this.heap=new i.Buf16(2*b+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?C:O,e.adler=2===t.wrap?0:1,t.last_flush=l,a._tr_init(t),h):N(e,f)}function H(e){var t=q(e);return t===h&&function(e){e.window_size=2*e.w_size,I(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=k-1,e.match_available=0,e.ins_h=0}(e.state),t}function G(e,t,r,n,a,s){if(!e)return f;var o=1;if(t===d&&(t=6),n<0?(o=0,n=-n):15<n&&(o=2,n-=16),a<1||y<a||r!==p||n<8||15<n||t<0||9<t||s<0||v<s)return N(e,f);8===n&&(n=9);var u=new Y;return(e.state=u).strm=e,u.wrap=o,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+k-1)/k),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,H(e)}n=[new U(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(T(e),0===e.lookahead&&t===l)return S;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,D(e,!1),0===e.strm.avail_out))return S;if(e.strstart-e.block_start>=e.w_size-E&&(D(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===c?(D(e,!0),0===e.strm.avail_out?R:M):(e.strstart>e.block_start&&(D(e,!1),e.strm.avail_out),S)})),new U(4,4,8,4,B),new U(4,5,16,8,B),new U(4,6,32,32,B),new U(4,4,16,16,L),new U(8,16,32,32,L),new U(8,16,128,128,L),new U(8,32,128,256,L),new U(32,128,258,1024,L),new U(32,258,258,4096,L)],r.deflateInit=function(e,t){return G(e,t,p,15,8,0)},r.deflateInit2=G,r.deflateReset=H,r.deflateResetKeep=q,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=t,h):f},r.deflate=function(e,t){var r,i,s,u;if(!e||!e.state||5<t||t<0)return e?N(e,f):f;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==c)return N(e,0===e.avail_out?-5:f);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===C)if(2===i.wrap)e.adler=0,F(i,31),F(i,139),F(i,8),i.gzhead?(F(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),F(i,255&i.gzhead.time),F(i,i.gzhead.time>>8&255),F(i,i.gzhead.time>>16&255),F(i,i.gzhead.time>>24&255),F(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),F(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(F(i,255&i.gzhead.extra.length),F(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=o(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(F(i,0),F(i,0),F(i,0),F(i,0),F(i,0),F(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),F(i,3),i.status=O);else{var d=p+(i.w_bits-8<<4)<<8;d|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=O,j(i,d),0!==i.strstart&&(j(i,e.adler>>>16),j(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),z(e),s=i.pending,i.pending!==i.pending_buf_size));)F(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),z(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,F(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),z(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,F(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&z(e),i.pending+2<=i.pending_buf_size&&(F(i,255&e.adler),F(i,e.adler>>8&255),e.adler=0,i.status=O)):i.status=O),0!==i.pending){if(z(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&W(t)<=W(r)&&t!==c)return N(e,-5);if(666===i.status&&0!==e.avail_in)return N(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==l&&666!==i.status){var v=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(T(e),0===e.lookahead)){if(t===l)return S;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(D(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===c?(D(e,!0),0===e.strm.avail_out?R:M):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?S:A}(i,t):3===i.strategy?function(e,t){for(var r,n,i,s,o=e.window;;){if(e.lookahead<=x){if(T(e),e.lookahead<=x&&t===l)return S;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=k&&0<e.strstart&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){s=e.strstart+x;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=x-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=k?(r=a._tr_tally(e,1,e.match_length-k),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(D(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===c?(D(e,!0),0===e.strm.avail_out?R:M):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?S:A}(i,t):n[i.level].func(i,t);if(v!==R&&v!==M||(i.status=666),v===S||v===R)return 0===e.avail_out&&(i.last_flush=-1),h;if(v===A&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(I(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),z(e),0===e.avail_out))return i.last_flush=-1,h}return t!==c?h:i.wrap<=0?1:(2===i.wrap?(F(i,255&e.adler),F(i,e.adler>>8&255),F(i,e.adler>>16&255),F(i,e.adler>>24&255),F(i,255&e.total_in),F(i,e.total_in>>8&255),F(i,e.total_in>>16&255),F(i,e.total_in>>24&255)):(j(i,e.adler>>>16),j(i,65535&e.adler)),z(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==C&&69!==t&&73!==t&&91!==t&&103!==t&&t!==O&&666!==t?N(e,f):(e.state=null,t===O?N(e,-3):h):f},r.deflateSetDictionary=function(e,t){var r,n,a,o,u,l,c,d,v=t.length;if(!e||!e.state)return f;if(2===(o=(r=e.state).wrap)||1===o&&r.status!==C||r.lookahead)return f;for(1===o&&(e.adler=s(e.adler,t,v,0)),r.wrap=0,v>=r.w_size&&(0===o&&(I(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,t,v-r.w_size,r.w_size,0),t=d,v=r.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=v,e.next_in=0,e.input=t,T(r);r.lookahead>=k;){for(n=r.strstart,a=r.lookahead-(k-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+k-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--a;);r.strstart=n,r.lookahead=k-1,T(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=k-1,r.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,r.wrap=o,h},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,a,s,o,u,l,c,h,f,d,v,m,p,y,b,w,g,_,Z,k,x,E,C;r=e.state,n=e.next_in,E=e.input,i=n+(e.avail_in-5),a=e.next_out,C=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,f=r.window,d=r.hold,v=r.bits,m=r.lencode,p=r.distcode,y=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{v<15&&(d+=E[n++]<<v,v+=8,d+=E[n++]<<v,v+=8),w=m[d&y];t:for(;;){if(d>>>=g=w>>>24,v-=g,0===(g=w>>>16&255))C[a++]=65535&w;else{if(!(16&g)){if(0==(64&g)){w=m[(65535&w)+(d&(1<<g)-1)];continue t}if(32&g){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}_=65535&w,(g&=15)&&(v<g&&(d+=E[n++]<<v,v+=8),_+=d&(1<<g)-1,d>>>=g,v-=g),v<15&&(d+=E[n++]<<v,v+=8,d+=E[n++]<<v,v+=8),w=p[d&b];r:for(;;){if(d>>>=g=w>>>24,v-=g,!(16&(g=w>>>16&255))){if(0==(64&g)){w=p[(65535&w)+(d&(1<<g)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(Z=65535&w,v<(g&=15)&&(d+=E[n++]<<v,(v+=8)<g&&(d+=E[n++]<<v,v+=8)),u<(Z+=d&(1<<g)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=g,v-=g,(g=a-s)<Z){if(c<(g=Z-g)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(x=f,(k=0)===h){if(k+=l-g,g<_){for(_-=g;C[a++]=f[k++],--g;);k=a-Z,x=C}}else if(h<g){if(k+=l+h-g,(g-=h)<_){for(_-=g;C[a++]=f[k++],--g;);if(k=0,h<_){for(_-=g=h;C[a++]=f[k++],--g;);k=a-Z,x=C}}}else if(k+=h-g,g<_){for(_-=g;C[a++]=f[k++],--g;);k=a-Z,x=C}for(;2<_;)C[a++]=x[k++],C[a++]=x[k++],C[a++]=x[k++],_-=3;_&&(C[a++]=x[k++],1<_&&(C[a++]=x[k++]))}else{for(k=a-Z;C[a++]=C[k++],C[a++]=C[k++],C[a++]=C[k++],2<(_-=3););_&&(C[a++]=C[k++],1<_&&(C[a++]=C[k++]))}break}}break}}while(n<i&&a<o);n-=_=v>>3,d&=(1<<(v-=_<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<o?o-a+257:257-(a-o),r.hold=d,r.bits=v}},{}],49:[function(e,t,r){"use strict";var n=e("../utils/common"),i=e("./adler32"),a=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),u=1,l=2,c=0,h=-2,f=1,d=852,v=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=f,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(d),t.distcode=t.distdyn=new n.Buf32(v),t.sane=1,t.back=-1,c):h}function b(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,y(e)):h}function w(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,b(e))):h}function g(e,t){var r,n;return e?(n=new p,(e.state=n).window=null,(r=w(e,t))!==c&&(e.state=null),r):h}var _,Z,k=!0;function x(e){if(k){var t;for(_=new n.Buf32(512),Z=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(u,e.lens,0,288,_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(l,e.lens,0,32,Z,0,e.work,{bits:5}),k=!1}e.lencode=_,e.lenbits=9,e.distcode=Z,e.distbits=5}function E(e,t,r,i){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(a=s.wsize-s.wnext)&&(a=i),n.arraySet(s.window,t,r-i,a,s.wnext),(i-=a)?(n.arraySet(s.window,t,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}r.inflateReset=b,r.inflateReset2=w,r.inflateResetKeep=y,r.inflateInit=function(e){return g(e,15)},r.inflateInit2=g,r.inflate=function(e,t){var r,d,v,p,y,b,w,g,_,Z,k,C,O,S,A,R,M,N,W,I,z,D,F,j,P=0,T=new n.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(r=e.state).mode&&(r.mode=13),y=e.next_out,v=e.output,w=e.avail_out,p=e.next_in,d=e.input,b=e.avail_in,g=r.hold,_=r.bits,Z=b,k=w,D=c;e:for(;;)switch(r.mode){case f:if(0===r.wrap){r.mode=13;break}for(;_<16;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(2&r.wrap&&35615===g){T[r.check=0]=255&g,T[1]=g>>>8&255,r.check=a(r.check,T,2,0),_=g=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",r.mode=30;break}if(_-=4,z=8+(15&(g>>>=4)),0===r.wbits)r.wbits=z;else if(z>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<z,e.adler=r.check=1,r.mode=512&g?10:12,_=g=0;break;case 2:for(;_<16;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(r.flags=g,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(T[0]=255&g,T[1]=g>>>8&255,r.check=a(r.check,T,2,0)),_=g=0,r.mode=3;case 3:for(;_<32;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}r.head&&(r.head.time=g),512&r.flags&&(T[0]=255&g,T[1]=g>>>8&255,T[2]=g>>>16&255,T[3]=g>>>24&255,r.check=a(r.check,T,4,0)),_=g=0,r.mode=4;case 4:for(;_<16;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(T[0]=255&g,T[1]=g>>>8&255,r.check=a(r.check,T,2,0)),_=g=0,r.mode=5;case 5:if(1024&r.flags){for(;_<16;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(T[0]=255&g,T[1]=g>>>8&255,r.check=a(r.check,T,2,0)),_=g=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(b<(C=r.length)&&(C=b),C&&(r.head&&(z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,d,p,C,z)),512&r.flags&&(r.check=a(r.check,d,C,p)),b-=C,p+=C,r.length-=C),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===b)break e;for(C=0;z=d[p+C++],r.head&&z&&r.length<65536&&(r.head.name+=String.fromCharCode(z)),z&&C<b;);if(512&r.flags&&(r.check=a(r.check,d,C,p)),b-=C,p+=C,z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===b)break e;for(C=0;z=d[p+C++],r.head&&z&&r.length<65536&&(r.head.comment+=String.fromCharCode(z)),z&&C<b;);if(512&r.flags&&(r.check=a(r.check,d,C,p)),b-=C,p+=C,z)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;_<16;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(g!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}_=g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;_<32;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}e.adler=r.check=m(g),_=g=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=y,e.avail_out=w,e.next_in=p,e.avail_in=b,r.hold=g,r.bits=_,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){g>>>=7&_,_-=7&_,r.mode=27;break}for(;_<3;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}switch(r.last=1&g,_-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(x(r),r.mode=20,6!==t)break;g>>>=2,_-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}g>>>=2,_-=2;break;case 14:for(g>>>=7&_,_-=7&_;_<32;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&g,_=g=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(C=r.length){if(b<C&&(C=b),w<C&&(C=w),0===C)break e;n.arraySet(v,d,p,C,y),b-=C,p+=C,w-=C,y+=C,r.length-=C;break}r.mode=12;break;case 17:for(;_<14;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(r.nlen=257+(31&g),g>>>=5,_-=5,r.ndist=1+(31&g),g>>>=5,_-=5,r.ncode=4+(15&g),g>>>=4,_-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;_<3;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}r.lens[B[r.have++]]=7&g,g>>>=3,_-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},D=o(0,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,D){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;R=(P=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,M=65535&P,!((A=P>>>24)<=_);){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(M<16)g>>>=A,_-=A,r.lens[r.have++]=M;else{if(16===M){for(j=A+2;_<j;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(g>>>=A,_-=A,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}z=r.lens[r.have-1],C=3+(3&g),g>>>=2,_-=2}else if(17===M){for(j=A+3;_<j;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}_-=A,z=0,C=3+(7&(g>>>=A)),g>>>=3,_-=3}else{for(j=A+7;_<j;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}_-=A,z=0,C=11+(127&(g>>>=A)),g>>>=7,_-=7}if(r.have+C>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;C--;)r.lens[r.have++]=z}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,F={bits:r.lenbits},D=o(u,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,D){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},D=o(l,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,D){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=b&&258<=w){e.next_out=y,e.avail_out=w,e.next_in=p,e.avail_in=b,r.hold=g,r.bits=_,s(e,k),y=e.next_out,v=e.output,w=e.avail_out,p=e.next_in,d=e.input,b=e.avail_in,g=r.hold,_=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;R=(P=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,M=65535&P,!((A=P>>>24)<=_);){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(R&&0==(240&R)){for(N=A,W=R,I=M;R=(P=r.lencode[I+((g&(1<<N+W)-1)>>N)])>>>16&255,M=65535&P,!(N+(A=P>>>24)<=_);){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}g>>>=N,_-=N,r.back+=N}if(g>>>=A,_-=A,r.back+=A,r.length=M,0===R){r.mode=26;break}if(32&R){r.back=-1,r.mode=12;break}if(64&R){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&R,r.mode=22;case 22:if(r.extra){for(j=r.extra;_<j;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,_-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;R=(P=r.distcode[g&(1<<r.distbits)-1])>>>16&255,M=65535&P,!((A=P>>>24)<=_);){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(0==(240&R)){for(N=A,W=R,I=M;R=(P=r.distcode[I+((g&(1<<N+W)-1)>>N)])>>>16&255,M=65535&P,!(N+(A=P>>>24)<=_);){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}g>>>=N,_-=N,r.back+=N}if(g>>>=A,_-=A,r.back+=A,64&R){e.msg="invalid distance code",r.mode=30;break}r.offset=M,r.extra=15&R,r.mode=24;case 24:if(r.extra){for(j=r.extra;_<j;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,_-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===w)break e;if(C=k-w,r.offset>C){if((C=r.offset-C)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}O=C>r.wnext?(C-=r.wnext,r.wsize-C):r.wnext-C,C>r.length&&(C=r.length),S=r.window}else S=v,O=y-r.offset,C=r.length;for(w<C&&(C=w),w-=C,r.length-=C;v[y++]=S[O++],--C;);0===r.length&&(r.mode=21);break;case 26:if(0===w)break e;v[y++]=r.length,w--,r.mode=21;break;case 27:if(r.wrap){for(;_<32;){if(0===b)break e;b--,g|=d[p++]<<_,_+=8}if(k-=w,e.total_out+=k,r.total+=k,k&&(e.adler=r.check=r.flags?a(r.check,v,k,y-k):i(r.check,v,k,y-k)),k=w,(r.flags?g:m(g))!==r.check){e.msg="incorrect data check",r.mode=30;break}_=g=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;_<32;){if(0===b)break e;b--,g+=d[p++]<<_,_+=8}if(g!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}_=g=0}r.mode=29;case 29:D=1;break e;case 30:D=-3;break e;case 31:return-4;default:return h}return e.next_out=y,e.avail_out=w,e.next_in=p,e.avail_in=b,r.hold=g,r.bits=_,(r.wsize||k!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&E(e,e.output,e.next_out,k-e.avail_out)?(r.mode=31,-4):(Z-=e.avail_in,k-=e.avail_out,e.total_in+=Z,e.total_out+=k,r.total+=k,r.wrap&&k&&(e.adler=r.check=r.flags?a(r.check,v,k,e.next_out-k):i(r.check,v,k,e.next_out-k)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==Z&&0===k||4===t)&&D===c&&(D=-5),D)},r.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,c},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?h:((r.head=t).done=!1,c):h},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?h:11===r.mode&&i(1,t,n,0)!==r.check?-3:E(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,c):h},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,u,l,c,h,f){var d,v,m,p,y,b,w,g,_,Z=f.bits,k=0,x=0,E=0,C=0,O=0,S=0,A=0,R=0,M=0,N=0,W=null,I=0,z=new n.Buf16(16),D=new n.Buf16(16),F=null,j=0;for(k=0;k<=15;k++)z[k]=0;for(x=0;x<u;x++)z[t[r+x]]++;for(O=Z,C=15;1<=C&&0===z[C];C--);if(C<O&&(O=C),0===C)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(E=1;E<C&&0===z[E];E++);for(O<E&&(O=E),k=R=1;k<=15;k++)if(R<<=1,(R-=z[k])<0)return-1;if(0<R&&(0===e||1!==C))return-1;for(D[1]=0,k=1;k<15;k++)D[k+1]=D[k]+z[k];for(x=0;x<u;x++)0!==t[r+x]&&(h[D[t[r+x]]++]=x);if(b=0===e?(W=F=h,19):1===e?(W=i,I-=257,F=a,j-=257,256):(W=s,F=o,-1),k=E,y=c,A=x=N=0,m=-1,p=(M=1<<(S=O))-1,1===e&&852<M||2===e&&592<M)return 1;for(;;){for(w=k-A,_=h[x]<b?(g=0,h[x]):h[x]>b?(g=F[j+h[x]],W[I+h[x]]):(g=96,0),d=1<<k-A,E=v=1<<S;l[y+(N>>A)+(v-=d)]=w<<24|g<<16|_|0,0!==v;);for(d=1<<k-1;N&d;)d>>=1;if(0!==d?(N&=d-1,N+=d):N=0,x++,0==--z[k]){if(k===C)break;k=t[r+h[x]]}if(O<k&&(N&p)!==m){for(0===A&&(A=O),y+=E,R=1<<(S=k-A);S+A<C&&!((R-=z[S+A])<=0);)S++,R<<=1;if(M+=1<<S,1===e&&852<M||2===e&&592<M)return 1;l[m=N&p]=O<<24|S<<16|y-c|0}}return 0!==N&&(l[y+N]=k-A<<24|64<<16|0),f.bits=O,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var n=e("../utils/common"),i=0,a=1;function s(e){for(var t=e.length;0<=--t;)e[t]=0}var o=0,u=29,l=256,c=l+1+u,h=30,f=19,d=2*c+1,v=15,m=16,p=7,y=256,b=16,w=17,g=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(c+2));s(E);var C=new Array(2*h);s(C);var O=new Array(512);s(O);var S=new Array(256);s(S);var A=new Array(u);s(A);var R,M,N,W=new Array(h);function I(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function z(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function D(e){return e<256?O[e]:O[256+(e>>>7)]}function F(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function j(e,t,r){e.bi_valid>m-r?(e.bi_buf|=t<<e.bi_valid&65535,F(e,e.bi_buf),e.bi_buf=t>>m-e.bi_valid,e.bi_valid+=r-m):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function P(e,t,r){j(e,r[2*t],r[2*t+1])}function T(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function B(e,t,r){var n,i,a=new Array(v+1),s=0;for(n=1;n<=v;n++)a[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=T(a[o]++,o))}}function L(e){var t;for(t=0;t<c;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<f;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function U(e){8<e.bi_valid?F(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function q(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&Y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Y(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function H(e,t,r){var n,i,a,s,o=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===n?P(e,i,t):(P(e,(a=S[i])+l+1,t),0!==(s=_[a])&&j(e,i-=A[a],s),P(e,a=D(--n),r),0!==(s=Z[a])&&j(e,n-=W[a],s)),o<e.last_lit;);P(e,y,t)}function G(e,t){var r,n,i,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=d,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=s[2*i+1]);for(t.max_code=l,r=e.heap_len>>1;1<=r;r--)q(e,a,r);for(i=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],q(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,q(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,a,s,o,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,p=t.stat_desc.max_length,y=0;for(a=0;a<=v;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<d;r++)p<(a=u[2*u[2*(n=e.heap[r])+1]+1]+1)&&(a=p,y++),u[2*n+1]=a,l<n||(e.bl_count[a]++,s=0,m<=n&&(s=f[n-m]),o=u[2*n],e.opt_len+=o*(a+s),h&&(e.static_len+=o*(c[2*n+1]+s)));if(0!==y){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,y-=2}while(0<y);for(a=p;0!==a;a--)for(n=e.bl_count[a];0!==n;)l<(i=e.heap[--r])||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}(e,t),B(a,l,e.bl_count)}function V(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++o<u&&i===s||(o<l?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*b]++):o<=10?e.bl_tree[2*w]++:e.bl_tree[2*g]++,a=i,l=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function $(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++o<u&&i===s)){if(o<l)for(;P(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==a&&(P(e,i,e.bl_tree),o--),P(e,b,e.bl_tree),j(e,o-3,2)):o<=10?(P(e,w,e.bl_tree),j(e,o-3,3)):(P(e,g,e.bl_tree),j(e,o-11,7));a=i,l=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}s(W);var K=!1;function J(e,t,r,i){j(e,(o<<1)+(i?1:0),3),function(e,t,r,i){U(e),i&&(F(e,r),F(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}r._tr_init=function(e){K||(function(){var e,t,r,n,i,a=new Array(v+1);for(n=r=0;n<u-1;n++)for(A[n]=r,e=0;e<1<<_[n];e++)S[r++]=n;for(S[r-1]=n,n=i=0;n<16;n++)for(W[n]=i,e=0;e<1<<Z[n];e++)O[i++]=n;for(i>>=7;n<h;n++)for(W[n]=i<<7,e=0;e<1<<Z[n]-7;e++)O[256+i++]=n;for(t=0;t<=v;t++)a[t]=0;for(e=0;e<=143;)E[2*e+1]=8,e++,a[8]++;for(;e<=255;)E[2*e+1]=9,e++,a[9]++;for(;e<=279;)E[2*e+1]=7,e++,a[7]++;for(;e<=287;)E[2*e+1]=8,e++,a[8]++;for(B(E,c+1,a),e=0;e<h;e++)C[2*e+1]=5,C[2*e]=T(e,5);R=new I(E,_,l+1,c,v),M=new I(C,Z,0,h,v),N=new I(new Array(0),k,0,f,p)}(),K=!0),e.l_desc=new z(e.dyn_ltree,R),e.d_desc=new z(e.dyn_dtree,M),e.bl_desc=new z(e.bl_tree,N),e.bi_buf=0,e.bi_valid=0,L(e)},r._tr_stored_block=J,r._tr_flush_block=function(e,t,r,n){var s,o,u=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<l;t++)if(0!==e.dyn_ltree[2*t])return a;return i}(e)),G(e,e.l_desc),G(e,e.d_desc),u=function(e){var t;for(V(e,e.dyn_ltree,e.l_desc.max_code),V(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=f-1;3<=t&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),s=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=s&&(s=o)):s=o=r+5,r+4<=s&&-1!==t?J(e,t,r,n):4===e.strategy||o===s?(j(e,2+(n?1:0),3),H(e,E,C)):(j(e,4+(n?1:0),3),function(e,t,r,n){var i;for(j(e,t-257,5),j(e,r-1,5),j(e,n-4,4),i=0;i<n;i++)j(e,e.bl_tree[2*x[i]+1],3);$(e,e.dyn_ltree,t-1),$(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),H(e,e.dyn_ltree,e.dyn_dtree)),L(e),n&&U(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(S[r]+l+1)]++,e.dyn_dtree[2*D(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){j(e,2,3),P(e,y,E),function(e){16===e.bi_valid?(F(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var r,n,i,a,s=1,o={},u=!1,l=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,r="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",d,!1):e.attachEvent("onmessage",d),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(f,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return o[s]=i,r(s),s++},c.clearImmediate=h}function h(e){delete o[e]}function f(e){if(u)setTimeout(f,0,e);else{var r=o[e];if(r){u=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{h(e),u=!1}}}}function d(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},1025:function(e,t){var r,n,i;n=[],r=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},r=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,i={},a=0,s={parse:function(r,n){var o=(n=n||{}).dynamicTyping||!1;if(_(o)&&(n.dynamicTypingFunction=o,o={}),n.dynamicTyping=o,n.transform=!!_(n.transform)&&n.transform,n.worker&&s.WORKERS_SUPPORTED){var u=function(){if(!s.WORKERS_SUPPORTED)return!1;var r,n,o=(r=t.URL||t.webkitURL||null,n=e.toString(),s.BLOB_URL||(s.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))),u=new t.Worker(o);return u.onmessage=p,u.id=a++,i[u.id]=u}();return u.userStep=n.step,u.userChunk=n.chunk,u.userComplete=n.complete,u.userError=n.error,n.step=_(n.step),n.chunk=_(n.chunk),n.complete=_(n.complete),n.error=_(n.error),delete n.worker,void u.postMessage({input:r,config:n,workerId:u.id})}var d=null;return s.NODE_STREAM_INPUT,"string"==typeof r?(r=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(r),d=n.download?new l(n):new h(n)):!0===r.readable&&_(r.read)&&_(r.on)?d=new f(n):(t.File&&r instanceof File||r instanceof Object)&&(d=new c(n)),d.stream(r)},unparse:function(e,t){var r=!1,n=!0,i=",",a="\r\n",o='"',u=o+o,l=!1,c=null,h=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||s.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(l=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(o=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");c=t.columns}void 0!==t.escapeChar&&(u=t.escapeChar+o),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(h=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var f=new RegExp(v(o),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return d(null,e,l);if("object"==typeof e[0])return d(c||Object.keys(e[0]),e,l)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||c),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),d(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function d(e,t,r){var s="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var o=Array.isArray(e)&&0<e.length,u=!Array.isArray(t[0]);if(o&&n){for(var l=0;l<e.length;l++)0<l&&(s+=i),s+=m(e[l],l);0<t.length&&(s+=a)}for(var c=0;c<t.length;c++){var h=o?e.length:t[c].length,f=!1,d=o?0===Object.keys(t[c]).length:0===t[c].length;if(r&&!o&&(f="greedy"===r?""===t[c].join("").trim():1===t[c].length&&0===t[c][0].length),"greedy"===r&&o){for(var v=[],p=0;p<h;p++){var y=u?e[p]:p;v.push(t[c][y])}f=""===v.join("").trim()}if(!f){for(var b=0;b<h;b++){0<b&&!d&&(s+=i);var w=o&&u?e[b]:b;s+=m(t[c][w],b)}c<t.length-1&&(!r||0<h&&!d)&&(s+=a)}}return s}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var n=!1;h&&"string"==typeof e&&h.test(e)&&(e="'"+e,n=!0);var a=e.toString().replace(f,u);return(n=n||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(a,s.BAD_DELIMITERS)||-1<a.indexOf(i)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?o+a+o:a}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!r&&!!t.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=m,s.ParserHandle=d,s.NetworkStreamer=l,s.FileStreamer=c,s.StringStreamer=h,s.ReadableStreamStreamer=f,t.jQuery){var o=t.jQuery;o.fn.parse=function(e){var r=e.config||{},n=[];return this.each((function(e){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)n.push({file:this.files[i],inputElem:this,instanceConfig:o.extend({},r)})})),i(),this;function i(){if(0!==n.length){var t,r,i,u,l=n[0];if(_(e.before)){var c=e.before(l.file,l.inputElem);if("object"==typeof c){if("abort"===c.action)return t="AbortError",r=l.file,i=l.inputElem,u=c.reason,void(_(e.error)&&e.error({name:t},r,i,u));if("skip"===c.action)return void a();"object"==typeof c.config&&(l.instanceConfig=o.extend(l.instanceConfig,c.config))}else if("skip"===c)return void a()}var h=l.instanceConfig.complete;l.instanceConfig.complete=function(e){_(h)&&h(e,l.file,l.inputElem),a()},s.parse(l.file,l.instanceConfig)}else _(e.complete)&&e.complete()}function a(){n.splice(0,1),i()}}}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=w(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new d(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,r){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var o=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=o.meta.cursor;this._finished||(this._partialLine=a.substring(u-this._baseIndex),this._baseIndex=u),o&&o.data&&(this._rowCount+=o.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:o,workerId:s.WORKER_ID,finished:l});else if(_(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!l||!_(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):n&&this._config.error&&t.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function l(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),u.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=g(this._chunkLoaded,this),t.onerror=g(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var n in e)t.setRequestHeader(n,e[n])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(new Error(r))}}function c(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),u.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=g(this._chunkLoaded,this),t.onerror=g(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,i)}var a=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function h(e){var t;u.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,r=this._config.chunkSize;return r?(e=t.substring(0,r),t=t.substring(r)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function f(e){u.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=g((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=g((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=g((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=g((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function d(e){var t,r,n,i=Math.pow(2,53),a=-i,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,c=0,h=0,f=!1,d=!1,p=[],y={data:[],errors:[],meta:{}};if(_(e.step)){var b=e.step;e.step=function(t){if(y=t,k())Z();else{if(Z(),0===y.data.length)return;c+=t.data.length,e.preview&&c>e.preview?r.abort():(y.data=y.data[0],b(y,l))}}}function g(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function Z(){return y&&n&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(y.data=y.data.filter((function(e){return!g(e)}))),k()&&function(){if(y)if(Array.isArray(y.data[0])){for(var t=0;k()&&t<y.data.length;t++)y.data[t].forEach(r);y.data.splice(0,1)}else y.data.forEach(r);function r(t,r){_(e.transformHeader)&&(t=e.transformHeader(t,r)),p.push(t)}}(),function(){if(!y||!e.header&&!e.dynamicTyping&&!e.transform)return y;function t(t,r){var n,i=e.header?{}:[];for(n=0;n<t.length;n++){var a=n,s=t[n];e.header&&(a=n>=p.length?"__parsed_extra":p[n]),e.transform&&(s=e.transform(s,a)),s=x(a,s),"__parsed_extra"===a?(i[a]=i[a]||[],i[a].push(s)):i[a]=s}return e.header&&(n>p.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+n,h+r):n<p.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+n,h+r)),i}var r=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(t),r=y.data.length):y.data=t(y.data,0),e.header&&y.meta&&(y.meta.fields=p),h+=r,y}()}function k(){return e.header&&0===p.length}function x(t,r){return n=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(e){if(o.test(e)){var t=parseFloat(e);if(a<t&&t<i)return!0}return!1}(r)?parseFloat(r):u.test(r)?new Date(r):""===r?null:r):r;var n}function E(e,t,r,n){var i={type:e,code:t,message:r};void 0!==n&&(i.row=n),y.errors.push(i)}this.parse=function(i,a,o){var u=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(v(t)+"([^]*?)"+v(t),"gm"),n=(e=e.replace(r,"")).split("\r"),i=e.split("\n"),a=1<i.length&&i[0].length<n[0].length;if(1===n.length||a)return"\n";for(var s=0,o=0;o<n.length;o++)"\n"===n[o][0]&&s++;return s>=n.length/2?"\r\n":"\r"}(i,u)),n=!1,e.delimiter)_(e.delimiter)&&(e.delimiter=e.delimiter(i),y.meta.delimiter=e.delimiter);else{var l=function(t,r,n,i,a){var o,u,l,c;a=a||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var h=0;h<a.length;h++){var f=a[h],d=0,v=0,p=0;l=void 0;for(var y=new m({comments:i,delimiter:f,newline:r,preview:10}).parse(t),b=0;b<y.data.length;b++)if(n&&g(y.data[b]))p++;else{var w=y.data[b].length;v+=w,void 0!==l?0<w&&(d+=Math.abs(w-l),l=w):l=w}0<y.data.length&&(v/=y.data.length-p),(void 0===u||d<=u)&&(void 0===c||c<v)&&1.99<v&&(u=d,o=f,c=v)}return{successful:!!(e.delimiter=o),bestDelimiter:o}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);l.successful?e.delimiter=l.bestDelimiter:(n=!0,e.delimiter=s.DefaultDelimiter),y.meta.delimiter=e.delimiter}var c=w(e);return e.preview&&e.header&&c.preview++,t=i,r=new m(c),y=r.parse(t,a,o),Z(),f?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,r.abort(),t=_(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){l.streamer._halted?(f=!1,l.streamer.parseChunk(t,!0)):setTimeout(l.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,r.abort(),y.meta.aborted=!0,_(e.complete)&&e.complete(y),t=""}}function v(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,r=(e=e||{}).delimiter,n=e.newline,i=e.comments,a=e.step,o=e.preview,u=e.fastMode,l=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(l=e.escapeChar),("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=","),i===r)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<s.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var c=0,h=!1;this.parse=function(s,f,d){if("string"!=typeof s)throw new Error("Input must be a string");var m=s.length,p=r.length,y=n.length,b=i.length,w=_(a),g=[],Z=[],k=[],x=c=0;if(!s)return H();if(e.header){var E=s.split(n)[0].split(r),C=[],O={},S=!1;for(var A in E){var R=E[A];_(e.transformHeader)&&(R=e.transformHeader(R,A));var M=R,N=O[R]||0;0<N&&(S=!0,M=R+"_"+N),O[R]=N+1,C.push(M)}if(S){var W=s.split(n);W[0]=C.join(r),s=W.join(n)}}if(u||!1!==u&&-1===s.indexOf(t)){for(var I=s.split(n),z=0;z<I.length;z++){if(k=I[z],c+=k.length,z!==I.length-1)c+=n.length;else if(d)return H();if(!i||k.substring(0,b)!==i){if(w){if(g=[],L(k.split(r)),G(),h)return H()}else L(k.split(r));if(o&&o<=z)return g=g.slice(0,o),H(!0)}}return H()}for(var D=s.indexOf(r,c),F=s.indexOf(n,c),j=new RegExp(v(l)+v(t),"g"),P=s.indexOf(t,c);;)if(s[c]!==t)if(i&&0===k.length&&s.substring(c,c+b)===i){if(-1===F)return H();c=F+y,F=s.indexOf(n,c),D=s.indexOf(r,c)}else if(-1!==D&&(D<F||-1===F))k.push(s.substring(c,D)),c=D+p,D=s.indexOf(r,c);else{if(-1===F)break;if(k.push(s.substring(c,F)),q(F+y),w&&(G(),h))return H();if(o&&g.length>=o)return H(!0)}else for(P=c,c++;;){if(-1===(P=s.indexOf(t,P+1)))return d||Z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:g.length,index:c}),Y();if(P===m-1)return Y(s.substring(c,P).replace(j,t));if(t!==l||s[P+1]!==l){if(t===l||0===P||s[P-1]!==l){-1!==D&&D<P+1&&(D=s.indexOf(r,P+1)),-1!==F&&F<P+1&&(F=s.indexOf(n,P+1));var T=U(-1===F?D:Math.min(D,F));if(s.substr(P+1+T,p)===r){k.push(s.substring(c,P).replace(j,t)),s[c=P+1+T+p]!==t&&(P=s.indexOf(t,c)),D=s.indexOf(r,c),F=s.indexOf(n,c);break}var B=U(F);if(s.substring(P+1+B,P+1+B+y)===n){if(k.push(s.substring(c,P).replace(j,t)),q(P+1+B+y),D=s.indexOf(r,c),P=s.indexOf(t,c),w&&(G(),h))return H();if(o&&g.length>=o)return H(!0);break}Z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:g.length,index:c}),P++}}else P++}return Y();function L(e){g.push(e),x=c}function U(e){var t=0;if(-1!==e){var r=s.substring(P+1,e);r&&""===r.trim()&&(t=r.length)}return t}function Y(e){return d||(void 0===e&&(e=s.substring(c)),k.push(e),c=m,L(k),w&&G()),H()}function q(e){c=e,L(k),k=[],F=s.indexOf(n,c)}function H(e){return{data:g,errors:Z,meta:{delimiter:r,linebreak:n,aborted:h,truncated:!!e,cursor:x+(f||0)}}}function G(){a(H()),g=[],Z=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return c}}function p(e){var t=e.data,r=i[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){n=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(_(r.userStep)){for(var s=0;s<t.results.data.length&&(r.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},a),!n);s++);delete t.results}else _(r.userChunk)&&(r.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!n&&y(t.workerId,t.results)}function y(e,t){var r=i[e];_(r.userComplete)&&r.userComplete(t),r.terminate(),delete i[e]}function b(){throw new Error("Not implemented.")}function w(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=w(e[r]);return t}function g(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return n&&(t.onmessage=function(e){var r=e.data;if(void 0===s.WORKER_ID&&r&&(s.WORKER_ID=r.workerId),"string"==typeof r.input)t.postMessage({workerId:s.WORKER_ID,results:s.parse(r.input,r.config),finished:!0});else if(t.File&&r.input instanceof File||r.input instanceof Object){var n=s.parse(r.input,r.config);n&&t.postMessage({workerId:s.WORKER_ID,results:n,finished:!0})}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(h.prototype=Object.create(h.prototype)).constructor=h,(f.prototype=Object.create(u.prototype)).constructor=f,s},void 0===(i="function"===typeof r?r.apply(t,n):r)||(e.exports=i)},3841:function(e,t,r){e=r.nmd(e),function(r,n){var i=function(){var e=null,t={};m();var r=[],n=function t(n){if(void 0!==(n=n||{}).seed&&null!==n.seed&&n.seed===parseInt(n.seed,10))e=n.seed;else if("string"===typeof n.seed)e=w(n.seed);else{if(void 0!==n.seed&&null!==n.seed)throw new TypeError("The seed value must be an integer or string");e=null}var u,l;if(null!==n.count&&void 0!==n.count){for(var c=n.count,h=[],f=0;f<n.count;f++)r.push(!1);for(n.count=null;c>h.length;){var d=t(n);null!==e&&(n.seed=e),h.push(d)}return n.count=c,h}return o([u=i(n),l=a(u,n),s(u,l,n)],n)};function i(e){if(r.length>0){var t=f(a=g(e.hue)),n=(a[1]-a[0])/r.length,i=parseInt((t-a[0])/n);return!0===r[i]?i=(i+2)%r.length:r[i]=!0,(t=f(a=[(a[0]+i*n)%359,(a[0]+(i+1)*n)%359]))<0&&(t=360+t),t}var a;return(t=f(a=l(e.hue)))<0&&(t=360+t),t}function a(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return f([0,100]);var r=c(e),n=r[0],i=r[1];switch(t.luminosity){case"bright":n=55;break;case"dark":n=i-10;break;case"light":i=55}return f([n,i])}function s(e,t,r){var n=u(e,t),i=100;switch(r.luminosity){case"dark":i=n+20;break;case"light":n=(i+n)/2;break;case"random":n=0,i=100}return f([n,i])}function o(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return b(e);case"hsl":var r=b(e);return"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)";case"hsla":var n=b(e),i=t.alpha||Math.random();return"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+i+")";case"rgbArray":return p(e);case"rgb":return"rgb("+p(e).join(", ")+")";case"rgba":var a=p(e);i=t.alpha||Math.random();return"rgba("+a.join(", ")+", "+i+")";default:return d(e)}}function u(e,t){for(var r=h(e).lowerBounds,n=0;n<r.length-1;n++){var i=r[n][0],a=r[n][1],s=r[n+1][0],o=r[n+1][1];if(t>=i&&t<=s){var u=(o-a)/(s-i);return u*t+(a-u*i)}}return 0}function l(e){if("number"===typeof parseInt(e)){var r=parseInt(e);if(r<360&&r>0)return[r,r]}if("string"===typeof e)if(t[e]){var n=t[e];if(n.hueRange)return n.hueRange}else if(e.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var i=y(e)[0];return[i,i]}return[0,360]}function c(e){return h(e).saturationRange}function h(e){for(var r in e>=334&&e<=360&&(e-=360),t){var n=t[r];if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1])return t[r]}return"Color not found"}function f(t){if(null===e){var r=.618033988749895,n=Math.random();return n+=r,n%=1,Math.floor(t[0]+n*(t[1]+1-t[0]))}var i=t[1]||1,a=t[0]||0,s=(e=(9301*e+49297)%233280)/233280;return Math.floor(a+s*(i-a))}function d(e){var t=p(e);function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t[0])+r(t[1])+r(t[2])}function v(e,r,n){var i=n[0][0],a=n[n.length-1][0],s=n[n.length-1][1],o=n[0][1];t[e]={hueRange:r,lowerBounds:n,saturationRange:[i,a],brightnessRange:[s,o]}}function m(){v("monochrome",null,[[0,0],[100,0]]),v("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),v("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),v("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),v("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),v("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),v("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),v("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function p(e){var t=e[0];0===t&&(t=1),360===t&&(t=359),t/=360;var r=e[1]/100,n=e[2]/100,i=Math.floor(6*t),a=6*t-i,s=n*(1-r),o=n*(1-a*r),u=n*(1-(1-a)*r),l=256,c=256,h=256;switch(i){case 0:l=n,c=u,h=s;break;case 1:l=o,c=n,h=s;break;case 2:l=s,c=n,h=u;break;case 3:l=s,c=o,h=n;break;case 4:l=u,c=s,h=n;break;case 5:l=n,c=s,h=o}return[Math.floor(255*l),Math.floor(255*c),Math.floor(255*h)]}function y(e){e=3===(e=e.replace(/^#/,"")).length?e.replace(/(.)/g,"$1$1"):e;var t=parseInt(e.substr(0,2),16)/255,r=parseInt(e.substr(2,2),16)/255,n=parseInt(e.substr(4,2),16)/255,i=Math.max(t,r,n),a=i-Math.min(t,r,n),s=i?a/i:0;switch(i){case t:return[(r-n)/a%6*60||0,s,i];case r:return[60*((n-t)/a+2)||0,s,i];case n:return[60*((t-r)/a+4)||0,s,i]}}function b(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=(2-r)*n;return[t,Math.round(r*n/(i<1?i:2-i)*1e4)/100,i/2*100]}function w(e){for(var t=0,r=0;r!==e.length&&!(t>=Number.MAX_SAFE_INTEGER);r++)t+=e.charCodeAt(r);return t}function g(e){if(isNaN(e)){if("string"===typeof e)if(t[e]){var r=t[e];if(r.hueRange)return r.hueRange}else if(e.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){return h(y(e)[0]).hueRange}}else{var n=parseInt(e);if(n<360&&n>0)return h(e).hueRange}return[0,360]}return n}();e&&e.exports&&(t=e.exports=i),t.randomColor=i}()},907:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:function(){return n}})},3878:function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}r.d(t,{Z:function(){return n}})},5057:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(907);function i(e){if(Array.isArray(e))return(0,n.Z)(e)}},9730:function(e,t,r){"use strict";function n(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}r.d(t,{Z:function(){return n}})},8662:function(e,t,r){"use strict";function n(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}r.d(t,{Z:function(){return n}})},3889:function(e,t,r){"use strict";function n(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}r.d(t,{Z:function(){return n}})},8652:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(864);function i(e,t){(0,n.Z)(e,t),t.add(e)}},9902:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(6983),i=r(9730),a=r(8662);function s(e,t,r){return(0,i.Z)(e,t),(0,a.Z)(r,"get"),(0,n.Z)(e,r)}},3966:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(6011),i=r(9730),a=r(8662);function s(e,t,r,s){return(0,i.Z)(e,t),(0,a.Z)(r,"set"),(0,n.Z)(e,r,s),s}},2415:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9730);function i(e,t,r){return(0,n.Z)(e,t),r}},7762:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(181);function i(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=(0,n.Z)(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw s}}}}},9199:function(e,t,r){"use strict";function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r.d(t,{Z:function(){return n}})},1902:function(e,t,r){"use strict";function n(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}r.d(t,{Z:function(){return n}})},5267:function(e,t,r){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,{Z:function(){return n}})},2786:function(e,t,r){"use strict";function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,{Z:function(){return n}})},1413:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(4942);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},3324:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(3878),i=r(1902),a=r(181),s=r(5267);function o(e,t){return(0,n.Z)(e)||(0,i.Z)(e,t)||(0,a.Z)(e,t)||(0,s.Z)()}},9062:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(5057),i=r(9199),a=r(181),s=r(2786);function o(e){return(0,n.Z)(e)||(0,i.Z)(e)||(0,a.Z)(e)||(0,s.Z)()}},181:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(907);function i(e,t){if(e){if("string"===typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}},1408:function(e,t,r){"use strict";r(9792),r(5831)},9792:function(e,t,r){"use strict";r(5831);r(714)},2152:function(e,t,r){"use strict";r.d(t,{B:function(){return N}});var n=r(4165),i=r(5861),a=r(5671),s=r(3144),o=r(8652),u=r(2346),l=r(3889),c=r(2793),h=r(8916),f=r(5831),d=r(7462),v=r(6016),m=r(7173),p=r(3121),y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,_=new WeakMap,Z=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakMap,C=new WeakMap,O=new WeakMap,S=new WeakSet,A=new WeakSet,R=new WeakSet,M=new WeakSet,N=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.featureTypeRnaName,i=void 0===n?"Gene Expression":n,s=r.featureTypeAdtName,l=void 0===s?"Antibody Capture":s,h=r.featureTypeCrisprName,f=void 0===h?"CRISPR Guide Capture":h,d=r.primaryRnaFeatureIdColumn,m=void 0===d?0:d,p=r.primaryAdtFeatureIdColumn,N=void 0===p?0:p,W=r.primaryCrisprFeatureIdColumn,I=void 0===W?0:W;(0,a.Z)(this,e),(0,o.Z)(this,M),(0,o.Z)(this,R),(0,o.Z)(this,A),(0,o.Z)(this,S),(0,u.Z)(this,y,{writable:!0,value:void 0}),(0,u.Z)(this,b,{writable:!0,value:void 0}),(0,u.Z)(this,w,{writable:!0,value:void 0}),(0,u.Z)(this,g,{writable:!0,value:void 0}),(0,u.Z)(this,_,{writable:!0,value:void 0}),(0,u.Z)(this,Z,{writable:!0,value:void 0}),(0,u.Z)(this,k,{writable:!0,value:void 0}),(0,u.Z)(this,x,{writable:!0,value:void 0}),(0,u.Z)(this,E,{writable:!0,value:void 0}),(0,u.Z)(this,C,{writable:!0,value:void 0}),(0,u.Z)(this,O,{writable:!0,value:void 0}),t instanceof v.z?(0,c.Z)(this,y,t):(0,c.Z)(this,y,new v.z(t)),(0,c.Z)(this,Z,i),(0,c.Z)(this,k,l),(0,c.Z)(this,x,f),(0,c.Z)(this,E,m),(0,c.Z)(this,C,N),(0,c.Z)(this,O,I),this.clear()}return(0,s.Z)(e,[{key:"setFeatureTypeRnaName",value:function(e){(0,c.Z)(this,Z,e)}},{key:"setFeatureTypeAdtName",value:function(e){(0,c.Z)(this,k,e)}},{key:"setFeatureTypeCrisprName",value:function(e){(0,c.Z)(this,x,e)}},{key:"setPrimaryRnaFeatureIdColumn",value:function(e){(0,c.Z)(this,E,e)}},{key:"setPrimaryAdtFeatureIdColumn",value:function(e){(0,c.Z)(this,C,e)}},{key:"setPrimaryCrisprFeatureIdColumn",value:function(e){(0,c.Z)(this,O,e)}},{key:"clear",value:function(){"function"==typeof(0,h.Z)(this,w)&&(0,h.Z)(this,w).call(this),(0,c.Z)(this,w,null),(0,c.Z)(this,b,null),(0,c.Z)(this,g,null),(0,c.Z)(this,_,null)}},{key:"abbreviate",value:function(){return(0,l.Z)(this,S,W).call(this,(function(e){return{name:e.name(),size:e.size()}}))}},{key:"summary",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,l.Z)(this,R,z).call(this),(0,l.Z)(this,M,D).call(this);var r={modality_features:p.LR((0,h.Z)(this,g),"type"),cells:(0,h.Z)(this,_)};return t||this.clear(),r}},{key:"load",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cache,t=void 0!==e&&e;(0,l.Z)(this,R,z).call(this),(0,l.Z)(this,M,D).call(this);var r=f.EF((0,h.Z)(this,b),"matrix"),n={RNA:(0,h.Z)(this,Z),ADT:(0,h.Z)(this,k),CRISPR:(0,h.Z)(this,x)},i=p.Bs(r,(0,h.Z)(this,g),"type",n,"RNA");i.cells=(0,h.Z)(this,_);var a={RNA:(0,h.Z)(this,E),ADT:(0,h.Z)(this,C),CRISPR:(0,h.Z)(this,O)};return i.primary_ids=p.P2(i.features,a),t||this.clear(),i}},{key:"serialize",value:function(){return(0,l.Z)(this,S,W).call(this,(function(e){return e}))}}],[{key:"format",value:function(){return"10X"}},{key:"unserialize",value:function(){var t=(0,i.Z)((0,n.Z)().mark((function t(r,i){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1==r.length&&"h5"==r[0].type){t.next=2;break}throw new Error("expected exactly one file of type 'h5' for 10X HDF5 unserialization");case 2:return t.abrupt("return",new e(r[0].file,i));case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}]),e}();function W(e){return{files:[{type:"h5",file:e((0,h.Z)(this,y))}],options:{featureTypeRnaName:(0,h.Z)(this,Z),featureTypeAdtName:(0,h.Z)(this,k),featureTypeCrisprName:(0,h.Z)(this,x),primaryRnaFeatureIdColumn:(0,h.Z)(this,E),primaryAdtFeatureIdColumn:(0,h.Z)(this,C),primaryCrisprFeatureIdColumn:(0,h.Z)(this,O)}}}function I(){if(null===(0,h.Z)(this,b)){var e=f.$H((0,h.Z)(this,y).content());(0,c.Z)(this,b,e.path),(0,c.Z)(this,w,e.flush)}}function z(){if(null===(0,h.Z)(this,g)){(0,l.Z)(this,A,I).call(this);var e=new f.pT((0,h.Z)(this,b));if(!("matrix"in e.children)||"Group"!=e.children.matrix)throw new Error("expected a 'matrix' group at the top level of the file");var t=e.open("matrix");if(!("features"in t.children)||"Group"!=t.children.features)throw new Error("expected a 'matrix/features' group containing the feature annotation");var r=t.open("features"),n=m.vp(r,"id");if(null==n)throw new Error("expected a 'matrix/features/id' string dataset containing the feature IDs");var i=new d.NE({id:n}),a=m.vp(r,"name");null!==a&&i.$setColumn("name",a);var s=m.vp(r,"feature_type");null!==s&&i.$setColumn("type",s),(0,c.Z)(this,g,i)}}function D(){if(null===(0,h.Z)(this,_)){(0,l.Z)(this,A,I).call(this);var e=f.N6((0,h.Z)(this,b),"matrix");(0,c.Z)(this,_,new d.NE({},{numberOfRows:e.columns}))}}},5173:function(e,t,r){"use strict";r.d(t,{GY:function(){return ee},Ne:function(){return be}});var n=r(3324),i=r(7762),a=r(8652),s=r(3889),o=r(4165),u=r(5671),l=r(3144),c=r(2346),h=r(8916),f=r(2793),d=r(5861),v=r(5831),m=r(7462),p=r(7173),y=r(3121),b=r(6016);function w(e,t){return g.apply(this,arguments)}function g(){return(g=(0,d.Z)((0,o.Z)().mark((function e(t,r){var n,a,s,u,l,c,h,f,d,y,b,g,_,Z,k,x,E,C,O,S,A,R,M;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}return e.next=3,r.metadata(t);case 3:t=e.sent;case 4:return e.next=6,r.file(t.path);case 6:if(n=e.sent,u=null,!t.$schema.startsWith("csv_data_frame/")){e.next=19;break}return e.next=11,p.Lm(n,{delim:","});case 11:for(l=e.sent,a=l.shift(),s=new Array(a.length),c=0;c<s.length;c++){h=[],f=(0,i.Z)(l);try{for(f.s();!(d=f.n()).done;)y=d.value,h.push(y[c])}catch(o){f.e(o)}finally{f.f()}s[c]=h}for(t.data_frame.row_names&&(u=s.shift(),a.shift()),c=0;c<s.length;c++)"integer"==(b=t.data_frame.columns[c].type)?s[c]=new Int32Array(s[c]):"number"==b?s[c]=new Float64Array(s[c]):"boolean"==b&&(s[c]=s[c].map((function(e){return"true"==e})));e.next=47;break;case 19:if(!t.$schema.startsWith("hdf5_data_frame/")){e.next=46;break}g=v.$H(n),e.prev=21,_=new v.pT(g.path),Z=_.open(t.hdf5_data_frame.group),a=Z.open("column_names",{load:!0}).values,t.data_frame.row_names&&(u=Z.open("row_names",{load:!0}).values),s=[],k=Z.open("data"),c=0;case 29:if(!(c<a.length)){e.next=41;break}if(String(c)in k.children){e.next=33;break}return s.push(null),e.abrupt("continue",38);case 33:if(x=k.open(String(c),{load:!0}),E=x.values,"integer"==(C=t.data_frame.columns[c]))(E instanceof Float64Array||E instanceof Float32Array)&&(E=new Int32Array(E));else if("number"==C)E instanceof Float64Array||E instanceof Float32Array||(E=new Float64Array(E));else if("boolean"==C){for(O=new Array(E.length),c=0;c<E.length;c++)-2147483648==E[c]?O[c]=null:O[c]=0!=E[c];E=O}else if(("string"==C||"date"==C)&&"missing-value-placeholder"in x.attributes)for(S=x.readAttribute("missing-value-placeholder").values[0],c=0;c<E.length;c++)E[c]==S&&(E[c]=null);s.push(E);case 38:c++,e.next=29;break;case 41:return e.prev=41,g.flush(),e.finish(41);case 44:e.next=47;break;case 46:throw new Error("unknown data_frame schema type '"+t.$schema+"'");case 47:A={},R=[],c=0;case 50:if(!(c<s.length)){e.next=72;break}if("other"!==t.data_frame.columns[c].type){e.next=67;break}return e.next=54,r.metadata(t.data_frame.columns[c].resource.path);case 54:return M=e.sent,e.prev=55,e.next=58,w(M,r);case 58:A[a[c]]=e.sent,R.push(a[c]),e.next=65;break;case 62:e.prev=62,e.t0=e.catch(55),console.warn(e.t0);case 65:e.next=69;break;case 67:A[a[c]]=s[c],R.push(a[c]);case 69:c++,e.next=50;break;case 72:return e.abrupt("return",new m.NE(A,{columnOrder:R,rowNames:u,numberOfRows:t.data_frame.dimensions[0]}));case 73:case"end":return e.stop()}}),e,null,[[21,,41,44],[55,62]])})))).apply(this,arguments)}var _="";function Z(e,t){return k.apply(this,arguments)}function k(){return k=(0,d.Z)((0,o.Z)().mark((function e(t,r){var n,a,s,u,l,c,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=(0,d.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("row_data"in t.summarized_experiment)){e.next=7;break}return n=t.summarized_experiment.row_data.resource.path,e.next=4,w(n,r);case 4:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",new m.NE({},{numberOfRows:t.summarized_experiment.dimensions[0]}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,r.metadata(t);case 3:return a=e.sent,s={},e.next=7,n(a);case 7:if(s[_]=e.sent,!("single_cell_experiment"in a)){e.next=36;break}u=(0,i.Z)(a.single_cell_experiment.alternative_experiments),e.prev=10,u.s();case 12:if((l=u.n()).done){e.next=28;break}return c=l.value,e.prev=14,e.next=17,r.metadata(c.resource.path);case 17:return h=e.sent,e.next=20,n(h);case 20:s[c.name]=e.sent,e.next=26;break;case 23:e.prev=23,e.t0=e.catch(14),console.warn("failed to extract features for alternative Experiment '"+c.name+"'; "+e.t0.message);case 26:e.next=12;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(10),u.e(e.t1);case 33:return e.prev=33,u.f(),e.finish(33);case 36:return e.abrupt("return",s);case 37:case"end":return e.stop()}}),e,null,[[10,30,33,36],[14,23]])}))),k.apply(this,arguments)}function x(e,t){return E.apply(this,arguments)}function E(){return(E=(0,d.Z)((0,o.Z)().mark((function e(t,r){var n,a,s,u,l,c,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){var t,r=[],n=(0,i.Z)(e.summarized_experiment.assays);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push(a.name)}}catch(s){n.e(s)}finally{n.f()}return r},e.next=3,r.metadata(t);case 3:if(a=e.sent,(s={})[_]=n(a),!("single_cell_experiment"in a)){e.next=32;break}u=(0,i.Z)(a.single_cell_experiment.alternative_experiments),e.prev=8,u.s();case 10:if((l=u.n()).done){e.next=24;break}return c=l.value,e.prev=12,e.next=15,r.metadata(c.resource.path);case 15:h=e.sent,s[c.name]=n(h),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),console.warn("failed to extract features for alternative Experiment '"+c.name+"'; "+e.t0.message);case 22:e.next=10;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(8),u.e(e.t1);case 29:return e.prev=29,u.f(),e.finish(29);case 32:return e.abrupt("return",s);case 33:case"end":return e.stop()}}),e,null,[[8,26,29,32],[12,19]])})))).apply(this,arguments)}function C(e,t){return O.apply(this,arguments)}function O(){return(O=(0,d.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,s,u,l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("operation"===t.readAttribute("delayed_type").values[0]){e.next=2;break}return e.abrupt("return",null);case 2:if("unary arithmetic"===t.readAttribute("delayed_operation").values[0]){e.next=4;break}return e.abrupt("return",null);case 4:if(!(Math.abs(t.open("value",{load:!0}).values[0]-Math.log(2))>1e-8)){e.next=6;break}return e.abrupt("return",null);case 6:if("/"===t.open("method",{load:!0}).values[0]){e.next=8;break}return e.abrupt("return",null);case 8:if("right"===t.open("side",{load:!0}).values[0]){e.next=10;break}return e.abrupt("return",null);case 10:if("operation"===(n=t.open("seed")).readAttribute("delayed_type").values[0]){e.next=13;break}return e.abrupt("return",null);case 13:if("unary math"===n.readAttribute("delayed_operation").values[0]){e.next=15;break}return e.abrupt("return",null);case 15:if("log1p"===n.open("method",{load:!0}).values[0]){e.next=17;break}return e.abrupt("return",null);case 17:if("operation"===(i=n.open("seed")).readAttribute("delayed_type").values[0]){e.next=20;break}return e.abrupt("return",null);case 20:if("unary arithmetic"===i.readAttribute("delayed_operation").values[0]){e.next=22;break}return e.abrupt("return",null);case 22:if("/"===i.open("method",{load:!0}).values[0]){e.next=24;break}return e.abrupt("return",null);case 24:if("right"===i.open("side",{load:!0}).values[0]){e.next=26;break}return e.abrupt("return",null);case 26:if(1===i.open("along",{load:!0}).values[0]){e.next=28;break}return e.abrupt("return",null);case 28:if(a=i.open("value",{load:!0}).values,"array"===(s=i.open("seed")).readAttribute("delayed_type").values[0]){e.next=32;break}return e.abrupt("return",null);case 32:if("custom alabaster local array"===s.readAttribute("delayed_array").values[0]){e.next=34;break}return e.abrupt("return",null);case 34:return u=s.open("path",{load:!0}).values[0],c={},e.prev=36,e.next=39,R(u,r,!1);case 39:l=e.sent,c.matrix=v.gk(l.matrix,{sizeFactors:a,center:!1}),c.row_ids=l.row_ids;case 42:return e.prev=42,v.gd(l.matrix),e.finish(42);case 45:return e.abrupt("return",c);case 46:case"end":return e.stop()}}),e,null,[[36,,42,45]])})))).apply(this,arguments)}function S(e,t,r,n){return A.apply(this,arguments)}function A(){return(A=(0,d.Z)((0,o.Z)().mark((function e(t,r,n,a){var s,u,l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof r){e.next=25;break}s=0,u=(0,i.Z)(t.summarized_experiment.assays),e.prev=3,u.s();case 5:if((l=u.n()).done){e.next=13;break}if(l.value.name!=r){e.next=10;break}return r=s,e.abrupt("break",13);case 10:s++;case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),u.e(e.t0);case 18:return e.prev=18,u.f(),e.finish(18);case 21:if(s!=t.summarized_experiment.assays.length){e.next=23;break}throw new Error("assay '"+r+"' not found");case 23:e.next=27;break;case 25:if(!(r>=t.summarized_experiment.assays.length)){e.next=27;break}throw new Error("assay "+String(r)+" out of range");case 27:return c=t.summarized_experiment.assays[r].resource.path,e.abrupt("return",R(c,n,a));case 29:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function R(e,t,r){return M.apply(this,arguments)}function M(){return(M=(0,d.Z)((0,o.Z)().mark((function e(t,r,n){var i,a,s,u,l,c,h,f,d,m,p;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.metadata(t);case 2:return i=e.sent,e.next=5,r.file(i.path);case 5:if(a=e.sent,u=i.$schema,l=u.startsWith("hdf5_dense_array/"),c=u.startsWith("hdf5_sparse_matrix/"),!l&&!c){e.next=15;break}h=c?i.hdf5_sparse_matrix.group:i.hdf5_dense_array.dataset,f=v.$H(a);try{s=v.EF(f.path,h,{forceInteger:n})}finally{f.flush()}e.next=31;break;case 15:if(!i.$schema.startsWith("hdf5_delayed_array/")){e.next=30;break}return d=v.$H(a),e.prev=17,m=new v.pT(d.path),p=m.open(i.hdf5_delayed_array.group),e.next=22,C(p,r);case 22:if(null!=(s=e.sent)){e.next=25;break}throw new Error("currently only supporting bakana-generated log-counts for delayed arrays");case 25:return e.prev=25,d.flush(),e.finish(25);case 28:e.next=31;break;case 30:throw new Error("array schema '"+i.$schema+"' is currently not supported");case 31:return e.abrupt("return",s);case 32:case"end":return e.stop()}}),e,null,[[17,,25,28]])})))).apply(this,arguments)}function N(e,t){return W.apply(this,arguments)}function W(){return(W=(0,d.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.metadata(t);case 2:if((n=e.sent).$schema.startsWith("json_simple_list/")){e.next=5;break}throw new Error("currently only support JSON-formatted lists in the 'other_data'");case 5:return e.next=7,r.file(n.path);case 7:return i=e.sent,a=new b.z(i,{name:"list.json"}),s=p.R(a.buffer(),{compression:"gzip"==n.json_simple_list.compression?"gz":"none"}),u=JSON.parse(s),e.abrupt("return",I(u));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){if(!("type"in e))throw new Error("non-standard JSON object for 'json_simple_list' schema");if("number"==e.type){if(e.values instanceof Array){var t=new Float64Array(e.values.length);return e.values.forEach((function(e,r){t[r]=null===e?Number.NaN:e})),t}return null==e.values?Number.NaN:e.values}if("integer"==e.type){if(e.values instanceof Array){var r=new Int32Array(e.values.length);return e.values.forEach((function(e,t){r[t]=null===e?-2147483648:e})),r}return e.values}if("boolean"==e.type||"string"==e.type)return e.values;if("list"==e.type){if("names"in e){for(var n={},i=0;i<e.values.length;i++)n[e.names[i]]=I(e.values[i]);return n}var a=[];for(i=0;i<e.values.length;i++)a.push(I(e.values[i]));return a}return"nothing"==e.type||console.warn("JSON simple list containing type '"+e.type+"' is not yet supported"),null}var z=new WeakMap,D=new WeakMap,F=function(){function e(t){(0,u.Z)(this,e),(0,c.Z)(this,z,{writable:!0,value:void 0}),(0,c.Z)(this,D,{writable:!0,value:void 0}),(0,f.Z)(this,z,t),(0,f.Z)(this,D,{})}return(0,l.Z)(e,[{key:"clear",value:function(){(0,f.Z)(this,D,{}),"clear"in(0,h.Z)(this,z)&&(0,h.Z)(this,z).clear()}},{key:"metadata",value:function(){var e=(0,d.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in(0,h.Z)(this,D))){e.next=4;break}return e.abrupt("return",(0,h.Z)(this,D)[t]);case 4:return e.next=6,(0,h.Z)(this,z).metadata(t);case 6:return r=e.sent,(0,h.Z)(this,D)[t]=r,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"file",value:function(e){return(0,h.Z)(this,z).file(e)}}]),e}(),j=new WeakMap,P=new WeakMap,T=new WeakMap,B=new WeakMap,L=new WeakMap,U=new WeakMap,Y=new WeakMap,q=new WeakMap,H=new WeakMap,G=new WeakMap,V=new WeakMap,$=new WeakMap,K=new WeakMap,J=new WeakSet,X=new WeakSet,Q=new WeakSet,ee=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.rnaCountAssay,o=void 0===i?0:i,l=n.adtCountAssay,h=void 0===l?0:l,d=n.crisprCountAssay,v=void 0===d?0:d,m=n.rnaExperiment,p=void 0===m?"":m,y=n.adtExperiment,b=void 0===y?"Antibody Capture":y,w=n.crisprExperiment,g=void 0===w?"CRISPR Guide Capture":w,_=n.primaryRnaFeatureIdColumn,Z=void 0===_?null:_,k=n.primaryAdtFeatureIdColumn,x=void 0===k?null:k,E=n.primaryCrisprFeatureIdColumn,C=void 0===E?null:E;(0,u.Z)(this,e),(0,a.Z)(this,Q),(0,a.Z)(this,X),(0,a.Z)(this,J),(0,c.Z)(this,j,{writable:!0,value:void 0}),(0,c.Z)(this,P,{writable:!0,value:void 0}),(0,c.Z)(this,T,{writable:!0,value:void 0}),(0,c.Z)(this,B,{writable:!0,value:void 0}),(0,c.Z)(this,L,{writable:!0,value:void 0}),(0,c.Z)(this,U,{writable:!0,value:void 0}),(0,c.Z)(this,Y,{writable:!0,value:void 0}),(0,c.Z)(this,q,{writable:!0,value:void 0}),(0,c.Z)(this,H,{writable:!0,value:void 0}),(0,c.Z)(this,G,{writable:!0,value:void 0}),(0,c.Z)(this,V,{writable:!0,value:void 0}),(0,c.Z)(this,$,{writable:!0,value:void 0}),(0,c.Z)(this,K,{writable:!0,value:void 0}),(0,f.Z)(this,j,t),(0,f.Z)(this,P,new F(r)),(0,f.Z)(this,L,o),(0,f.Z)(this,U,h),(0,f.Z)(this,Y,v),(0,f.Z)(this,q,p),(0,f.Z)(this,H,b),(0,f.Z)(this,G,g),(0,f.Z)(this,V,Z),(0,f.Z)(this,$,x),(0,f.Z)(this,K,C),(0,s.Z)(this,J,te).call(this)}return(0,l.Z)(e,[{key:"options",value:function(){return{rnaCountAssay:(0,h.Z)(this,L),adtCountAssay:(0,h.Z)(this,U),crisprCountAssay:(0,h.Z)(this,Y),rnaExperiment:(0,h.Z)(this,q),adtExperiment:(0,h.Z)(this,H),crisprExperiment:(0,h.Z)(this,G),primaryRnaFeatureIdColumn:(0,h.Z)(this,V),primaryAdtFeatureIdColumn:(0,h.Z)(this,$),primaryCrisprFeatureIdColumn:(0,h.Z)(this,K)}}},{key:"setRnaCountAssay",value:function(e){(0,f.Z)(this,L,e)}},{key:"setAdtCountAssay",value:function(e){(0,f.Z)(this,U,e)}},{key:"setCrisprCountAssay",value:function(e){(0,f.Z)(this,U,e)}},{key:"setRnaExperiment",value:function(e){(0,f.Z)(this,q,e)}},{key:"setAdtExperiment",value:function(e){(0,f.Z)(this,H,e)}},{key:"setCrisprExperiment",value:function(e){(0,f.Z)(this,G,e)}},{key:"setPrimaryRnaFeatureIdColumn",value:function(e){(0,f.Z)(this,V,e)}},{key:"setPrimaryAdtFeatureIdColumn",value:function(e){(0,f.Z)(this,$,e)}},{key:"setPrimaryCrisprFeatureIdColumn",value:function(e){(0,f.Z)(this,K,e)}},{key:"clear",value:function(){(0,s.Z)(this,J,te).call(this),(0,h.Z)(this,P).clear()}},{key:"summary",value:function(){var e=(0,d.Z)((0,o.Z)().mark((function e(){var t,r,n,i=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(i.length>0&&void 0!==i[0]?i[0]:{}).cache,r=void 0!==t&&t,e.next=3,(0,s.Z)(this,X,re).call(this);case 3:return e.next=5,(0,s.Z)(this,Q,ie).call(this);case 5:return e.t0=(0,h.Z)(this,T),e.t1=(0,h.Z)(this,B),e.next=9,x((0,h.Z)(this,j),(0,h.Z)(this,P));case 9:return e.t2=e.sent,n={modality_features:e.t0,cells:e.t1,modality_assay_names:e.t2},r||this.clear(),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,d.Z)((0,o.Z)().mark((function e(){var t,r,a,u,l,c,f,d,p,b,w,g,_,Z,k,x,E,C,O,A,R=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(R.length>0&&void 0!==R[0]?R[0]:{}).cache,r=void 0!==t&&t,e.next=3,(0,s.Z)(this,X,re).call(this);case 3:return e.next=5,(0,s.Z)(this,Q,ie).call(this);case 5:return a={matrix:new v.VU,row_ids:{},features:{},cells:(0,h.Z)(this,B)},u={RNA:{exp:(0,h.Z)(this,q),assay:(0,h.Z)(this,L)},ADT:{exp:(0,h.Z)(this,H),assay:(0,h.Z)(this,U)},CRISPR:{exp:(0,h.Z)(this,G),assay:(0,h.Z)(this,Y)}},e.next=9,(0,h.Z)(this,P).metadata((0,h.Z)(this,j));case 9:if(l=e.sent,c={},f=[],"single_cell_experiment"in l){f=l.single_cell_experiment.alternative_experiments,d=(0,i.Z)(f);try{for(d.s();!(p=d.n()).done;)b=p.value,c[b.name]=b.resource.path}catch(o){d.e(o)}finally{d.f()}}e.prev=13,w=0,g=Object.entries(u);case 15:if(!(w<g.length)){e.next=49;break}if(_=(0,n.Z)(g[w],2),Z=_[0],null!==(k=_[1]).exp){e.next=19;break}return e.abrupt("continue",46);case 19:if(x=null,E=k.exp,"string"!=typeof k.exp){e.next=33;break}if(""!==k.exp){e.next=26;break}x=l,e.next=31;break;case 26:if(k.exp in c){e.next=28;break}return e.abrupt("continue",46);case 28:return e.next=30,(0,h.Z)(this,P).metadata(c[k.exp]);case 30:x=e.sent;case 31:e.next=39;break;case 33:if(!(k.exp>=f.length)){e.next=35;break}return e.abrupt("continue",46);case 35:return E=f[k.exp].name,e.next=38,(0,h.Z)(this,P).metadata(f[k.exp].resource.path);case 38:x=e.sent;case 39:return e.next=41,S(x,k.assay,(0,h.Z)(this,P),!0);case 41:C=e.sent,a.matrix.add(Z,C.matrix),O=C.row_ids,a.row_ids[Z]=O,a.features[Z]=m.Nd((0,h.Z)(this,T)[E],O);case 46:w++,e.next=15;break;case 49:A={RNA:(0,h.Z)(this,V),ADT:(0,h.Z)(this,$),CRISPR:(0,h.Z)(this,K)},a.primary_ids=y.P2(a.features,A),e.next=57;break;case 53:throw e.prev=53,e.t0=e.catch(13),v.gd(a.matrix),e.t0;case 57:return r||this.clear(),e.abrupt("return",a);case 59:case"end":return e.stop()}}),e,this,[[13,53]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function te(){(0,f.Z)(this,T,null),(0,f.Z)(this,B,null)}function re(){return ne.apply(this,arguments)}function ne(){return(ne=(0,d.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(0,h.Z)(this,T)){e.next=2;break}return e.abrupt("return");case 2:return e.t0=f.Z,e.t1=this,e.t2=T,e.next=7,Z((0,h.Z)(this,j),(0,h.Z)(this,P));case 7:return e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ie(){return ae.apply(this,arguments)}function ae(){return(ae=(0,d.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(0,h.Z)(this,B)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,h.Z)(this,P).metadata((0,h.Z)(this,j));case 4:return t=e.sent,r=t.summarized_experiment.column_data.resource.path,e.t0=f.Z,e.t1=this,e.t2=B,e.next=11,w(r,(0,h.Z)(this,P));case 11:return e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.abrupt("return");case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var se=new WeakMap,oe=new WeakMap,ue=new WeakMap,le=new WeakMap,ce=new WeakMap,he=new WeakMap,fe=new WeakMap,de=new WeakMap,ve=new WeakSet,me=new WeakSet,pe=new WeakSet,ye=new WeakSet,be=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.primaryAssay,o=void 0===i?0:i,l=n.isPrimaryNormalized,h=void 0===l||l,d=n.reducedDimensionNames,v=void 0===d?null:d;(0,u.Z)(this,e),(0,a.Z)(this,ye),(0,a.Z)(this,pe),(0,a.Z)(this,me),(0,a.Z)(this,ve),(0,c.Z)(this,se,{writable:!0,value:void 0}),(0,c.Z)(this,oe,{writable:!0,value:void 0}),(0,c.Z)(this,ue,{writable:!0,value:void 0}),(0,c.Z)(this,le,{writable:!0,value:void 0}),(0,c.Z)(this,ce,{writable:!0,value:void 0}),(0,c.Z)(this,he,{writable:!0,value:void 0}),(0,c.Z)(this,fe,{writable:!0,value:void 0}),(0,c.Z)(this,de,{writable:!0,value:void 0}),(0,f.Z)(this,se,t),(0,f.Z)(this,oe,new F(r)),(0,f.Z)(this,he,m.bl(o)),(0,f.Z)(this,fe,m.bl(h)),(0,f.Z)(this,de,m.bl(v)),(0,s.Z)(this,ve,we).call(this)}return(0,l.Z)(e,[{key:"setPrimaryAssay",value:function(e){(0,f.Z)(this,he,m.bl(e))}},{key:"setIsPrimaryNormalized",value:function(e){(0,f.Z)(this,fe,m.bl(e))}},{key:"setReducedDimensionNames",value:function(e){(0,f.Z)(this,de,m.bl(e))}},{key:"clear",value:function(){(0,s.Z)(this,ve,we).call(this),(0,h.Z)(this,oe).clear()}},{key:"summary",value:function(){var e=(0,d.Z)((0,o.Z)().mark((function e(){var t,r,n,a,u,l,c,f,d=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(d.length>0&&void 0!==d[0]?d[0]:{}).cache,r=void 0!==t&&t,e.next=3,(0,s.Z)(this,me,ge).call(this);case 3:return e.next=5,(0,s.Z)(this,pe,Ze).call(this);case 5:return e.next=7,(0,s.Z)(this,ye,xe).call(this);case 7:return e.t0=(0,h.Z)(this,ue),e.t1=(0,h.Z)(this,le),e.next=11,x((0,h.Z)(this,se),(0,h.Z)(this,oe));case 11:return e.t2=e.sent,e.t3=[],e.t4=(0,h.Z)(this,ce),n={modality_features:e.t0,cells:e.t1,modality_assay_names:e.t2,reduced_dimension_names:e.t3,other_metadata:e.t4},e.next=17,(0,h.Z)(this,oe).metadata((0,h.Z)(this,se));case 17:if(!("single_cell_experiment"in(a=e.sent))){e.next=38;break}u=(0,i.Z)(a.single_cell_experiment.reduced_dimensions),e.prev=20,u.s();case 22:if((l=u.n()).done){e.next=30;break}return c=l.value,e.next=26,(0,h.Z)(this,oe).metadata(c.resource.path);case 26:(f=e.sent).$schema.startsWith("hdf5_dense_array/")&&2==f.array.dimensions.length&&n.reduced_dimension_names.push(c.name);case 28:e.next=22;break;case 30:e.next=35;break;case 32:e.prev=32,e.t5=e.catch(20),u.e(e.t5);case 35:return e.prev=35,u.f(),e.finish(35);case 38:return r||this.clear(),e.abrupt("return",n);case 40:case"end":return e.stop()}}),e,this,[[20,32,35,38]])})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,d.Z)((0,o.Z)().mark((function e(){var t,r,a,u,l,c,f,d,p,y,b,w,g,_,Z,k,x,E,C,O,A,R,M,N,W,I,z,D,F,j,P,T,B,L,U,Y,q,H=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(H.length>0&&void 0!==H[0]?H[0]:{}).cache,r=void 0!==t&&t,e.next=3,(0,s.Z)(this,me,ge).call(this);case 3:return e.next=5,(0,s.Z)(this,pe,Ze).call(this);case 5:return e.next=7,(0,s.Z)(this,ye,xe).call(this);case 7:return e.next=9,(0,h.Z)(this,oe).metadata((0,h.Z)(this,se));case 9:if(a=e.sent,u={matrix:new v.VU,features:{},cells:(0,h.Z)(this,le),reduced_dimensions:{},other_metadata:(0,h.Z)(this,ce)},null==(l=(0,h.Z)(this,de))&&(l=[],"single_cell_experiment"in a)){c=(0,i.Z)(a.single_cell_experiment.reduced_dimensions);try{for(c.s();!(f=c.n()).done;)d=f.value,l.push(d.name)}catch(o){c.e(o)}finally{c.f()}}if(!(l.length>0)){e.next=43;break}p={},y=(0,i.Z)(a.single_cell_experiment.reduced_dimensions);try{for(y.s();!(b=y.n()).done;)w=b.value,p[w.name]=w.resource.path}catch(o){y.e(o)}finally{y.f()}g=(0,i.Z)(l),e.prev=18,g.s();case 20:if((_=g.n()).done){e.next=35;break}return Z=_.value,e.next=24,(0,h.Z)(this,oe).metadata(p[Z]);case 24:return k=e.sent,x=k.array.dimensions,e.next=28,(0,h.Z)(this,oe).file(k.path);case 28:E=e.sent,C=v.$H(E),O=[];try{for(A=new v.pT(C.path),R=A.open(k.hdf5_dense_array.dataset,{load:!0}),M=R.values,N=0;N<x[1];N++)O.push(M.slice(N*x[0],(N+1)*x[0]))}finally{C.flush()}u.reduced_dimensions[Z]=O;case 33:e.next=20;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(18),g.e(e.t0);case 40:return e.prev=40,g.f(),e.finish(40);case 43:if(W={},"single_cell_experiment"in a){I=(0,i.Z)(a.single_cell_experiment.alternative_experiments);try{for(I.s();!(z=I.n()).done;)D=z.value,W[D.name]=D.resource.path}catch(o){I.e(o)}finally{I.f()}}e.prev=45,F=0,j=Object.entries((0,h.Z)(this,ue));case 47:if(!(F<j.length)){e.next=75;break}if(P=(0,n.Z)(j[F],2),T=P[0],P[1],"object"!=typeof(B=(0,h.Z)(this,he))){e.next=56;break}if(!(T in B)){e.next=55;break}B=B[T],e.next=56;break;case 55:return e.abrupt("continue",72);case 56:if("object"==typeof(L=(0,h.Z)(this,fe))&&(L=!(T in L)||L[T]),U=void 0,""!==T){e.next=63;break}U=a,e.next=66;break;case 63:return e.next=65,(0,h.Z)(this,oe).metadata(W[T]);case 65:U=e.sent;case 66:return e.next=68,S(U,B,(0,h.Z)(this,oe),!L);case 68:Y=e.sent,u.matrix.add(T,Y.matrix),L||(q=v.gk(Y.matrix,{allowZeros:!0}),u.matrix.add(T,q)),null!==Y.row_ids?u.features[T]=m.Nd((0,h.Z)(this,ue)[T],Y.row_ids):u.features[T]=(0,h.Z)(this,ue)[T];case 72:F++,e.next=47;break;case 75:e.next=81;break;case 77:throw e.prev=77,e.t1=e.catch(45),v.gd(u.matrix),e.t1;case 81:return r||this.clear(),e.abrupt("return",u);case 83:case"end":return e.stop()}}),e,this,[[18,37,40,43],[45,77]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function we(){(0,f.Z)(this,ue,null),(0,f.Z)(this,le,null),(0,f.Z)(this,ce,null)}function ge(){return _e.apply(this,arguments)}function _e(){return(_e=(0,d.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(0,h.Z)(this,ue)){e.next=2;break}return e.abrupt("return");case 2:return e.t0=f.Z,e.t1=this,e.t2=ue,e.next=7,Z((0,h.Z)(this,se),(0,h.Z)(this,oe));case 7:return e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ze(){return ke.apply(this,arguments)}function ke(){return(ke=(0,d.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(0,h.Z)(this,le)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,h.Z)(this,oe).metadata((0,h.Z)(this,se));case 4:return t=e.sent,r=t.summarized_experiment.column_data.resource.path,e.t0=f.Z,e.t1=this,e.t2=le,e.next=11,w(r,(0,h.Z)(this,oe));case 11:return e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.abrupt("return");case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function xe(){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,d.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(0,h.Z)(this,ce)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,h.Z)(this,oe).metadata((0,h.Z)(this,se));case 4:if(!("other_data"in(t=e.sent).summarized_experiment)){e.next=16;break}return r=t.summarized_experiment.other_data.resource.path,e.t0=f.Z,e.t1=this,e.t2=ce,e.next=12,N(r,(0,h.Z)(this,oe));case 12:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.next=17;break;case 16:(0,f.Z)(this,ce,{});case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},2121:function(e,t,r){"use strict";var n=r(7326),i=r(136),a=r(9388),s=r(8652),o=r(3889),u=r(4165),l=r(5861),c=r(5671),h=r(3144),f=r(2346),d=r(8916),v=r(2793),m=r(5173),p=r(5587),y=new WeakMap,b=new WeakMap,w=function(){function e(t,r){(0,c.Z)(this,e),(0,f.Z)(this,y,{writable:!0,value:void 0}),(0,f.Z)(this,b,{writable:!0,value:void 0}),(0,v.Z)(this,y,t),(0,v.Z)(this,b,null)}return(0,h.Z)(e,[{key:"file",value:function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(0,d.Z)(this,b)){e.next=8;break}return e.t0=v.Z,e.t1=this,e.t2=b,e.next=6,p.loadAsync((0,d.Z)(this,y).buffer());case 6:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3);case 8:return e.next=10,(0,d.Z)(this,b).file(t).async("uint8array");case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"metadata",value:function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t){var r,n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(0,d.Z)(this,b)){e.next=8;break}return e.t0=v.Z,e.t1=this,e.t2=b,e.next=6,p.loadAsync((0,d.Z)(this,y).buffer());case 6:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3);case 8:return t.endsWith(".json")||(t+=".json"),e.next=12,(0,d.Z)(this,b).file(t).async("string");case 12:if(r=e.sent,!(n=JSON.parse(r)).$schema.startsWith("redirection/")){e.next=18;break}t=n.redirection.targets[0].location,e.next=19;break;case 18:return e.abrupt("return",n);case 19:e.next=8;break;case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){(0,v.Z)(this,b,null)}}]),e}(),g=new WeakMap,_=new WeakMap,Z=new WeakSet;m.GY;function k(e){var t=[{type:"zip",file:e((0,d.Z)(this,g))}],r=this.options();return r.datasetName=(0,d.Z)(this,_),{files:t,options:r}}m.Ne},6016:function(e,t,r){"use strict";r.d(t,{z:function(){return f}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=new WeakMap,l=new WeakMap,c=new WeakMap,h=new WeakMap,f=function(){function e(t){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).name,i=void 0===r?null:r;if((0,n.Z)(this,e),(0,a.Z)(this,u,{writable:!0,value:void 0}),(0,a.Z)(this,l,{writable:!0,value:void 0}),(0,a.Z)(this,c,{writable:!0,value:void 0}),(0,a.Z)(this,h,{writable:!0,value:void 0}),t instanceof File)(0,o.Z)(this,u,"file"),(0,o.Z)(this,c,t),null===i&&(i=t.name),(0,o.Z)(this,h,i);else{if(!(t instanceof Uint8Array))throw new Error("unknown type '"+typeof t+"' for SimpleFile constructor");if((0,o.Z)(this,u,"buffer"),(0,o.Z)(this,l,t),null===i)throw new Error("'name' must be provided for Uint8Array inputs in SimpleFile constructor");(0,o.Z)(this,h,i)}}return(0,i.Z)(e,[{key:"buffer",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0!==e&&e;if("file"==(0,s.Z)(this,u)){var r=(new FileReaderSync).readAsArrayBuffer((0,s.Z)(this,c));return new Uint8Array(r)}return t?(0,s.Z)(this,l).slice():(0,s.Z)(this,l)}},{key:"size",value:function(){return"file"==(0,s.Z)(this,u)?(0,s.Z)(this,c).size:(0,s.Z)(this,l).length}},{key:"name",value:function(){return(0,s.Z)(this,h)}},{key:"content",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0!==e&&e;return this.buffer({copy:t})}}]),e}()},7355:function(e,t,r){"use strict";r.d(t,{e:function(){return z}});var n=r(3324),i=r(7762),a=r(4165),s=r(5861),o=r(5671),u=r(3144),l=r(8652),c=r(2346),h=r(3889),f=r(2793),d=r(8916),v=r(5831),m=r(7462),p=r(6016),y=r(7173),b=r(3121),w=new WeakMap,g=new WeakMap,_=new WeakMap,Z=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakMap,C=new WeakMap,O=new WeakMap,S=new WeakMap,A=new WeakMap,R=new WeakMap,M=new WeakSet,N=new WeakSet,W=new WeakSet,I=new WeakSet,z=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.featureTypeRnaName,s=void 0===a?"Gene Expression":a,u=i.featureTypeAdtName,h=void 0===u?"Antibody Capture":u,d=i.featureTypeCrisprName,v=void 0===d?"CRISPR Guide Capture":d,m=i.primaryRnaFeatureIdColumn,y=void 0===m?0:m,b=i.primaryAdtFeatureIdColumn,z=void 0===b?0:b,D=i.primaryCrisprFeatureIdColumn,F=void 0===D?0:D;(0,o.Z)(this,e),(0,l.Z)(this,I),(0,l.Z)(this,W),(0,l.Z)(this,N),(0,l.Z)(this,M),(0,c.Z)(this,w,{writable:!0,value:void 0}),(0,c.Z)(this,g,{writable:!0,value:void 0}),(0,c.Z)(this,_,{writable:!0,value:void 0}),(0,c.Z)(this,Z,{writable:!0,value:void 0}),(0,c.Z)(this,k,{writable:!0,value:void 0}),(0,c.Z)(this,x,{writable:!0,value:void 0}),(0,c.Z)(this,E,{writable:!0,value:void 0}),(0,c.Z)(this,C,{writable:!0,value:void 0}),(0,c.Z)(this,O,{writable:!0,value:void 0}),(0,c.Z)(this,S,{writable:!0,value:void 0}),(0,c.Z)(this,A,{writable:!0,value:void 0}),(0,c.Z)(this,R,{writable:!0,value:void 0}),t instanceof p.z?(0,f.Z)(this,w,t):(0,f.Z)(this,w,new p.z(t)),r instanceof p.z||null==r?(0,f.Z)(this,g,r):(0,f.Z)(this,g,new p.z(r)),n instanceof p.z||null==n?(0,f.Z)(this,_,n):(0,f.Z)(this,_,new p.z(n)),(0,f.Z)(this,E,s),(0,f.Z)(this,C,h),(0,f.Z)(this,O,v),(0,f.Z)(this,S,y),(0,f.Z)(this,A,z),(0,f.Z)(this,R,F),this.clear()}return(0,u.Z)(e,[{key:"setFeatureTypeRnaName",value:function(e){(0,f.Z)(this,E,e)}},{key:"setFeatureTypeAdtName",value:function(e){(0,f.Z)(this,C,e)}},{key:"setFeatureTypeCrisprName",value:function(e){(0,f.Z)(this,O,e)}},{key:"setPrimaryRnaFeatureIdColumn",value:function(e){(0,f.Z)(this,S,e)}},{key:"setPrimaryAdtFeatureIdColumn",value:function(e){(0,f.Z)(this,A,e)}},{key:"setPrimaryCrisprFeatureIdColumn",value:function(e){(0,f.Z)(this,R,e)}},{key:"clear",value:function(){(0,f.Z)(this,Z,null),(0,f.Z)(this,k,null),(0,f.Z)(this,x,null)}},{key:"abbreviate",value:function(e){return(0,h.Z)(this,M,D).call(this,(function(e){return{name:e.name(),size:e.size()}}))}},{key:"summary",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,n,i=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(i.length>0&&void 0!==i[0]?i[0]:{}).cache,r=void 0!==t&&t,e.next=3,(0,h.Z)(this,W,j).call(this);case 3:return e.next=5,(0,h.Z)(this,I,T).call(this);case 5:return n={modality_features:b.LR((0,d.Z)(this,k),"type"),cells:(0,d.Z)(this,x)},r||this.clear(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,n,i,s,o,u,l=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(l.length>0&&void 0!==l[0]?l[0]:{}).cache,r=void 0!==t&&t,e.next=3,(0,h.Z)(this,W,j).call(this);case 3:return e.next=5,(0,h.Z)(this,I,T).call(this);case 5:return n=(0,d.Z)(this,w).name().endsWith(".gz"),i=v._3((0,d.Z)(this,w).content(),{compressed:n}),s={RNA:(0,d.Z)(this,E),ADT:(0,d.Z)(this,C),CRISPR:(0,d.Z)(this,O)},(o=b.Bs(i,(0,d.Z)(this,k),"type",s,"RNA")).cells=(0,d.Z)(this,x),u={RNA:(0,d.Z)(this,S),ADT:(0,d.Z)(this,A),CRISPR:(0,d.Z)(this,R)},o.primary_ids=b.P2(o.features,u),r||this.clear(),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialize",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.Z)(this,M,D).call(this,(function(e){return e})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"format",value:function(){return"MatrixMarket"}},{key:"unserialize",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r,n){var s,o,u,l,c,h;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s={},o=(0,i.Z)(r),t.prev=2,o.s();case 4:if((u=o.n()).done){t.next=11;break}if(!((l=u.value).type in s)){t.next=8;break}throw new Error("duplicate file of type '"+l.type+"' detected during MatrixMarket unserialization");case 8:s[l.type]=l.file;case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),o.e(t.t0);case 16:return t.prev=16,o.f(),t.finish(16);case 19:if("mtx"in s){t.next=21;break}throw new Error("expected file of type 'mtx' for during MatrixMarket unserialization");case 21:return c=null,"genes"in s&&(c=s.genes),h=null,"annotations"in s&&(h=s.annotations),t.abrupt("return",new e(s.mtx,c,h,n));case 26:case"end":return t.stop()}}),t,null,[[2,13,16,19]])})));return function(e,r){return t.apply(this,arguments)}}()}]),e}();function D(e){var t=[{type:"mtx",file:e((0,d.Z)(this,w))}];return null!==(0,d.Z)(this,g)&&t.push({type:"genes",file:e((0,d.Z)(this,g))}),null!==(0,d.Z)(this,_)&&t.push({type:"annotations",file:e((0,d.Z)(this,_))}),{files:t,options:{featureTypeRnaName:(0,d.Z)(this,E),featureTypeAdtName:(0,d.Z)(this,C),featureTypeCrisprName:(0,d.Z)(this,O),primaryRnaFeatureIdColumn:(0,d.Z)(this,S),primaryAdtFeatureIdColumn:(0,d.Z)(this,A),primaryCrisprFeatureIdColumn:(0,d.Z)(this,R)}}}function F(){if(null===(0,d.Z)(this,Z)){var e=(0,d.Z)(this,w).name().endsWith(".gz"),t=v.us((0,d.Z)(this,w).content(),{compressed:e});(0,f.Z)(this,Z,[t.rows,t.columns])}}function j(){return P.apply(this,arguments)}function P(){return(P=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,n,i,s,o,u,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(0,d.Z)(this,k)){e.next=2;break}return e.abrupt("return");case 2:if((0,h.Z)(this,N,F).call(this),t=(0,d.Z)(this,Z)[0],null!=(0,d.Z)(this,g)){e.next=7;break}return(0,f.Z)(this,k,new m.NE({},{numberOfRows:t})),e.abrupt("return");case 7:return r=(0,d.Z)(this,g).name(),n=r.endsWith(".gz"),e.next=11,y.Lm((0,d.Z)(this,g).content(),{compression:n?"gz":"none"});case 11:if((i=e.sent).length!=t+1){e.next=18;break}return s={},i.shift().forEach((function(e,t){s[e]=i.map((function(e){return e[t]}))})),(0,f.Z)(this,k,s),e.abrupt("return");case 18:if(i.length===t){e.next=20;break}throw new Error("number of matrix rows is not equal to the number of rows in '"+r+"'");case 20:return o=[],u=[],i.forEach((function(e){o.push(e[0]),u.push(e[1])})),(l=new m.NE({},{numberOfRows:t})).$setColumn("id",o),l.$setColumn("name",u),i[0].length>2&&(c=[],i.forEach((function(e){c.push(e[2])})),l.$setColumn("type",c)),(0,f.Z)(this,k,l),e.abrupt("return");case 28:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function T(){return B.apply(this,arguments)}function B(){return(B=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,i,s,o,u,l,c,v,p,b,w;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(0,d.Z)(this,x)){e.next=2;break}return e.abrupt("return");case 2:if((0,h.Z)(this,N,F).call(this),null!=(0,d.Z)(this,_)){e.next=6;break}return(0,f.Z)(this,x,new m.NE({},{numberOfRows:(0,d.Z)(this,Z)[1]})),e.abrupt("return");case 6:return t=(0,d.Z)(this,_).name(),r=t.endsWith(".gz"),e.next=10,y.Lm((0,d.Z)(this,_).content(),{compression:r?"gz":"none"});case 10:if(i=e.sent,0!=(s=(0,d.Z)(this,Z)[1]-i.length)){e.next=16;break}o=i[0],e.next=21;break;case 16:if(-1!=s){e.next=20;break}o=i.shift(),e.next=21;break;case 20:throw new Error("number of matrix columns is not equal to the number of rows in '"+t+"'");case 21:for(u={},o.forEach((function(e,t){u[e]=i.map((function(e){return e[t]}))})),l=0,c=Object.entries(u);l<c.length;l++)v=(0,n.Z)(c[l],2),p=v[0],b=v[1],null!==(w=y.id(b))&&(u[p]=w);return(0,f.Z)(this,x,new m.NE(u)),e.abrupt("return");case 26:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},7173:function(e,t,r){"use strict";r.d(t,{vp:function(){return h},id:function(){return Z},bw:function(){return b},Lm:function(){return g},Qr:function(){return f},R:function(){return v}});var n=r(4165),i=r(3324),a=r(5861),s=r(7762),o=r(714),u=r(1025);function l(e,t,r,n,i){i("no support for file paths in the browser context")}var c=r(6016);function h(e,t){if(!(t in e.children))return null;if("DataSet"!==e.children[t])return null;var r=e.open(t);return"String"!==r.type?null:r.load()}function f(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).limit,r=void 0===t?50:t;if(e instanceof Array){var n=Array.from(new Set(e));n.sort();var i=!1;return n.length>r&&(n=n.slice(0,r),i=!0),{type:"categorical",values:n,truncated:i}}var a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.forEach((function(e){e<a&&(a=e),e>s&&(s=e)})),{type:"continuous",min:a,max:s}}function d(e,t){return null!==t?t:(r=e instanceof Uint8Array?e:function(e,t){throw new Error("no support for file paths in the browser context")}()).length>=3&&31==r[0]&&139==r[1]&&8==r[2]?"gz":"none";var r}function v(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).compression,r=void 0===t?null:t,n="gz"===(r=d(e,r))?o.ec(e):e;return(new TextDecoder).decode(n)}function m(e,t){var r,n=0,i=(0,s.Z)(e);try{for(i.s();!(r=i.n()).done;){n+=r.value.length}}catch(c){i.e(c)}finally{i.f()}var a=new Uint8Array(n);n=0;var o,u=(0,s.Z)(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;a.set(l,n),n+=l.length}}catch(c){u.e(c)}finally{u.f()}return t.decode(a)}function p(e,t,r,n){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)((0,n.Z)().mark((function e(t,r,i,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Uint8Array||(t=t instanceof c.z?t.content():new c.z(t,{name:"dummy"}).content()),"gz"!=d(t,r)){e.next=5;break}return e.next=4,new Promise((function(e,r){var n=new o.T_({chunkSize:i});n.onData=a,n.onEnd=function(t){t?r("gzip decompression failed; "+n.msg):e(null)},"string"==typeof t?l(0,0,0,0,r):n.push(t)}));case 4:case 8:return e.abrupt("return");case 5:if("string"!=typeof t){e.next=9;break}return e.next=8,new Promise((function(e,t){return l(0,0,0,0,t)}));case 9:return a(t),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return w=(0,a.Z)((0,n.Z)().mark((function e(t){var r,i,a,s,o,u,l,c,h,f=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(r=f.length>1&&void 0!==f[1]?f[1]:{}).compression,a=void 0===i?null:i,s=r.chunkSize,o=void 0===s?65536:s,u=new TextDecoder,l=[],c=[],h=function(e){for(var t=0,r=0;r<e.length;r++)if(10==e[r]){var n=e.subarray(t,r);l.length?(l.push(n),c.push(m(l,u)),l=[]):c.push(u.decode(n)),t=r+1}t!=e.length&&l.push(e.slice(t))},e.next=7,p(t,a,o,h);case 7:return l.length&&c.push(m(l,u)),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function g(e){return _.apply(this,arguments)}function _(){return _=(0,a.Z)((0,n.Z)().mark((function e(t){var r,i,a,o,l,c,h,f,d,v,y,b,w,g,_=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(r=_.length>1&&void 0!==_[1]?_[1]:{}).compression,a=void 0===i?null:i,o=r.delim,l=void 0===o?"\t":o,c=r.chunkSize,h=void 0===c?1048576:c,f=new TextDecoder,d=[],v=function(e){var t=u.parse(e,{delimiter:l});if(t.meta.aborted){var r,n="failed to parse delimited file",i=(0,s.Z)(t.errors);try{for(i.s();!(r=i.n()).done;){n+="; "+r.value.message}}catch(h){i.e(h)}finally{i.f()}throw new Error(n)}var a,o=(0,s.Z)(t.data);try{for(o.s();!(a=o.n()).done;){var c=a.value;d.push(c)}}catch(h){o.e(h)}finally{o.f()}},y=[],b=0,w=function(e){for(var t=0,r=0;r<e.length;r++)if(10==e[r]&&r-t+b>=h){var n=e.subarray(t,r);y.length?(y.push(n),v(m(y,f)),y=[]):v(f.decode(n)),t=r+1,b=0}t!=e.length&&(y.push(e.slice(t)),b+=e.length-t)},e.next=9,p(t,a,h,w);case 9:return y.length&&(g=m(y,f),v(g),"\n"==g[g.length-1]&&d.pop()),e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function Z(e){for(var t=new Float64Array(e.length),r=0,n=Object.entries(e);r<n.length;r++){var a=(0,i.Z)(n[r],2),s=a[0],o=a[1],u=Number(o),l=parseFloat(o);if(isNaN(u)||isNaN(l))if(""===o||"NA"===o||"na"==o||"NaN"==o||"nan"==o)t[s]=NaN;else if("Inf"==o||"inf"==o)t[s]=Number.POSITIVE_INFINITY;else{if("-Inf"!=o&&"-inf"!=o)return null;t[s]=Number.NEGATIVE_INFINITY}else t[s]=u}return t}},3121:function(e,t,r){"use strict";r.d(t,{Bs:function(){return u},LR:function(){return o},P2:function(){return l}});var n=r(3324),i=r(5831),a=r(7462);function s(e,t){var r={};return r[t]=e,r}function o(e,t){if(e.hasColumn(t)){var r=a.Lm(e.column(t)),n=a.bl(e,{deepCopy:!1});return n.$removeColumn(t),a.Tm(n,r)}return s(e,"")}function u(e,t,r,o,u){var l={matrix:new i.VU};try{var c,h=e.matrix,f=e.row_ids;if(l.matrix.add("",h),null!==f?c=a.Nd(t,f):(c=a.bl(t,{deepCopy:!1}),(f=new Int32Array(h.numberOfRows())).forEach((function(e,t){f[t]=t}))),null!==r&&c.hasColumn(r)){var d=a.Lm(c.column(r));if(null!==o){for(var v={},m=0,p=Object.entries(o);m<p.length;m++){var y=(0,n.Z)(p[m],2),b=y[0],w=y[1];null!==w&&w in d&&(v[b]=d[w])}d=v}var g=Object.keys(d),_=function(e,t){if(e.length!=t)return!1;for(var r=0;r<t;r++)if(r!==e[r])return!1;return!0}(g[0],h.numberOfRows());if(g.length>1||!_){var Z=new i.VU({store:i.vc(h,d)});i.gd(l.matrix),l.matrix=Z}else l.matrix.rename("",g[0]);delete c[r],l.features=a.Tm(c,d),l.row_ids=a.Tm(f,d)}else l.matrix.rename("",u),l.row_ids=s(f,u),l.features=s(c,u)}catch(k){throw i.gd(l.matrix),k}return l}function l(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];if(!(a in t))throw new Error("modality '"+a+"' has no primary key identifier");var s=e[a],o=t[a];"string"==typeof o&&s.hasColumn(o)||"number"==typeof o&&o<s.numberOfColumns()?r[a]=s.column(o):r[a]=s.rowNames()}return r}},6269:function(e,t,r){"use strict";function n(){return new Worker(new URL(r.p+r.u(484),r.b),{type:void 0})}function i(){return new Worker(new URL(r.p+r.u(933),r.b),{type:void 0})}r.d(t,{k:function(){return n},u:function(){return i}})},8366:function(e,t,r){"use strict";r.d(t,{Cy:function(){return p},m5:function(){return Z}});var n=r(1413),i=r(5671),a=r(3144),s=r(8652),o=r(2346),u=r(3889),l=r(8916),c=r(2793),h=r(5831),f=r(7891),d=r(569),v=r(9873),m=r(2269),p="adt_normalization",y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,_=new WeakSet,Z=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,_),(0,o.Z)(this,y,{writable:!0,value:void 0}),(0,o.Z)(this,b,{writable:!0,value:void 0}),(0,o.Z)(this,w,{writable:!0,value:void 0}),(0,o.Z)(this,g,{writable:!0,value:void 0}),!(t instanceof v.fA))throw new Error("'qc' should be a AdtQualityControlState object");if((0,c.Z)(this,y,t),!(r instanceof m.H0))throw new Error("'filter' should be a CellFilteringState object");(0,c.Z)(this,b,r),(0,c.Z)(this,w,null===n?{}:n),(0,c.Z)(this,g,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){f.Yl((0,l.Z)(this,g).matrix),f.Yl((0,l.Z)(this,g).total_buffer),f.Yl((0,l.Z)(this,g).sf_buffer),f.Yl((0,l.Z)(this,g).centered_sf_buffer)}},{key:"valid",value:function(){return(0,l.Z)(this,b).fetchFilteredMatrix().has("ADT")}},{key:"fetchNormalizedMatrix",value:function(){return"matrix"in(0,l.Z)(this,g)||(0,u.Z)(this,_,k).call(this),(0,l.Z)(this,g).matrix}},{key:"fetchSizeFactors",value:function(){var e;return(0,l.Z)(this,g).sf_buffer&&(e=f.rS((0,l.Z)(this,g).sf_buffer.length,"Float64Array",(0,l.Z)(this,g),"centered_sf_buffer"),h.v_((0,l.Z)(this,g).sf_buffer,{buffer:e,block:(0,l.Z)(this,b).fetchFilteredBlock()})),e}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,l.Z)(this,w))}},{key:"compute",value:function(e){var t=e.num_pcs,r=e.num_clusters,n=!0;if("remove_bias"in e&&(n=e.remove_bias),this.changed=!1,((0,l.Z)(this,y).changed||(0,l.Z)(this,b).changed||n!==(0,l.Z)(this,w).remove_bias||n&&(t!==(0,l.Z)(this,w).num_pcs||r!=(0,l.Z)(this,w).num_clusters))&&this.valid()){var i=(0,l.Z)(this,b).fetchFilteredMatrix().get("ADT"),a=d.e((0,l.Z)(this,y),(0,l.Z)(this,b),i,(0,l.Z)(this,g),"total_buffer"),s=(0,l.Z)(this,b).fetchFilteredBlock(),o=f.rS(i.numberOfColumns(),"Float64Array",(0,l.Z)(this,g),"sf_buffer");n?h.Cb(i,{totals:a,block:s,buffer:o,numberOfPCs:t,numberOfClusters:r}):h.v_(a,{buffer:o,block:s}),this.changed=!0}(0,l.Z)(this,w).remove_bias=n,(0,l.Z)(this,w).num_pcs=t,(0,l.Z)(this,w).num_clusters=r,this.changed&&this.valid()&&(0,u.Z)(this,_,k).call(this)}}],[{key:"defaults",value:function(){return{remove_bias:!0,num_pcs:25,num_clusters:20}}}]),e}();function k(){var e=(0,l.Z)(this,b).fetchFilteredMatrix().get("ADT"),t=(0,l.Z)(this,b).fetchFilteredBlock(),r=(0,l.Z)(this,g).sf_buffer;if(r.length!=e.numberOfColumns())throw new Error("length of size factor vector should equal number of columns after QC");f.Yl((0,l.Z)(this,g).matrix),(0,l.Z)(this,g).matrix=h.gk(e,{sizeFactors:r,block:t,allowZeros:!0})}},7188:function(e,t,r){"use strict";r.d(t,{Cy:function(){return d},Ru:function(){return b}});var n=r(1413),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=r(5831),c=r(7891),h=r(2269),f=r(8366),d="adt_pca",v=new WeakMap,m=new WeakMap,p=new WeakMap,y=new WeakMap,b=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,v,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,y,{writable:!0,value:void 0}),!(t instanceof h.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,u.Z)(this,v,t),!(r instanceof f.m5))throw new Error("'norm' should be a AdtNormalizationState object");(0,u.Z)(this,m,r),(0,u.Z)(this,y,null===n?{}:n),(0,u.Z)(this,p,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){c.Yl((0,o.Z)(this,p).pcs)}},{key:"valid",value:function(){return(0,o.Z)(this,m).valid()}},{key:"fetchPCs",value:function(){return(0,o.Z)(this,p).pcs}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,o.Z)(this,y))}},{key:"compute",value:function(e){var t=e.num_pcs,r=e.block_method;if(this.changed=!1,(0,o.Z)(this,m).changed||t!==(0,o.Z)(this,y).num_pcs||r!==(0,o.Z)(this,y).block_method){if(this.valid()){var n=(0,o.Z)(this,v).fetchFilteredBlock(),i=(0,o.Z)(this,m).fetchNormalizedMatrix();c.Yl((0,o.Z)(this,p).pcs),(0,o.Z)(this,p).pcs=l.aG(i,{numberOfPCs:t,block:n,blockMethod:r}),this.changed=!0}(0,o.Z)(this,y).num_pcs=t,(0,o.Z)(this,y).block_method=r}}}],[{key:"defaults",value:function(){return{num_pcs:20,block_method:"none"}}}]),e}()},9873:function(e,t,r){"use strict";r.d(t,{Cy:function(){return d},fA:function(){return y}});var n=r(7762),i=r(1413),a=r(5671),s=r(3144),o=r(2346),u=r(8916),l=r(2793),c=r(5831),h=r(7891),f=r(6546),d="adt_quality_control",v=new WeakMap,m=new WeakMap,p=new WeakMap,y=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,a.Z)(this,e),(0,o.Z)(this,v,{writable:!0,value:void 0}),(0,o.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,p,{writable:!0,value:void 0}),!(t instanceof f.tq))throw new Error("'inputs' should be a State object from './inputs.js'");(0,l.Z)(this,v,t),(0,l.Z)(this,p,null===r?{}:r),(0,l.Z)(this,m,null===n?{}:n),this.changed=!1}return(0,s.Z)(e,[{key:"free",value:function(){h.Yl((0,u.Z)(this,m).metrics),h.Yl((0,u.Z)(this,m).filters),h.Yl((0,u.Z)(this,m).metrics_buffer),h.Yl((0,u.Z)(this,m).discard_buffer)}},{key:"valid",value:function(){return(0,u.Z)(this,v).fetchCountMatrix().has("ADT")}},{key:"fetchParameters",value:function(){return(0,i.Z)({},(0,u.Z)(this,p))}},{key:"fetchFilters",value:function(){return(0,u.Z)(this,m).filters}},{key:"fetchDiscards",value:function(){return(0,u.Z)(this,m).discard_buffer}},{key:"fetchMetrics",value:function(){return(0,u.Z)(this,m).metrics}},{key:"compute",value:function(t){var r,n,i=t.igg_prefix,a=t.nmads,s=t.min_detected_drop;if(this.changed=!1,"automatic"in t?(r=t.automatic,n=t.tag_id_column):(r=!0,n=null),(0,u.Z)(this,v).changed||r!==(0,u.Z)(this,p).automatic||i!==(0,u.Z)(this,p).igg_prefix||!r&&n!==(0,u.Z)(this,p).tag_id_column)if(h.Yl((0,u.Z)(this,m).metrics),this.valid()){var o=(0,u.Z)(this,v).fetchFeatureAnnotations().ADT,l=h.rS(o.numberOfRows(),"Uint8Array",(0,u.Z)(this,m),"metrics_buffer");if(l.fill(0),null!==i){var f=i.toLowerCase(),d=n;r&&(d=e.configureFeatureParameters(f,o));var y=null==d?o.rowNames():o.column(d);if(null!==y){var b=l.array();y.forEach((function(e,t){e.toLowerCase().startsWith(f)&&(b[t]=1)}))}}var w=(0,u.Z)(this,v).fetchCountMatrix().get("ADT");(0,u.Z)(this,m).metrics=c.vy(w,[l]),this.changed=!0}else delete(0,u.Z)(this,m).metrics;if((0,u.Z)(this,p).automatic=r,(0,u.Z)(this,p).tag_id_column=n,(0,u.Z)(this,p).igg_prefix=i,this.changed||a!==(0,u.Z)(this,p).nmads||s!==(0,u.Z)(this,p).min_detected_drop){if(h.Yl((0,u.Z)(this,m).filters),this.valid()){var g=(0,u.Z)(this,v).fetchBlock();(0,u.Z)(this,m).filters=c.nO((0,u.Z)(this,m).metrics,{numberOfMADs:a,minDetectedDrop:s,block:g});var _=h.rS((0,u.Z)(this,m).metrics.numberOfCells(),"Uint8Array",(0,u.Z)(this,m),"discard_buffer");(0,u.Z)(this,m).filters.filter((0,u.Z)(this,m).metrics,{block:g,buffer:_}),this.changed=!0}else delete(0,u.Z)(this,m).filters;(0,u.Z)(this,p).nmads=a,(0,u.Z)(this,p).min_detected_drop=s}}}],[{key:"defaults",value:function(){return{automatic:!0,tag_id_column:null,igg_prefix:"IgG",nmads:3,min_detected_drop:.1}}},{key:"configureFeatureParameters",value:function(e,t){var r=function(t){var r=0;return t.forEach((function(t){t.toLowerCase().startsWith(e)&&r++})),r},i=null,a=0,s=t.rowNames();null!==s&&(a=r(s));var o,u=(0,n.Z)(t.columnNames());try{for(u.s();!(o=u.n()).done;){var l=o.value,c=r(t.column(l));c>a&&(i=l,a=c)}}catch(h){u.e(h)}finally{u.f()}return i}}]),e}()},1944:function(e,t,r){"use strict";r.d(t,{Cy:function(){return d},N_:function(){return b}});var n=r(1413),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=r(5831),c=r(7891),h=r(2269),f=r(8580),d="batch_correction",v=new WeakMap,m=new WeakMap,p=new WeakMap,y=new WeakMap,b=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,v,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,y,{writable:!0,value:void 0}),!(t instanceof h.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,u.Z)(this,v,t),!(r instanceof f.BE))throw new Error("'pca' should be a CombineEmbeddingsState object");(0,u.Z)(this,m,r),(0,u.Z)(this,p,null===n?{}:n),(0,u.Z)(this,y,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){c.Yl((0,o.Z)(this,y).corrected)}},{key:"fetchCorrected",value:function(){return(0,o.Z)(this,y).corrected}},{key:"fetchNumberOfCells",value:function(){return(0,o.Z)(this,m).fetchNumberOfCells()}},{key:"fetchNumberOfDimensions",value:function(){return(0,o.Z)(this,m).fetchNumberOfDimensions()}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,o.Z)(this,p))}},{key:"compute",value:function(e){var t=e.method,r=e.num_neighbors,n=e.approximate;this.changed=!1,((0,o.Z)(this,v).changed||(0,o.Z)(this,m).changed)&&(this.changed=!0);var i=(0,o.Z)(this,v).fetchFilteredBlock(),a="mnn"==t&&null!==i;if((this.changed||t!==(0,o.Z)(this,p).method||r!==(0,o.Z)(this,p).num_neighbors||n!==(0,o.Z)(this,p).approximate)&&a){var s=(0,o.Z)(this,m).fetchCombined(),u=c.rS(s.length,"Float64Array",(0,o.Z)(this,y),"corrected");l.F5(s,i,{k:r,buffer:u,numberOfCells:(0,o.Z)(this,m).fetchNumberOfCells(),numberOfDims:(0,o.Z)(this,m).fetchNumberOfDimensions(),approximate:n}),this.changed=!0}this.changed&&(a||(c.Yl((0,o.Z)(this,y).corrected),(0,o.Z)(this,y).corrected=(0,o.Z)(this,m).fetchCombined().view())),(0,o.Z)(this,p).method=t,(0,o.Z)(this,p).num_neighbors=r,(0,o.Z)(this,p).approximate=n}}],[{key:"defaults",value:function(){return{method:"mnn",num_neighbors:15,approximate:!0}}}]),e}()},2269:function(e,t,r){"use strict";r.d(t,{Cy:function(){return b},H0:function(){return C}});var n=r(1413),i=r(5671),a=r(3144),s=r(8652),o=r(2346),u=r(3889),l=r(8916),c=r(2793),h=r(7762),f=r(5831),d=r(7891),v=r(652),m=r(9873),p=r(9751),y=r(6546),b="cell_filtering";function w(e,t){var r,n=d.Mc(e),i=[],a=(0,h.Z)(n);try{for(a.s();!(r=a.n()).done;){var s=r.value;t[s]&&i.push(e[s])}}catch(o){a.e(o)}finally{a.f()}return i}var g=new WeakMap,_=new WeakMap,Z=new WeakMap,k=new WeakMap,x=new WeakSet,E=new WeakSet,C=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,E),(0,s.Z)(this,x),(0,o.Z)(this,g,{writable:!0,value:void 0}),(0,o.Z)(this,_,{writable:!0,value:void 0}),(0,o.Z)(this,Z,{writable:!0,value:void 0}),(0,o.Z)(this,k,{writable:!0,value:void 0}),!(t instanceof y.tq))throw new Error("'inputs' should be an InputsState object");if((0,c.Z)(this,g,t),!(r.RNA instanceof v.E4))throw new Error("'qc_states.RNA' should be a RnaQualityControlState object");if(!(r.ADT instanceof m.fA))throw new Error("'qc_states.ADT' should be a AdtQualityControlState object");if(!(r.CRISPR instanceof p.IW))throw new Error("'qc_states.CRISPR' should be a CrisprQualityControlState object");(0,c.Z)(this,_,r),(0,c.Z)(this,k,null===n?{}:n),(0,c.Z)(this,Z,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){d.Yl((0,l.Z)(this,Z).block_buffer),d.Yl((0,l.Z)(this,Z).discard_buffer),d.Yl((0,l.Z)(this,Z).matrix)}},{key:"fetchFilteredMatrix",value:function(){return"matrix"in(0,l.Z)(this,Z)||(0,u.Z)(this,x,O).call(this),(0,l.Z)(this,Z).matrix}},{key:"fetchFilteredBlock",value:function(){return"block_buffer"in(0,l.Z)(this,Z)||(0,u.Z)(this,E,S).call(this),(0,l.Z)(this,Z).block_buffer}},{key:"fetchDiscards",value:function(){return"discard_buffer"in(0,l.Z)(this,Z)?(0,l.Z)(this,Z).discard_buffer:null}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,l.Z)(this,k))}},{key:"compute",value:function(e){var t=e.use_rna,r=e.use_adt,n=e.use_crispr;this.changed=!1,(0,l.Z)(this,g).changed&&(this.changed=!0),(0,l.Z)(this,k).use_rna===t&&(0,l.Z)(this,k).use_adt===r&&(0,l.Z)(this,k).use_crispr===n||((0,l.Z)(this,k).use_rna=t,(0,l.Z)(this,k).use_adt=r,(0,l.Z)(this,k).use_crispr=n,this.changed=!0);var i=w((0,l.Z)(this,_),{RNA:t,ADT:r,CRISPR:n});if(!this.changed){var a,s=(0,h.Z)(i);try{for(s.s();!(a=s.n()).done;){if(a.value.changed){this.changed=!0;break}}}catch(p){s.e(p)}finally{s.f()}}if(this.changed){if(i.length>0){var o=i[0].fetchDiscards();if(i.length>1){var c=d.rS(o.length,"Uint8Array",(0,l.Z)(this,Z),"discard_buffer");c.fill(0);var f,v=c.array(),m=(0,h.Z)(i);try{for(m.s();!(f=m.n()).done;){f.value.fetchDiscards().forEach((function(e,t){v[t]|=e}))}}catch(p){m.e(p)}finally{m.f()}}else d.Yl((0,l.Z)(this,Z).discard_buffer),(0,l.Z)(this,Z).discard_buffer=o.view()}else d.Yl((0,l.Z)(this,Z).discard_buffer),delete(0,l.Z)(this,Z).discard_buffer;(0,u.Z)(this,x,O).call(this),(0,u.Z)(this,E,S).call(this)}}},{key:"applyFilter",value:function(e){if((0,l.Z)(this,g).fetchCountMatrix().numberOfColumns()!=e.length)throw new Error("length of 'x' should be equal to the number of cells in the unfiltered dataset");if("discard_buffer"in(0,l.Z)(this,Z)){var t=(0,l.Z)(this,Z).discard_buffer.array();return e.filter((function(e,r){return!t[r]}))}return e.slice()}},{key:"undoFilter",value:function(e){var t,r=this.fetchFilteredMatrix().numberOfColumns(),n=(0,h.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i<0||i>=r)throw new Error("entries of 'indices' should be less than the number of cells in the filtered dataset")}}catch(s){n.e(s)}finally{n.f()}if("discard_buffer"in(0,l.Z)(this,Z)){var a=[];(0,l.Z)(this,Z).discard_buffer.forEach((function(e,t){0==e&&a.push(t)})),e.forEach((function(t,r){e[r]=a[t]}))}}}],[{key:"defaults",value:function(){return{use_rna:!0,use_adt:!0,use_crispr:!0}}}]),e}();function O(){d.Yl((0,l.Z)(this,Z).matrix),(0,l.Z)(this,Z).matrix=new f.VU;var e,t=(0,l.Z)(this,g).fetchCountMatrix(),r=(0,h.Z)(t.available());try{for(r.s();!(e=r.n()).done;){var n=e.value,i=t.get(n),a=void 0;a="discard_buffer"in(0,l.Z)(this,Z)?f.b_(i,(0,l.Z)(this,Z).discard_buffer):i.clone(),(0,l.Z)(this,Z).matrix.add(n,a)}}catch(s){r.e(s)}finally{r.f()}}function S(){d.Yl((0,l.Z)(this,Z).block_buffer);var e=(0,l.Z)(this,g).fetchBlock();if(null!==e)if("discard_buffer"in(0,l.Z)(this,Z)){var t=this.fetchFilteredMatrix().numberOfColumns(),r=d.rS(t,"Int32Array",(0,l.Z)(this,Z),"block_buffer");f.fw(e,(0,l.Z)(this,Z).discard_buffer,{buffer:r})}else(0,l.Z)(this,Z).block_buffer=e.view();else(0,l.Z)(this,Z).block_buffer=null}},4:function(e,t,r){"use strict";r.d(t,{ES:function(){return W}});var n=r(4165),i=r(7762),a=r(9062),s=r(5861),o=r(3324),u=r(1413),l=r(5671),c=r(3144),h=r(4942),f=r(8652),d=r(2346),v=r(3966),m=r(9902),p=r(3889),y=r(8916),b=r(2793),w=r(5831),g=r(7462),_=r(7891),Z=r(9489),k=r(6546),x=r(8334),E="https://github.com/LTLA/singlepp-references/releases/download/v2.0.0",C=new WeakMap,O=new WeakMap,S=new WeakMap,A=new WeakMap,R=new WeakSet,M=new WeakSet,N=new WeakSet,W=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,l.Z)(this,e),(0,f.Z)(this,N),(0,f.Z)(this,M),(0,f.Z)(this,R),(0,d.Z)(this,C,{writable:!0,value:void 0}),(0,d.Z)(this,O,{writable:!0,value:void 0}),(0,d.Z)(this,S,{writable:!0,value:void 0}),(0,d.Z)(this,A,{writable:!0,value:void 0}),!(t instanceof k.tq))throw new Error("'inputs' should be a State object from './inputs.js'");if((0,b.Z)(this,C,t),!(r instanceof x.UL))throw new Error("'markers' should be a State object from './marker_detection.js'");(0,b.Z)(this,O,r),(0,b.Z)(this,S,null===n?{}:n),(0,b.Z)(this,A,null===i?{}:i),this.changed=!1}return(0,c.Z)(e,[{key:"free",value:function(){_.Yl((0,y.Z)(this,A).buffer),(0,p.Z)(this,R,I).call(this)}},{key:"valid",value:function(){return(0,y.Z)(this,C).fetchCountMatrix().has("RNA")}},{key:"fetchParameters",value:function(){var e=(0,u.Z)({},(0,y.Z)(this,S));return e.references=g.bl(e.references),e.species=g.bl(e.species),e}},{key:"fetchResults",value:function(){for(var e={},t=0,r=Object.entries((0,y.Z)(this,A).results);t<r.length;t++){var n=(0,o.Z)(r[t],2),i=n[0],a=n[1];e[i]=a}var s={per_reference:e};return"integrated_results"in(0,y.Z)(this,A)&&(s.integrated=(0,y.Z)(this,A).integrated_results),s}},{key:"fetchNumberOfSharedFeatures",value:function(){for(var e={},t=0,r=Object.keys((0,y.Z)(this,A).results);t<r.length;t++){var n=r[t];e[n]=(0,y.Z)(this,A).prepared[n].built.raw.sharedFeatures()}return e}},{key:"compute",value:function(){var t=(0,s.Z)((0,n.Z)().mark((function t(r){var s,u,l,c,h,f,d,v,m,b,Z,k,x,E,W,D,j,P,T,B,L,U,Y,q,H,G,V,$,K,J,X,Q,ee,te,re,ne,ie,ae,se,oe,ue,le,ce,he,fe,de,ve,me,pe,ye=this;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("references"in r?(s=r.references,u=r.automatic,l=r.species,c=r.gene_id_column,h=r.gene_id_type):(s=[].concat((0,a.Z)(r.human_references),(0,a.Z)(r.mouse_references)),u=!0,f=e.defaults(),l=f.species,c=f.gene_id_column,h=f.gene_id_type),this.changed=!1,!this.valid()){t.next=49;break}if(!(0,y.Z)(this,C).changed&&u===(0,y.Z)(this,S).automatic&&!_.xi(s,(0,y.Z)(this,S).references)&&(u||l===(0,y.Z)(this,S).species&&c===(0,y.Z)(this,S).gene_id_column&&h===(0,y.Z)(this,S).gene_id_type)){t.next=41;break}d=l,v=c,m=h,u&&(b=(0,y.Z)(this,C).guessRnaFeatureTypes(),Z=e.configureFeatureParameters(b),d=Z.species,v=Z.gene_id_column,m=Z.gene_id_type),k=new Set,x=(0,i.Z)(d);try{for(x.s();!(E=x.n()).done;)(W=E.value)in e.availableReferences&&e.availableReferences[W].forEach((function(e){k.add(e)}))}catch(n){x.e(n)}finally{x.f()}if(D=(0,y.Z)(this,C).fetchFeatureAnnotations().RNA,j=null==v?D.rowNames():D.column(v),(0,y.Z)(this,A).gene_ids=j,P={},null===j){t.next=35;break}T=(0,i.Z)(s),t.prev=17,T.s();case 19:if((B=T.n()).done){t.next=27;break}if(L=B.value,!k.has(L)){t.next=25;break}return t.next=24,(0,p.Z)(this,M,z).call(this,L);case 24:P[L]=(0,p.Z)(this,N,F).call(this,L,j,m);case 25:t.next=19;break;case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(17),T.e(t.t0);case 32:return t.prev=32,T.f(),t.finish(32);case 35:(0,p.Z)(this,R,I).call(this),(0,y.Z)(this,A).prepared=P,(U=Object.keys(P)).length>1?(Y=Object.values(P),q=Y.map((function(e){return e.loaded.raw})),H=Y.map((function(e){return e.built.features})),G=Y.map((function(e){return e.built.raw})),_.Yl((0,y.Z)(this,A).integrated),(0,y.Z)(this,A).integrated=w.Qj(j,q,H,G)):(_.Yl((0,y.Z)(this,A).integrated),delete(0,y.Z)(this,A).integrated),(0,y.Z)(this,A).used_refs=U,this.changed=!0;case 41:if(V=(0,y.Z)(this,O).fetchResults().RNA,$=V.numberOfGroups(),K=null!==(0,y.Z)(this,A).gene_ids?(0,y.Z)(this,A).gene_ids.length:null,J=(0,y.Z)(this,A).buffer,(0,y.Z)(this,O).changed){if(null!==K)for(J=_.rS($*K,"Float64Array",(0,y.Z)(this,A)),X=0;X<$;X++)Q=V.means(X,{copy:!1}),J.array().set(Q,X*K);this.changed=!0}if(this.changed){for(ee=(0,y.Z)(this,A).prepared,(0,y.Z)(this,A).results={},te=0,re=Object.entries(ee);te<re.length;te++){ne=(0,o.Z)(re[te],2),ie=ne[0],ae=ne[1],se=w.pG(J,ae.built.raw,{numberOfFeatures:K,numberOfCells:$}),oe=[],ue=(0,i.Z)(se);try{for(ue.s();!(le=ue.n()).done;)ce=le.value,oe.push(ae.loaded.labels[ce])}catch(n){ue.e(n)}finally{ue.f()}(0,y.Z)(this,A).results[ie]=oe}if("integrated"in(0,y.Z)(this,A)){he=[],fe=(0,i.Z)((0,y.Z)(this,A).used_refs);try{for(fe.s();!(de=fe.n()).done;)ve=de.value,he.push((0,y.Z)(this,A).results[ve])}catch(n){fe.e(n)}finally{fe.f()}me=w.Os(J,he,(0,y.Z)(this,A).integrated,{numberOfFeatures:K,numberOfCells:$}),pe=[],me.forEach((function(e){pe.push((0,y.Z)(ye,A).used_refs[e])})),(0,y.Z)(this,A).integrated_results=pe}else delete(0,y.Z)(this,A).integrated_results}t.next=51;break;case 49:(0,y.Z)(this,A).results={},delete(0,y.Z)(this,A).integrated_results;case 51:return(0,y.Z)(this,S).references=g.bl(s),(0,y.Z)(this,S).automatic=u,(0,y.Z)(this,S).species=g.bl(l),(0,y.Z)(this,S).gene_id_column=c,(0,y.Z)(this,S).gene_id_type=h,t.abrupt("return");case 57:case"end":return t.stop()}}),t,this,[[17,29,32,35]])})));return function(e){return t.apply(this,arguments)}}()}],[{key:"defaults",value:function(){return{references:[],automatic:!0,species:[],gene_id_column:null,gene_id_type:"ENSEMBL"}}},{key:"configureFeatureParameters",value:function(e){var t=null,r={type:"symbol",species:"human",confidence:0};if("row_names"in e){var n=e.row_names;n.confidence>r.confidence&&(r=n)}for(var i=0,a=Object.entries(e.columns);i<a.length;i++){var s=(0,o.Z)(a[i],2),u=s[0],l=s[1];l.confidence>r.confidence&&(r=l,t=u)}return{gene_id_column:t,species:[r.species],gene_id_type:r.type.toUpperCase()}}},{key:"flush",value:function(){for(var t=0,r=Object.entries((0,m.Z)(e,e,j));t<r.length;t++){var n=(0,o.Z)(r[t],2);n[0];n[1].raw.free()}(0,v.Z)(e,e,j,{})}},{key:"setDownload",value:function(t){var r=(0,m.Z)(e,e,P);return(0,v.Z)(e,e,P,t),r}}]),e}();function I(){if("prepared"in(0,y.Z)(this,A)){for(var e=0,t=Object.values((0,y.Z)(this,A).prepared);e<t.length;e++){t[e].built.raw.free()}delete(0,y.Z)(this,A).prepared}}function z(e){return D.apply(this,arguments)}function D(){return D=(0,s.Z)((0,n.Z)().mark((function e(t){var r,i,a,o,u,l,c,h,f,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,m.Z)(W,W,j),!(t in r)){e.next=3;break}return e.abrupt("return");case 3:return i=["genes.csv.gz","labels_fine.csv.gz","label_names_fine.csv.gz","markers_fine.gmt.gz","matrix.csv.gz"],e.next=6,Promise.all(i.map(function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t+"_"+r,e.next=3,(0,m.Z)(W,W,P).call(W,E+"/"+i);case 3:return a=e.sent,e.abrupt("return",new Z.zD(a,{name:i}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return a=e.sent,e.prev=7,o=w.tY(a[4].buffer(),a[3].buffer(),a[1].buffer()),e.next=11,Z.bw(a[0].content(),{compression:"gz"});case 11:return u=e.sent,l=[],c=[],h=[],f=function(e){return""==e?null:e},u.forEach((function(e){var t=e.split(",");l.push(f(t[0])),c.push(f(t[1])),h.push(f(t[2]))})),e.next=19,Z.bw(a[2].content(),{compression:"gz"});case 19:d=e.sent,r[t]={raw:o,genes:{ENSEMBL:l,SYMBOL:c,ENTREZ:h},labels:d},e.next=27;break;case 23:throw e.prev=23,e.t0=e.catch(7),_.Yl(o),e.t0;case 27:case"end":return e.stop()}}),e,null,[[7,23]])}))),D.apply(this,arguments)}function F(e,t,r){var n,i;try{var a=(0,m.Z)(W,W,j)[e],s=a.raw;if(!(r in a.genes))throw new Error("unknown gene type '"+r+"'");var o=a.genes[r];i={loaded:a,built:{features:o,raw:n=w.St(t,s,o)}}}catch(u){throw _.Yl(n),u}return i}(0,h.Z)(W,"availableReferences",{9606:["BlueprintEncode","DatabaseImmuneCellExpression","HumanPrimaryCellAtlas","MonacoImmune","NovershternHematopoietic"],10090:["ImmGen","MouseRNAseq"]});var j={writable:!0,value:{}},P={writable:!0,value:_.we}},2658:function(e,t,r){"use strict";r.d(t,{c:function(){return m}});var n=r(1413),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=(r(5831),r(7891),r(4414)),c=r(8849),h=new WeakMap,f=new WeakMap,d=new WeakMap,v=new WeakMap,m=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,h,{writable:!0,value:void 0}),(0,s.Z)(this,f,{writable:!0,value:void 0}),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,v,{writable:!0,value:void 0}),!(t instanceof l.Xs))throw new Error("'snn' should be a State object from './snn_graph_cluster.js'");if((0,u.Z)(this,h,t),!(r instanceof c.d))throw new Error("'kmeans' should be a State object from './kmeans_cluster.js'");(0,u.Z)(this,f,r),(0,u.Z)(this,d,null===n?{}:n),(0,u.Z)(this,v,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){}},{key:"fetchClusters",value:function(){return"snn_graph"==(0,o.Z)(this,d).method?(0,o.Z)(this,h).fetchClusters():"kmeans"==(0,o.Z)(this,d).method?(0,o.Z)(this,f).fetchClusters():void 0}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,o.Z)(this,d))}},{key:"compute",value:function(e){var t=e.method;this.changed=!0,t==(0,o.Z)(this,d).method&&("snn_graph"==t?(0,o.Z)(this,h).changed||(this.changed=!1):"kmeans"==t&&((0,o.Z)(this,f).changed||(this.changed=!1))),(0,o.Z)(this,d).method=t}}]),e}()},8580:function(e,t,r){"use strict";r.d(t,{BE:function(){return g},Cy:function(){return m}});var n=r(1413),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=r(7762),c=r(5831),h=r(7891),f=r(384),d=r(7188),v=r(6849),m="combine_embeddings";function p(e,t){var r,n=h.Mc(e),i=[],a=(0,l.Z)(n);try{for(a.s();!(r=a.n()).done;){var s=r.value;t[s]>0&&i.push(s)}}catch(o){a.e(o)}finally{a.f()}return i}var y=new WeakMap,b=new WeakMap,w=new WeakMap,g=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,i.Z)(this,e),(0,s.Z)(this,y,{writable:!0,value:void 0}),(0,s.Z)(this,b,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),!(t.RNA instanceof f.rR))throw new Error("'pca_states.RNA' should be an RnaPcaState object");if(!(t.ADT instanceof d.Ru))throw new Error("'pca_states.ADT' should be an AdtPcaState object");if(!(t.CRISPR instanceof v.zR))throw new Error("'pca_states.CRISPR' should be an CrisprPcaState object");(0,u.Z)(this,y,t),(0,u.Z)(this,b,null===r?{}:r),(0,u.Z)(this,w,null===n?{}:n),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){h.Yl((0,o.Z)(this,w).combined_buffer)}},{key:"fetchCombined",value:function(){return(0,o.Z)(this,w).combined_buffer}},{key:"fetchNumberOfCells",value:function(){return(0,o.Z)(this,w).num_cells}},{key:"fetchNumberOfDimensions",value:function(){return(0,o.Z)(this,w).total_dims}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,o.Z)(this,b))}},{key:"compute",value:function(e){var t=e.rna_weight,r=e.adt_weight,n=e.crispr_weight,i=e.approximate;this.changed=!1;for(var a=0,s=Object.values((0,o.Z)(this,y));a<s.length;a++){if(s[a].changed){this.changed=!0;break}}if(i!==(0,o.Z)(this,b).approximate&&((0,o.Z)(this,b).approximate=i,this.changed=!0),t===(0,o.Z)(this,b).rna_weight&&r===(0,o.Z)(this,b).adt_weight&&n===(0,o.Z)(this,b).crispr_weight||((0,o.Z)(this,b).rna_weight=t,(0,o.Z)(this,b).adt_weight=r,(0,o.Z)(this,b).crispr_weight=n,this.changed=!0),this.changed){var u={RNA:t,ADT:r,CRISPR:n},f=p((0,o.Z)(this,y),u);if(f.length>1){var d,v=f.map((function(e){return u[e]})),m=[],g=0,_=null,Z=(0,l.Z)(f);try{for(Z.s();!(d=Z.n()).done;){var k=d.value,x=(0,o.Z)(this,y)[k].fetchPCs();if(m.push(x.principalComponents({copy:"view"})),null==_)_=x.numberOfCells();else if(_!==x.numberOfCells())throw new Error("number of cells should be consistent across all embeddings");g+=x.numberOfPCs()}}catch(O){Z.e(O)}finally{Z.f()}var E=h.rS(_*g,"Float64Array",(0,o.Z)(this,w),"combined_buffer");c.jX(m,_,{buffer:E,weights:v,approximate:i}),(0,o.Z)(this,w).num_cells=_,(0,o.Z)(this,w).total_dims=g}else{var C=(0,o.Z)(this,y)[f[0]].fetchPCs();this.constructor.createPcsView((0,o.Z)(this,w),C)}}}}],[{key:"defaults",value:function(){return{rna_weight:1,adt_weight:1,crispr_weight:0,approximate:!0}}},{key:"createPcsView",value:function(e,t){h.Yl(e.combined_buffer),e.combined_buffer=t.principalComponents({copy:"view"}).view(),e.num_cells=t.numberOfCells(),e.total_dims=t.numberOfPCs()}}]),e}()},2615:function(e,t,r){"use strict";r.d(t,{$M:function(){return Z},Cy:function(){return p}});var n=r(1413),i=r(5671),a=r(3144),s=r(8652),o=r(2346),u=r(3889),l=r(8916),c=r(2793),h=r(5831),f=r(7891),d=r(569),v=r(9751),m=r(2269),p="crispr_normalization",y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,_=new WeakSet,Z=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,_),(0,o.Z)(this,y,{writable:!0,value:void 0}),(0,o.Z)(this,b,{writable:!0,value:void 0}),(0,o.Z)(this,w,{writable:!0,value:void 0}),(0,o.Z)(this,g,{writable:!0,value:void 0}),!(t instanceof v.IW))throw new Error("'qc' should be a CrisprQualityControlState object");if((0,c.Z)(this,y,t),!(r instanceof m.H0))throw new Error("'filter' should be a CellFilteringState object");(0,c.Z)(this,b,r),(0,c.Z)(this,w,null===n?{}:n),(0,c.Z)(this,g,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){f.Yl((0,l.Z)(this,g).matrix),f.Yl((0,l.Z)(this,g).total_buffer),f.Yl((0,l.Z)(this,g).centered_buffer)}},{key:"valid",value:function(){return(0,l.Z)(this,b).fetchFilteredMatrix().has("CRISPR")}},{key:"fetchNormalizedMatrix",value:function(){return"matrix"in(0,l.Z)(this,g)||(0,u.Z)(this,_,k).call(this),(0,l.Z)(this,g).matrix}},{key:"fetchSizeFactors",value:function(){var e;return(0,l.Z)(this,g).sum_buffer&&(e=f.rS((0,l.Z)(this,g).sum_buffer.length,"Float64Array",(0,l.Z)(this,g),"centered_buffer"),h.v_((0,l.Z)(this,g).sum_buffer,{buffer:e,block:(0,l.Z)(this,b).fetchFilteredBlock()})),e}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,l.Z)(this,w))}},{key:"compute",value:function(e){this.changed=!1,((0,l.Z)(this,y).changed||(0,l.Z)(this,b).changed)&&this.valid()&&((0,u.Z)(this,_,k).call(this),this.changed=!0)}},{key:"serialize",value:function(e){var t=e.createGroup(p);t.createGroup("parameters"),t.createGroup("results")}}],[{key:"defaults",value:function(){return{}}}]),e}();function k(){var e=(0,l.Z)(this,b).fetchFilteredMatrix().get("CRISPR"),t=d.e((0,l.Z)(this,y),(0,l.Z)(this,b),e,(0,l.Z)(this,g),"sum_buffer"),r=(0,l.Z)(this,b).fetchFilteredBlock();f.Yl((0,l.Z)(this,g).matrix),(0,l.Z)(this,g).matrix=h.gk(e,{sizeFactors:t,block:r,allowZeros:!0})}},6849:function(e,t,r){"use strict";r.d(t,{Cy:function(){return d},zR:function(){return b}});var n=r(1413),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=r(5831),c=r(7891),h=r(2269),f=r(2615),d="crispr_pca",v=new WeakMap,m=new WeakMap,p=new WeakMap,y=new WeakMap,b=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,v,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,y,{writable:!0,value:void 0}),!(t instanceof h.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,u.Z)(this,v,t),!(r instanceof f.$M))throw new Error("'norm' should be a CrisprNormalizationState object");(0,u.Z)(this,m,r),(0,u.Z)(this,y,null===n?{}:n),(0,u.Z)(this,p,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){c.Yl((0,o.Z)(this,p).pcs)}},{key:"valid",value:function(){return(0,o.Z)(this,m).valid()}},{key:"fetchPCs",value:function(){return(0,o.Z)(this,p).pcs}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,o.Z)(this,y))}},{key:"compute",value:function(e){var t=e.num_pcs,r=e.block_method;if(this.changed=!1,(0,o.Z)(this,m).changed||t!==(0,o.Z)(this,y).num_pcs||r!==(0,o.Z)(this,y).block_method){if(this.valid()){var n=(0,o.Z)(this,v).fetchFilteredBlock(),i=(0,o.Z)(this,m).fetchNormalizedMatrix();c.Yl((0,o.Z)(this,p).pcs),(0,o.Z)(this,p).pcs=l.aG(i,{numberOfPCs:t,block:n,blockMethod:r}),this.changed=!0}(0,o.Z)(this,y).num_pcs=t,(0,o.Z)(this,y).block_method=r}}}],[{key:"defaults",value:function(){return{num_pcs:20,block_method:"none"}}}]),e}()},9751:function(e,t,r){"use strict";r.d(t,{Cy:function(){return f},IW:function(){return p}});var n=r(1413),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=r(5831),c=r(7891),h=r(6546),f="crispr_quality_control",d=new WeakMap,v=new WeakMap,m=new WeakMap,p=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,i.Z)(this,e),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,v,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),!(t instanceof h.tq))throw new Error("'inputs' should be a State object from './inputs.js'");(0,u.Z)(this,d,t),(0,u.Z)(this,m,null===r?{}:r),(0,u.Z)(this,v,null===n?{}:n),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){c.Yl((0,o.Z)(this,v).metrics),c.Yl((0,o.Z)(this,v).filters),c.Yl((0,o.Z)(this,v).metrics_buffer),c.Yl((0,o.Z)(this,v).discard_buffer)}},{key:"valid",value:function(){return(0,o.Z)(this,d).fetchCountMatrix().has("CRISPR")}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,o.Z)(this,m))}},{key:"fetchFilters",value:function(){return(0,o.Z)(this,v).filters}},{key:"fetchDiscards",value:function(){return(0,o.Z)(this,v).discard_buffer}},{key:"fetchMetrics",value:function(){return(0,o.Z)(this,v).metrics}},{key:"compute",value:function(e){var t=e.nmads;if(this.changed=!1,(0,o.Z)(this,d).changed)if(c.Yl((0,o.Z)(this,v).metrics),this.valid()){var r=(0,o.Z)(this,d).fetchCountMatrix().get("CRISPR");(0,o.Z)(this,v).metrics=l.J4(r),this.changed=!0}else delete(0,o.Z)(this,v).metrics;if(this.changed||t!==(0,o.Z)(this,m).nmads){if(c.Yl((0,o.Z)(this,v).filters),this.valid()){var n=(0,o.Z)(this,d).fetchBlock();(0,o.Z)(this,v).filters=l.XU((0,o.Z)(this,v).metrics,{numberOfMADs:t,block:n});var i=c.rS((0,o.Z)(this,v).metrics.numberOfCells(),"Uint8Array",(0,o.Z)(this,v),"discard_buffer");(0,o.Z)(this,v).filters.filter((0,o.Z)(this,v).metrics,{block:n,buffer:i}),this.changed=!0}else delete(0,o.Z)(this,v).filters;(0,o.Z)(this,m).nmads=t}}}],[{key:"defaults",value:function(){return{nmads:3}}}]),e}()},8391:function(e,t,r){"use strict";r.d(t,{$:function(){return y}});var n=r(1413),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=r(5831),c=r(7891),h=r(2269),f=r(7317),d=new WeakMap,v=new WeakMap,m=new WeakMap,p=new WeakMap,y=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,v,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),!(t instanceof h.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,u.Z)(this,d,t),!(r instanceof f.ue))throw new Error("'norm' should be an RnaNormalizationState object");(0,u.Z)(this,v,r),(0,u.Z)(this,p,null===n?{}:n),(0,u.Z)(this,m,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){c.Yl((0,o.Z)(this,m).matrix)}},{key:"valid",value:function(){return(0,o.Z)(this,v).valid()}},{key:"fetchResults",value:function(){return(0,o.Z)(this,m).results}},{key:"fetchSortedResiduals",value:function(){return(0,o.Z)(this,m).sorted_residuals}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,o.Z)(this,p))}},{key:"compute",value:function(e){var t=e.span;if(this.changed=!1,(0,o.Z)(this,v).changed||t!=(0,o.Z)(this,p).span){if(c.Yl((0,o.Z)(this,m).results),this.valid()){var r=(0,o.Z)(this,v).fetchNormalizedMatrix(),n=(0,o.Z)(this,d).fetchFilteredBlock();(0,o.Z)(this,m).results=l.rY(r,{span:t,block:n}),(0,o.Z)(this,m).sorted_residuals=(0,o.Z)(this,m).results.residuals().slice(),(0,o.Z)(this,m).sorted_residuals.sort(),this.changed=!0}(0,o.Z)(this,p).span=t}}}]),e}()},8849:function(e,t,r){"use strict";r.d(t,{d:function(){return b}});var n=r(1413),i=r(5671),a=r(3144),s=r(8652),o=r(2346),u=r(3889),l=r(8916),c=r(2793),h=r(5831),f=r(7891),d=r(1944),v=new WeakMap,m=new WeakMap,p=new WeakMap,y=new WeakSet,b=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,i.Z)(this,e),(0,s.Z)(this,y),(0,o.Z)(this,v,{writable:!0,value:void 0}),(0,o.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,p,{writable:!0,value:void 0}),!(t instanceof d.N_))throw new Error("'correct' should be a BatchCorrectionState object");(0,c.Z)(this,v,t),(0,c.Z)(this,m,null===r?{}:r),(0,c.Z)(this,p,null===n?{}:n),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){f.Yl((0,l.Z)(this,p).raw)}},{key:"fetchClusters",value:function(){if((0,u.Z)(this,y,w).call(this))return(0,l.Z)(this,p).raw.clusters({copy:"view"});throw new Error("cannot fetch k-means clusters from an invalid state")}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,l.Z)(this,m))}},{key:"compute",value:function(e,t){var r=t.k;if(this.changed=!1,(0,l.Z)(this,v).changed||r!=(0,l.Z)(this,m).k||!(0,u.Z)(this,y,w).call(this)&&e){if(f.Yl((0,l.Z)(this,p).raw),e){var n=(0,l.Z)(this,v).fetchCorrected();(0,l.Z)(this,p).raw=h.eu(n,r,{numberOfDims:(0,l.Z)(this,v).fetchNumberOfDimensions(),numberOfCells:(0,l.Z)(this,v).fetchNumberOfCells(),initMethod:"pca-part"})}else delete(0,l.Z)(this,p).raw;(0,l.Z)(this,m).k=r,this.changed=!0}}}]),e}();function w(){return"raw"in(0,l.Z)(this,p)}},8334:function(e,t,r){"use strict";r.d(t,{Cy:function(){return w},J6:function(){return z},UL:function(){return O}});var n=r(7762),i=r(3324),a=r(1413),s=r(5671),o=r(3144),u=r(2346),l=r(8916),c=r(2793),h=r(5831),f=r(7891),d=r(818),v=r(2269),m=r(2658),p=r(7317),y=r(8366),b=r(2615),w="marker_detection";function g(e){for(var t=0,r=Object.values(e.raw);t<r.length;t++){var n=r[t];f.Yl(n)}e.raw={},d.eo(e.versus),delete e.versus}function _(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.cache,s=void 0===a?{}:a,o=i.block,u=void 0===o?null:o,l=i.lfc_threshold,c=void 0===l?0:l,h=i.compute_auc,f=void 0===h||h,v=d.Bh(e,t,s),m=v.left_small?0:1,p=v.left_small?1:0;if(v.run){var y=[],b=[],w=!1,g=!1;if(n.forEach((function(r,n){r==e?(y.push(m),b.push(n),w=!0):r==t&&(y.push(p),b.push(n),g=!0)})),!w||!g)throw new Error("non-zero entries should be present for both requested clusters in versus mode");d.c9(r,y,u,b,v.cached,c,f)}return{results:v.cached,left:m,right:p}}var Z=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakMap,C=new WeakMap,O=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,s.Z)(this,e),(0,u.Z)(this,Z,{writable:!0,value:void 0}),(0,u.Z)(this,k,{writable:!0,value:void 0}),(0,u.Z)(this,x,{writable:!0,value:void 0}),(0,u.Z)(this,E,{writable:!0,value:void 0}),(0,u.Z)(this,C,{writable:!0,value:void 0}),!(t instanceof v.H0))throw new Error("'filter' should be a State object from './cell_filtering.js'");if((0,c.Z)(this,Z,t),!(r.RNA instanceof p.ue))throw new Error("'norm_states.RNA' should be an RnaNormalizationState object");if(!(r.ADT instanceof y.m5))throw new Error("'norm_states.ADT' should be an AdtNormalizationState object");if(!(r.CRISPR instanceof b.$M))throw new Error("'norm_states.CRISPR' should be an CrisprNormalizationState object");if((0,c.Z)(this,k,r),!(n instanceof m.c))throw new Error("'choice' should be a State object from './choose_clustering.js'");(0,c.Z)(this,x,n),(0,c.Z)(this,E,null===i?{}:i),(0,c.Z)(this,C,null===a?{raw:{}}:a),this.changed=!1}return(0,o.Z)(e,[{key:"free",value:function(){g((0,l.Z)(this,C))}},{key:"fetchResults",value:function(){return(0,l.Z)(this,C).raw}},{key:"fetchParameters",value:function(){return(0,a.Z)({},(0,l.Z)(this,E))}},{key:"compute",value:function(e){var t=e.lfc_threshold,r=e.compute_auc;this.changed=!1;for(var n=t!==(0,l.Z)(this,E).lfc_threshold||r!==(0,l.Z)(this,E).compute_auc,a=0,s=Object.entries((0,l.Z)(this,k));a<s.length;a++){var o=(0,i.Z)(s[a],2),u=o[0],c=o[1];if(c.valid()&&((0,l.Z)(this,x).changed||c.changed||n)){var v=c.fetchNormalizedMatrix(),m=(0,l.Z)(this,x).fetchClusters(),p=(0,l.Z)(this,Z).fetchFilteredBlock();f.Yl((0,l.Z)(this,C).raw[u]),(0,l.Z)(this,C).raw[u]=h.y5(v,m,{block:p,lfcThreshold:t,computeAuc:r}),this.changed=!0}}(0,l.Z)(this,E).lfc_threshold=t,(0,l.Z)(this,E).compute_auc=r,this.changed&&d.eo((0,l.Z)(this,C).versus)}},{key:"computeVersus",value:function(e,t){for(var r=(0,l.Z)(this,x).fetchClusters(),n=(0,l.Z)(this,Z).fetchFilteredBlock(),a=new h.VU,s=0,o=Object.entries((0,l.Z)(this,k));s<o.length;s++){var u=(0,i.Z)(o[s],2),c=u[0],f=u[1];f.valid()&&a.add(c,f.fetchNormalizedMatrix())}return"versus"in(0,l.Z)(this,C)||((0,l.Z)(this,C).versus={}),_(e,t,a,r,{cache:(0,l.Z)(this,C).versus,block:n,lfc_threshold:(0,l.Z)(this,E).lfc_threshold,compute_auc:(0,l.Z)(this,E).compute_auc})}}],[{key:"defaults",value:function(){return{lfc_threshold:0,compute_auc:!0}}},{key:"computeVersusCustom",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.cache,s=void 0===a?{}:a,o=i.block,u=void 0===o?null:o,l=i.lfc_threshold,c=void 0===l?0:l,h=i.compute_auc;return computeVersus(e,t,r,n,{cache:s,block:u,lfc_threshold:c,compute_auc:void 0===h||h})}}]),e}(),S=new WeakMap,A=new WeakMap,R=new WeakMap,M=new WeakMap,N=new WeakMap,W=new WeakMap,I=new WeakMap,z=function(){function e(t,r){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).block,a=void 0===i?null:i;(0,s.Z)(this,e),(0,u.Z)(this,S,{writable:!0,value:void 0}),(0,u.Z)(this,A,{writable:!0,value:void 0}),(0,u.Z)(this,R,{writable:!0,value:void 0}),(0,u.Z)(this,M,{writable:!0,value:void 0}),(0,u.Z)(this,N,{writable:!0,value:void 0}),(0,u.Z)(this,W,{writable:!0,value:void 0}),(0,u.Z)(this,I,{writable:!0,value:void 0});var o,l=r.length,d=(0,n.Z)(t.available());try{for(d.s();!(o=d.n()).done;){var v=o.value;if(t.get(v).numberOfColumns()!=l)throw new Error("all matrices in 'normalized' should have the same number of columns as the length of 'groups'")}}catch(Z){d.e(Z)}finally{d.f()}if(null!==a&&a.length!=l)throw new Error("'block' should have the same length as 'groups' if not null");var m=[r];null!==a&&m.push(a);var p,y=f.XZ(m);if(null!==y.retain){p=new h.VU;var b=h.Wf(y.retain.length);try{b.set(y.retain);var w,g=(0,n.Z)(t.available());try{for(g.s();!(w=g.n()).done;){var _=w.value;p.add(_,h.ZW(t.get(_),b))}}catch(Z){g.e(Z)}finally{g.f()}}catch(k){throw p.free(),k}finally{h.gd(b)}}else p=t.clone();(0,c.Z)(this,S,p),(0,c.Z)(this,A,y.arrays[0].ids),(0,c.Z)(this,R,y.arrays[0].levels),null!==a?((0,c.Z)(this,M,y.arrays[1].ids),(0,c.Z)(this,N,y.arrays[1].levels)):((0,c.Z)(this,M,null),(0,c.Z)(this,N,null)),(0,c.Z)(this,W,{raw:{},init:!0}),(0,c.Z)(this,I,O.defaults()),this.changed=!1}return(0,o.Z)(e,[{key:"free",value:function(){h.gd((0,l.Z)(this,A)),h.gd((0,l.Z)(this,M)),h.gd((0,l.Z)(this,S)),g((0,l.Z)(this,W))}},{key:"fetchResults",value:function(){return(0,l.Z)(this,W).raw}},{key:"fetchParameters",value:function(){return(0,a.Z)({},(0,l.Z)(this,I))}},{key:"fetchGroupLevels",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e,r=(0,l.Z)(this,R);return t?r.slice():r}},{key:"fetchBlockLevels",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e,r=(0,l.Z)(this,N);return t?r.slice():r}},{key:"_peekMatrices",value:function(){return(0,l.Z)(this,S)}},{key:"_peekGroups",value:function(){return(0,l.Z)(this,A)}},{key:"_peekBlock",value:function(){return(0,l.Z)(this,M)}},{key:"setParameters",value:function(e){(0,l.Z)(this,I).lfc_threshold===e.lfc_threshold&&(0,l.Z)(this,I).compute_auc===e.compute_auc||this.free(),(0,c.Z)(this,I,(0,a.Z)({},e))}},{key:"computeAll",value:function(){var e,t=(0,l.Z)(this,I),r=t.lfc_threshold,i=t.compute_auc,a=(0,n.Z)((0,l.Z)(this,S).available());try{for(a.s();!(e=a.n()).done;){var s=e.value,o=(0,l.Z)(this,S).get(s);f.Yl((0,l.Z)(this,W).raw[s]),(0,l.Z)(this,W).raw[s]=h.y5(o,(0,l.Z)(this,A),{block:(0,l.Z)(this,M),lfcThreshold:r,computeAuc:i})}}catch(u){a.e(u)}finally{a.f()}}},{key:"computeVersus",value:function(e,t){return"versus"in(0,l.Z)(this,W)||((0,l.Z)(this,W).versus={}),_(e,t,(0,l.Z)(this,S),(0,l.Z)(this,A),{cache:(0,l.Z)(this,W).versus,block:(0,l.Z)(this,M),lfc_threshold:(0,l.Z)(this,I).lfc_threshold,compute_auc:(0,l.Z)(this,I).compute_auc})}}]),e}()},7625:function(e,t,r){"use strict";r.d(t,{Cy:function(){return v},Xr:function(){return w}});var n=r(1413),i=r(5671),a=r(3144),s=r(8652),o=r(2346),u=r(3889),l=r(8916),c=r(2793),h=r(5831),f=r(7891),d=r(1944),v="neighbor_index",m=new WeakMap,p=new WeakMap,y=new WeakMap,b=new WeakSet,w=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,i.Z)(this,e),(0,s.Z)(this,b),(0,o.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,p,{writable:!0,value:void 0}),(0,o.Z)(this,y,{writable:!0,value:void 0}),!(t instanceof d.N_))throw new Error("'correct' should be a BatchCorrectionState object");(0,c.Z)(this,m,t),(0,c.Z)(this,p,null===r?{}:r),(0,c.Z)(this,y,null===n?{}:n),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){f.Yl((0,l.Z)(this,y).raw)}},{key:"fetchIndex",value:function(){return"raw"in(0,l.Z)(this,y)||(0,u.Z)(this,b,g).call(this,(0,l.Z)(this,p).approximate),(0,l.Z)(this,y).raw}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,l.Z)(this,p))}},{key:"compute",value:function(e){var t=e.approximate;this.changed=!1,((0,l.Z)(this,m).changed||t!=(0,l.Z)(this,p).approximate)&&(f.Yl((0,l.Z)(this,y).raw),(0,u.Z)(this,b,g).call(this,t),(0,l.Z)(this,p).approximate=t,this.changed=!0)}}],[{key:"defaults",value:function(){return{approximate:!0}}}]),e}();function g(e){(0,l.Z)(this,y).raw=h.Fu((0,l.Z)(this,m).fetchCorrected(),{approximate:e,numberOfDims:(0,l.Z)(this,m).fetchNumberOfDimensions(),numberOfCells:(0,l.Z)(this,m).fetchNumberOfCells()})}},7317:function(e,t,r){"use strict";r.d(t,{Cy:function(){return p},ue:function(){return Z}});var n=r(1413),i=r(5671),a=r(3144),s=r(8652),o=r(2346),u=r(3889),l=r(8916),c=r(2793),h=r(5831),f=r(7891),d=r(569),v=r(652),m=r(2269),p="rna_normalization",y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,_=new WeakSet,Z=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,i.Z)(this,e),(0,s.Z)(this,_),(0,o.Z)(this,y,{writable:!0,value:void 0}),(0,o.Z)(this,b,{writable:!0,value:void 0}),(0,o.Z)(this,w,{writable:!0,value:void 0}),(0,o.Z)(this,g,{writable:!0,value:void 0}),!(t instanceof v.E4))throw new Error("'qc' should be a RnaQualityControlState object");if((0,c.Z)(this,y,t),!(r instanceof m.H0))throw new Error("'filter' should be a CellFilteringState object");(0,c.Z)(this,b,r),(0,c.Z)(this,w,null===n?{}:n),(0,c.Z)(this,g,null===a?{}:a),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){f.Yl((0,l.Z)(this,g).matrix),f.Yl((0,l.Z)(this,g).sum_buffer)}},{key:"valid",value:function(){return(0,l.Z)(this,b).fetchFilteredMatrix().has("RNA")}},{key:"fetchNormalizedMatrix",value:function(){return"matrix"in(0,l.Z)(this,g)||(0,u.Z)(this,_,k).call(this),(0,l.Z)(this,g).matrix}},{key:"fetchSizeFactors",value:function(){var e;return(0,l.Z)(this,g).sum_buffer&&(e=f.rS((0,l.Z)(this,g).sum_buffer.length,"Float64Array",(0,l.Z)(this,g),"centered_buffer"),h.v_((0,l.Z)(this,g).sum_buffer,{buffer:e,block:(0,l.Z)(this,b).fetchFilteredBlock()})),e}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,l.Z)(this,w))}},{key:"compute",value:function(e){this.changed=!1,((0,l.Z)(this,y).changed||(0,l.Z)(this,b).changed)&&this.valid()&&(this.changed=!0),this.changed&&(0,u.Z)(this,_,k).call(this)}}],[{key:"defaults",value:function(){return{}}}]),e}();function k(){var e=(0,l.Z)(this,b).fetchFilteredMatrix().get("RNA"),t=d.e((0,l.Z)(this,y),(0,l.Z)(this,b),e,(0,l.Z)(this,g),"sum_buffer"),r=(0,l.Z)(this,b).fetchFilteredBlock();f.Yl((0,l.Z)(this,g).matrix),(0,l.Z)(this,g).matrix=h.gk(e,{sizeFactors:t,block:r,allowZeros:!0})}},384:function(e,t,r){"use strict";r.d(t,{Cy:function(){return v},rR:function(){return g}});var n=r(1413),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=r(5831),c=r(7891),h=r(2269),f=r(7317),d=r(8391),v="rna_pca",m=new WeakMap,p=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,g=function(){function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,i.Z)(this,e),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,y,{writable:!0,value:void 0}),(0,s.Z)(this,b,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),!(t instanceof h.H0))throw new Error("'filter' should be a CellFilteringState object");if((0,u.Z)(this,m,t),!(r instanceof f.ue))throw new Error("'norm' should be an RnaNormalizationState object");if((0,u.Z)(this,p,r),!(n instanceof d.$))throw new Error("'feat' should be a FeatureSelectionState object");(0,u.Z)(this,y,n),(0,u.Z)(this,w,null===a?{}:a),(0,u.Z)(this,b,null===o?{}:o),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){c.Yl((0,o.Z)(this,b).hvg_buffer),c.Yl((0,o.Z)(this,b).pcs)}},{key:"valid",value:function(){return(0,o.Z)(this,p).valid()}},{key:"fetchPCs",value:function(){return(0,o.Z)(this,b).pcs}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,o.Z)(this,w))}},{key:"compute",value:function(e){var t=e.num_hvgs,r=e.num_pcs,n=e.block_method;if(this.changed=!1,((0,o.Z)(this,y).changed||t!==(0,o.Z)(this,w).num_hvgs)&&(this.valid()&&(_(t,(0,o.Z)(this,y),(0,o.Z)(this,b)),this.changed=!0),(0,o.Z)(this,w).num_hvgs=t),this.changed||(0,o.Z)(this,p).changed||r!==(0,o.Z)(this,w).num_pcs||n!==(0,o.Z)(this,w).block_method){if(c.Yl((0,o.Z)(this,b).pcs),this.valid()){var i=(0,o.Z)(this,b).hvg_buffer,a=(0,o.Z)(this,m).fetchFilteredBlock(),s=(0,o.Z)(this,p).fetchNormalizedMatrix();(0,o.Z)(this,b).pcs=l.aG(s,{features:i,numberOfPCs:r,block:a,blockMethod:n}),this.changed=!0}(0,o.Z)(this,w).num_pcs=r,(0,o.Z)(this,w).block_method=n}}}],[{key:"defaults",value:function(){return{num_hvgs:2e3,num_pcs:20,block_method:"none"}}}]),e}();function _(e,t,r){var n=t.fetchSortedResiduals(),i=c.rS(n.length,"Uint8Array",r,"hvg_buffer");if(e<n.length){var a=n[n.length-e],s=t.fetchResults().residuals({copy:!1});i.array().forEach((function(e,t,r){r[t]=s[t]>=a}))}else i.fill(1);return i}},652:function(e,t,r){"use strict";r.d(t,{Cy:function(){return x},E4:function(){return R}});var n=r(7762),i=r(3324),a=r(4165),s=r(5861),o=r(1413),u=r(5671),l=r(3144),c=r(8652),h=r(4942),f=r(2346),d=r(3889),v=r(3966),m=r(9902),p=r(8916),y=r(2793),b=r(5831),w=r(7462),g=r(7891),_=r(6546),Z=r(9489),k="https://github.com/kanaverse/kana-special-features/releases/download/v1.0.0",x="rna_quality_control",E=new WeakMap,C=new WeakMap,O=new WeakMap,S=new WeakMap,A=new WeakSet,R=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,u.Z)(this,e),(0,c.Z)(this,A),(0,f.Z)(this,E,{writable:!0,value:void 0}),(0,f.Z)(this,C,{writable:!0,value:void 0}),(0,f.Z)(this,O,{writable:!0,value:void 0}),(0,f.Z)(this,S,{writable:!0,value:void 0}),!(t instanceof _.tq))throw new Error("'inputs' should be an InputsState object");(0,y.Z)(this,E,t),(0,y.Z)(this,O,null===r?{}:r),(0,y.Z)(this,C,null===n?{}:n),(0,y.Z)(this,S,!1),this.changed=!1}return(0,l.Z)(e,[{key:"free",value:function(){g.Yl((0,p.Z)(this,C).metrics),g.Yl((0,p.Z)(this,C).filters),g.Yl((0,p.Z)(this,C).metrics_buffer),g.Yl((0,p.Z)(this,C).discard_buffer)}},{key:"valid",value:function(){return(0,p.Z)(this,E).fetchCountMatrix().has("RNA")}},{key:"fetchParameters",value:function(){var e=(0,o.Z)({},(0,p.Z)(this,O));return e.species=w.bl(e.species),e}},{key:"fetchDiscards",value:function(){return(0,p.Z)(this,C).discard_buffer}},{key:"fetchFilters",value:function(){return(0,p.Z)(this,C).filters}},{key:"fetchMetrics",value:function(){return(0,p.Z)(this,C).metrics}},{key:"compute",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){var n,i,s,o,u,l,c,h,f,v,m,y,_,Z,k,x,S,R,N,W,I,z;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.mito_prefix,i=r.nmads,"use_reference_mito"in r?(s=r.automatic,o=r.use_reference_mito,u=r.gene_id_column,l=r.species,c=r.gene_id_type):(s=!0,o=r.use_mito_default,h=e.defaults(),u=h.gene_id_column,l=h.species,c=h.gene_id_type),this.changed=!1,!((0,p.Z)(this,E).changed||s!==(0,p.Z)(this,O).automatic||o!==(0,p.Z)(this,O).use_reference_mito||!s&&(u!==(0,p.Z)(this,O).gene_id_column||!o&&n!==(0,p.Z)(this,O).mito_prefix||o&&(g.xi(l,(0,p.Z)(this,O).species)||c!==(0,p.Z)(this,O).gene_id_type)))){t.next=30;break}if(g.Yl((0,p.Z)(this,C).metrics),!this.valid()){t.next=29;break}if(f=u,v=l,m=c,s&&(y=(0,p.Z)(this,E).guessRnaFeatureTypes(),_=e.configureFeatureParameters(o,y),f=_.gene_id_column,v=_.species,m=_.gene_id_type),Z=(0,p.Z)(this,E).fetchFeatureAnnotations().RNA,k=null==f?Z.rowNames():Z.column(f),(x=g.rS(Z.numberOfRows(),"Uint8Array",(0,p.Z)(this,C),"metrics_buffer")).fill(0),null===k){t.next=24;break}if(!o){t.next=23;break}return t.next=18,(0,d.Z)(this,A,M).call(this,v,m);case 18:S=t.sent,R=x.array(),k.forEach((function(e,t){S.has(e)&&(R[t]=1)})),t.next=24;break;case 23:null!==n&&(N=n.toLowerCase(),R=x.array(),k.forEach((function(e,t){e.toLowerCase().startsWith(N)&&(R[t]=1)})));case 24:W=(0,p.Z)(this,E).fetchCountMatrix().get("RNA"),(0,p.Z)(this,C).metrics=b.wj(W,[x]),this.changed=!0,t.next=30;break;case 29:delete(0,p.Z)(this,C).metrics;case 30:return(0,p.Z)(this,O).automatic=s,(0,p.Z)(this,O).gene_id_column=u,(0,p.Z)(this,O).use_reference_mito=o,(0,p.Z)(this,O).species=w.bl(l),(0,p.Z)(this,O).gene_id_type=c,(0,p.Z)(this,O).mito_prefix=n,(this.changed||i!==(0,p.Z)(this,O).nmads)&&(g.Yl((0,p.Z)(this,C).filters),this.valid()?(I=(0,p.Z)(this,E).fetchBlock(),(0,p.Z)(this,C).filters=b.Lw((0,p.Z)(this,C).metrics,{numberOfMADs:i,block:I}),z=g.rS((0,p.Z)(this,C).metrics.numberOfCells(),"Uint8Array",(0,p.Z)(this,C),"discard_buffer"),(0,p.Z)(this,C).filters.filter((0,p.Z)(this,C).metrics,{block:I,buffer:z}),this.changed=!0):delete(0,p.Z)(this,C).filters,(0,p.Z)(this,O).nmads=i),t.abrupt("return");case 38:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"defaults",value:function(){return{automatic:!0,gene_id_column:null,use_reference_mito:!0,species:[],gene_id_type:"ENSEMBL",mito_prefix:"mt-",nmads:3}}},{key:"configureFeatureParameters",value:function(e,t){var r=null,n={type:"symbol",species:"human",confidence:0};if("row_names"in t){var a=t.row_names;a.confidence>n.confidence&&(e||"symbol"==a.type)&&(n=a)}for(var s=0,o=Object.entries(t.columns);s<o.length;s++){var u=(0,i.Z)(o[s],2),l=u[0],c=u[1];c.confidence>n.confidence&&(e||"symbol"==c.type)&&(n=c,r=l)}return{gene_id_column:r,species:[n.species],gene_id_type:n.type.toUpperCase()}}},{key:"flush",value:function(){(0,v.Z)(e,e,W,{})}},{key:"setDownload",value:function(t){var r=(0,m.Z)(e,e,I);return(0,v.Z)(e,e,I,t),r}}]),e}();function M(e,t){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)((0,a.Z)().mark((function e(t,r){var i,s,o,u,l,c,h,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new Set,s=(0,m.Z)(R,R,W),o=(0,n.Z)(t),e.prev=3,o.s();case 5:if((u=o.n()).done){e.next=19;break}if(l=u.value,(c=l+"-mito-"+r.toLowerCase()+".txt.gz")in s){e.next=16;break}return e.next=11,(0,m.Z)(R,R,I).call(R,k+"/"+c);case 11:return h=e.sent,e.next=14,Z.bw(h,{compression:"gz"});case 14:f=e.sent,s[c]=f;case 16:s[c].forEach((function(e){i.add(e)}));case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:return e.abrupt("return",i);case 28:case"end":return e.stop()}}),e,null,[[3,21,24,27]])})))).apply(this,arguments)}(0,h.Z)(R,"mitochondriaSpecies",["9606","10090","6239","10116","9541","7227","7955","9598"]);var W={writable:!0,value:{}},I={writable:!0,value:g.we}},4414:function(e,t,r){"use strict";r.d(t,{Cy:function(){return v},Xs:function(){return Z}});var n=r(1413),i=r(5671),a=r(3144),s=r(8652),o=r(2346),u=r(3889),l=r(8916),c=r(2793),h=r(5831),f=r(7891),d=r(7625),v="snn_graph_cluster",m=new WeakMap,p=new WeakMap,y=new WeakMap,b=new WeakSet,w=new WeakSet,g=new WeakSet,_=new WeakSet,Z=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,i.Z)(this,e),(0,s.Z)(this,_),(0,s.Z)(this,g),(0,s.Z)(this,w),(0,s.Z)(this,b),(0,o.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,p,{writable:!0,value:void 0}),(0,o.Z)(this,y,{writable:!0,value:void 0}),!(t instanceof d.Xr))throw new Error("'index' should be a State object from './neighbor_index.js'");(0,c.Z)(this,m,t),(0,c.Z)(this,p,null===r?{}:r),(0,c.Z)(this,y,null===n?{}:n),this.changed=!1}return(0,a.Z)(e,[{key:"free",value:function(){f.Yl((0,l.Z)(this,y).neighbors),f.Yl((0,l.Z)(this,y).graph),f.Yl((0,l.Z)(this,y).clusters)}},{key:"fetchClusters",value:function(){if((0,u.Z)(this,b,k).call(this))return(0,l.Z)(this,y).clusters.membership({copy:"view"});throw"cannot fetch SNN clusters from an invalid state"}},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,l.Z)(this,p))}},{key:"compute",value:function(e,t){var r=t.k,n=t.scheme,i=t.algorithm,a=t.multilevel_resolution,s=t.leiden_resolution,o=t.walktrap_steps;this.changed=!1,((0,l.Z)(this,m).changed||r!==(0,l.Z)(this,p).k)&&(f.Yl((0,l.Z)(this,y).neighbors),e?(0,u.Z)(this,w,x).call(this,r):delete(0,l.Z)(this,y).neighbors,(0,l.Z)(this,p).k=r,this.changed=!0),(this.changed||n!==(0,l.Z)(this,p).scheme)&&(f.Yl((0,l.Z)(this,y).graph),e?(0,u.Z)(this,g,E).call(this,n):delete(0,l.Z)(this,y).graph,(0,l.Z)(this,p).scheme=n,this.changed=!0),(this.changed||i!==(0,l.Z)(this,p).algorithm||a!==(0,l.Z)(this,p).multilevel_resolution||s!==(0,l.Z)(this,p).leiden_resolution||o!==(0,l.Z)(this,p).walktrap_steps||!(0,u.Z)(this,b,k).call(this)&&e)&&(f.Yl((0,l.Z)(this,y).clusters),e?(0,u.Z)(this,_,C).call(this,i,a,s,o):delete(0,l.Z)(this,y).clusters,(0,l.Z)(this,p).algorithm=i,(0,l.Z)(this,p).multilevel_resolution=a,(0,l.Z)(this,p).leiden_resolution=s,(0,l.Z)(this,p).walktrap_steps=o,this.changed=!0)}}],[{key:"defaults",value:function(){return{k:10,scheme:"rank",algorithm:"multilevel",multilevel_resolution:1,leiden_resolution:1,walktrap_steps:4}}}]),e}();function k(){return"clusters"in(0,l.Z)(this,y)}function x(e){(0,l.Z)(this,y).neighbors=h.wf((0,l.Z)(this,m).fetchIndex(),e)}function E(e){"neighbors"in(0,l.Z)(this,y)||(0,u.Z)(this,w,x).call(this,(0,l.Z)(this,p).k),(0,l.Z)(this,y).graph=h.bD((0,l.Z)(this,y).neighbors,{scheme:e})}function C(e,t,r,n){"graph"in(0,l.Z)(this,y)||(0,u.Z)(this,g,E).call(this,(0,l.Z)(this,p).scheme),(0,l.Z)(this,y).clusters=h.ZI((0,l.Z)(this,y).graph,{method:e,multiLevelResolution:t,leidenResolution:r,leidenModularityObjective:!0,walktrapSteps:n})}},3060:function(e,t,r){"use strict";r.d(t,{T:function(){return x}});var n=r(4165),i=r(5861),a=r(1413),s=r(5671),o=r(3144),u=r(8652),l=r(2346),c=r(3889),h=r(8916),f=r(2793),d=r(5831),v=r(4071),m=(r(7891),r(7625)),p=r(6269),y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,_=new WeakMap,Z=new WeakMap,k=new WeakSet,x=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,s.Z)(this,e),(0,u.Z)(this,k),(0,l.Z)(this,y,{writable:!0,value:void 0}),(0,l.Z)(this,b,{writable:!0,value:void 0}),(0,l.Z)(this,w,{writable:!0,value:void 0}),(0,l.Z)(this,g,{writable:!0,value:void 0}),(0,l.Z)(this,_,{writable:!0,value:void 0}),(0,l.Z)(this,Z,{writable:!0,value:void 0}),!(t instanceof m.Xr))throw new Error("'index' should be a State object from './neighbor_index.js'");(0,f.Z)(this,y,t),(0,f.Z)(this,b,null===r?{}:r),(0,f.Z)(this,w,n),this.changed=!1;var i=p.k(),a=v.Ig(i,v.yc),o=a.worker_id,c=a.ready;(0,f.Z)(this,g,o),(0,f.Z)(this,_,c),(0,f.Z)(this,Z,null)}return(0,o.Z)(e,[{key:"ready",value:function(){return(0,h.Z)(this,_)}},{key:"free",value:function(){return v.qM((0,h.Z)(this,g))}},{key:"fetchParameters",value:function(){return(0,a.Z)({},(0,h.Z)(this,b))}},{key:"fetchResults",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t,r,i,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a.length>0&&void 0!==a[0]?a[0]:{}).copy,r=void 0===t||t,null===(0,h.Z)(this,w)){e.next=8;break}return i={x:(0,h.Z)(this,w).x,y:(0,h.Z)(this,w).y},r&&(i.x=i.x.slice(),i.y=i.y.slice()),i.iterations=(0,h.Z)(this,b).iterations,e.abrupt("return",i);case 8:return e.next=10,(0,h.Z)(this,Z);case 10:return e.abrupt("return",v.cE((0,h.Z)(this,g),{cmd:"FETCH"}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"compute",value:function(e){var t=e.perplexity,r=e.iterations,n=e.animate,i=!(0,h.Z)(this,y).changed&&t===(0,h.Z)(this,b).perplexity;return i&&r==(0,h.Z)(this,b).iterations?(this.changed=!1,new Promise((function(e){return e(null)}))):(null!==(0,h.Z)(this,w)&&(i=!1,(0,f.Z)(this,w,null)),(0,c.Z)(this,k,E).call(this,t,r,n,!i),(0,h.Z)(this,b).perplexity=t,(0,h.Z)(this,b).iterations=r,(0,h.Z)(this,b).animate=n,this.changed=!0,(0,h.Z)(this,Z))}},{key:"animate",value:function(){return null!==(0,h.Z)(this,w)?((0,f.Z)(this,w,null),(0,c.Z)(this,k,E).call(this,(0,h.Z)(this,b).perplexity,(0,h.Z)(this,b).iterations,!0,!0),(0,h.Z)(this,Z).then((function(e){return{type:"tsne_rerun",data:{status:"SUCCESS"}}}))):v.cE((0,h.Z)(this,g),{cmd:"RERUN"})}}]),e}();function E(e,t,r,n){var i=null;if(n){var a=d.Tk(e);i=v.AB((0,h.Z)(this,y),a)}var s={perplexity:e,iterations:t,animate:r};(0,f.Z)(this,Z,v.Vi((0,h.Z)(this,g),s,i))}},7270:function(e,t,r){"use strict";r.d(t,{D:function(){return k}});var n=r(1413),i=r(4165),a=r(5861),s=r(5671),o=r(3144),u=r(8652),l=r(2346),c=r(3889),h=r(8916),f=r(2793),d=(r(5831),r(4071)),v=(r(7891),r(7625)),m=r(6269),p=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,_=new WeakMap,Z=new WeakSet,k=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,s.Z)(this,e),(0,u.Z)(this,Z),(0,l.Z)(this,p,{writable:!0,value:void 0}),(0,l.Z)(this,y,{writable:!0,value:void 0}),(0,l.Z)(this,b,{writable:!0,value:void 0}),(0,l.Z)(this,w,{writable:!0,value:void 0}),(0,l.Z)(this,g,{writable:!0,value:void 0}),(0,l.Z)(this,_,{writable:!0,value:void 0}),!(t instanceof v.Xr))throw new Error("'index' should be a State object from './neighbor_index.js'");(0,f.Z)(this,p,t),(0,f.Z)(this,y,null===r?{}:r),(0,f.Z)(this,b,n),this.changed=!1;var i=m.u(),a=d.Ig(i,d.yc),o=a.worker_id,c=a.ready;(0,f.Z)(this,w,o),(0,f.Z)(this,g,c),(0,f.Z)(this,_,null)}return(0,o.Z)(e,[{key:"ready",value:function(){return(0,h.Z)(this,g)}},{key:"free",value:function(){return d.qM((0,h.Z)(this,w))}},{key:"fetchResults",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,r,n,a=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a.length>0&&void 0!==a[0]?a[0]:{}).copy,r=void 0===t||t,null===(0,h.Z)(this,b)){e.next=8;break}return n={x:(0,h.Z)(this,b).x,y:(0,h.Z)(this,b).y},r&&(n.x=n.x.slice(),n.y=n.y.slice()),n.iterations=(0,h.Z)(this,y).num_epochs,e.abrupt("return",n);case 8:return e.next=10,(0,h.Z)(this,_);case 10:return e.abrupt("return",d.cE((0,h.Z)(this,w),{cmd:"FETCH"}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchParameters",value:function(){return(0,n.Z)({},(0,h.Z)(this,y))}},{key:"compute",value:function(e){var t=e.num_neighbors,r=e.num_epochs,n=e.min_dist,i=e.animate,a=!(0,h.Z)(this,p).changed&&(0,h.Z)(this,y).num_neighbors===t;return a&&r===(0,h.Z)(this,y).num_epochs&&n===(0,h.Z)(this,y).min_dist?(this.changed=!1,new Promise((function(e){return e(null)}))):(null!==(0,h.Z)(this,b)&&(a=!1,(0,f.Z)(this,b,null)),(0,c.Z)(this,Z,x).call(this,t,r,n,i,!a),(0,h.Z)(this,y).num_neighbors=t,(0,h.Z)(this,y).num_epochs=r,(0,h.Z)(this,y).min_dist=n,(0,h.Z)(this,y).animate=i,this.changed=!0,(0,h.Z)(this,_))}},{key:"animate",value:function(){return null!==(0,h.Z)(this,b)?((0,f.Z)(this,b,null),(0,c.Z)(this,Z,x).call(this,(0,h.Z)(this,y).num_neighbors,(0,h.Z)(this,y).num_epochs,(0,h.Z)(this,y).min_dist,!0,!0),(0,h.Z)(this,_).then((function(e){return{type:"umap_rerun",data:{status:"SUCCESS"}}}))):d.cE((0,h.Z)(this,w),{cmd:"RERUN"})}}]),e}();function x(e,t,r,n,i){var a=null;i&&(a=d.AB((0,h.Z)(this,p),e));var s={num_neighbors:e,num_epochs:t,min_dist:r,animate:n};(0,f.Z)(this,_,d.Vi((0,h.Z)(this,w),s,a))}},8794:function(e,t,r){"use strict";function n(e,t){e.onmessage=t}function i(e,t,r){e.postMessage(t,r)}function a(e){e.terminate()}r.d(t,{Ae:function(){return a},bG:function(){return i},jC:function(){return n}})},7891:function(e,t,r){"use strict";r.d(t,{Mc:function(){return f},N2:function(){return d},XZ:function(){return y},Yl:function(){return u},rS:function(){return h},we:function(){return v},xi:function(){return c},zS:function(){return p}});var n=r(4165),i=r(5861),a=r(7762),s=r(3324),o=r(5831);function u(e){o.gd(e)}function l(e,t,r,n){if(!r&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("parameters cannot contain ArrayBuffers or their views");if(!n&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new Error("parameters cannot contain ArrayBuffers or their views")}function c(e,t){if(typeof e!=typeof t)return l(e,t,!1,!1),!0;if("object"!=typeof e)return e!=t;var r=null===e,n=null===t;if(r!==n)return l(e,t,r,n),!0;if(r)return!1;var i=e instanceof Array,a=t instanceof Array;if(i!=a)return l(e,t,i,a),!0;if(i){if(e.length!=t.length)return!0;for(var s=0;s<e.length;s++)if(c(e[s],t[s]))return!0;return!1}l(e,t,!1,!1);var o=Object.keys(e),u=Object.keys(t);if(o.length!=u.length)return!0;o.sort(),u.sort();for(s=0;s<o.length;s++)if(o[s]!=u[s])return!0;for(var h=0,f=o;h<f.length;h++){var d=f[h];if(c(e[d],t[d]))return!0}return!1}function h(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"buffer",i=!0;if(n in r){var a=r[n];a.size!=e||a.constructor.className!=t||null!==a.owner?a.free():i=!1}if(i)switch(t){case"Uint8Array":r[n]=o.TS(e);break;case"Int32Array":r[n]=o.Wf(e);break;case"Float64Array":r[n]=o.RJ(e);break;default:throw"allocating '"+t+"' not yet supported"}return r[n]}function f(e,t){for(var r=[],n=0,i=Object.entries(e);n<i.length;n++){var a=(0,s.Z)(i[n],2),o=a[0];a[1].valid()&&r.push(o)}if(0==r.length)throw new Error("expected at least one valid upstream "+t+" state");return r}function d(e,t){if(null!==t){var r,n=(0,a.Z)(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("subset indices are out of range")}}catch(o){n.e(o)}finally{n.f()}}for(var s=1;s<e.length;s++)if(e[s]<=e[s-1])throw new Error("subset indices must be sorted and unique")}function v(e){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("failed to fetch content at "+t+"("+r.status+")");case 5:return e.t0=Uint8Array,e.next=8,r.arrayBuffer();case 8:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t={columns:{}},r=e.rowNames();null!==r&&(t.row_names=o.gn(r,{forceTaxonomy:!0}));var n,i=(0,a.Z)(e.columnNames());try{for(i.s();!(n=i.n()).done;){var s=n.value;e.column(s)instanceof Array&&(t.columns[s]=o.gn(e.column(s),{forceTaxonomy:!0}))}}catch(u){i.e(u)}finally{i.f()}return t}function y(e){var t=e[0].length,r={arrays:[],retain:null},n=new Uint8Array(t);n.fill(0);var i,s=(0,a.Z)(e);try{for(s.s();!(i=s.n()).done;){var u=i.value,l=o.Yh(u,{action:"none",placeholder:-1});r.arrays.push(l),l.ids.forEach((function(e,t){-1==e&&(n[t]=1)}))}}catch(m){s.e(m)}finally{s.f()}var c=0;if(n.forEach((function(e){c+=e})),0==c)return r;for(var h=new Int32Array(t-c),f=0,d=0;d<t;d++)0==n[d]&&(h[f]=d,f++);r.retain=h;var v=function(){var e=r.arrays[d],t=o.DS(e.ids,h),n=o.D4(t).map((function(t){return e.levels[t]}));o.gd(e.ids),e.ids=t,e.levels=n};for(d=0;d<r.arrays.length;d++)v();return r}},818:function(e,t,r){"use strict";r.d(t,{Bh:function(){return o},c9:function(){return l},eo:function(){return u},iG:function(){return a},jJ:function(){return s}});var n=r(7762),i=r(5831),a={min:0,mean:1,min_rank:4};function s(e,t,r){var n;r&&void 0!==r||(r="cohen-min-rank");var i,a=!1,s=1;if(r.match(/-min$/)?s=0:r.match(/-min-rank$/)&&(a=!0,s=4),r.match(/^cohen-/))i=e.cohen(t,{summary:s,copy:!1});else if(r.match(/^auc-/))i=e.auc(t,{summary:s,copy:!1});else if(r.match(/^lfc-/))i=e.lfc(t,{summary:s,copy:!1});else{if(!r.match(/^delta-d-/))throw"unknown rank type '"+r+"'";i=e.deltaDetected(t,{summary:s,copy:!1})}n=new Int32Array(i.length);for(var o=0;o<n.length;o++)n[o]=o;a?n.sort((function(e,t){return i[e]-i[t]})):n.sort((function(e,t){return i[t]-i[e]}));var u=function(e){for(var t=new Float64Array(e.length),r=0;r<n.length;r++)t[r]=e[n[r]];return t},l=u(e.detected(t,{copy:!1})),c=u(e.means(t,{copy:!1})),h=u(e.lfc(t,{summary:1,copy:!1})),f=u(e.deltaDetected(t,{summary:1,copy:!1}));return{ordering:n,means:c,detected:l,lfc:h,delta_detected:f}}function o(e,t,r){var n=e<t,i=n?t:e;i in r||(r[i]={});var a=r[i],s=n?e:t,o=!(s in a);return o&&(a[s]={}),{cached:a[s],run:o,left_small:n}}function u(e){if(e){for(var t=0,r=Object.values(e);t<r.length;t++)for(var n=r[t],a=0,s=Object.values(n);a<s.length;a++)for(var o=s[a],u=0,l=Object.values(o);u<l.length;u++){var c=l[u];i.gd(c)}for(var h=0,f=Object.keys(e);h<f.length;h++){delete e[f[h]]}}}function l(e,t,r,a,s,o,u){var l=null;null!==r&&(l=i.DS(r,a),i.D4(l));var c,h=(0,n.Z)(e.available());try{for(h.s();!(c=h.n()).done;){var f=c.value,d=e.get(f),v=void 0;try{v=i.ZW(d,a),s[f]=i.y5(v,t,{block:l,lfcThreshold:o,computeAuc:u})}finally{i.gd(v)}}}catch(m){h.e(m)}finally{h.f()}}},569:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var n=r(7891);function i(e,t,r,i,a){var s=n.rS(r.numberOfColumns(),"Float64Array",i,a),o=t.fetchDiscards(),u=e.fetchMetrics().sums({copy:!1});if(null==o)s.set(u);else{var l=s.array(),c=0;if(o.forEach((function(e,t){if(!e){if(c==s.length)throw new Error("normalization and filtering are not in sync");l[c]=u[t],c++}})),c!==s.length)throw new Error("normalization and filtering are not in sync")}return s}},7462:function(e,t,r){"use strict";r.d(t,{bl:function(){return A},NR:function(){return S},NE:function(){return Y},Nd:function(){return O},Tm:function(){return R},sj:function(){return q},Lm:function(){return E}});var n=r(7762),i=r(5671),a=r(3144),s=r(2963),o=r(1120);function u(){return u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,o.Z)(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},u.apply(this,arguments)}var l=r(136),c=r(9388),h=r(4942),f=r(1413),d=r(3324);function v(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function m(e){return e.constructor==Array||ArrayBuffer.isView(e)}function p(e,t){return new Error(e+" should have length equal to "+t)}function y(e,t){var r,i=(0,n.Z)(e);try{for(i.s();!(r=i.n()).done;){if("string"!==typeof r.value)throw new Error(t+" array should only contain strings")}}catch(a){i.e(a)}finally{i.f()}}function b(e,t,r,n){if(y(e,t),e.length!=r)throw p(t+" array",n)}function w(e){var t=0;return e.forEach((function(e){t+=e})),t}function g(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!0,i=0;i<e.length;i++)null!==e[i]&&(n=!1);if(n)return null;null===r&&(r=w(t));var a=new Array(r),s=0;for(i=0;i<e.length;i++){var o=e[i];null===o?(a.fill("",s,s+t[i]),s+=t[i]):o.forEach((function(e){a[s]=e,s++}))}return a}function _(e){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=r;return t}function Z(e){return e instanceof Int32Array?e:new Int32Array(e)}function k(e,t){var r,i=(0,n.Z)(e);try{for(i.s();!(r=i.n()).done;){if(r.value<0)throw new Error("detected a negative entry in '"+t+"'")}}catch(a){i.e(a)}finally{i.f()}}function x(e){if(e.constructor==Object){for(var t=new Map,r=0,n=Object.entries(e);r<n.length;r++){var i=(0,d.Z)(n[r],2),a=i[0],s=i[1];t.set(a,s)}return t}if(!(e instanceof Map))throw new Error("'x' should be either an object or Map");return e}function E(e){var t={};return e.forEach((function(e,r){e in t||(t[e]=[]),t[e].push(r)})),t}function C(e){if("_bioconductor_LENGTH"in e)return e._bioconductor_LENGTH();if(!m(e))throw new Error("no method for 'LENGTH' in '"+e.constructor.name+"' instance");return e.length}function O(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allowView,n=void 0!==r&&r;if("_bioconductor_SLICE"in e){var i=new e.constructor;return e._bioconductor_SLICE(i,t,{allowView:n}),i}if(!m(e))throw new Error("no method for 'SLICE' in '"+e.constructor.name+"' instance");if(t.constructor==Object)return n&&ArrayBuffer.isView(e)?e.subarray(t.start,t.end):e.slice(t.start,t.end);var a=new e.constructor(t.length);return t.forEach((function(t,r){a[r]=e[t]})),a}function S(e){var t=e[0];if("_bioconductor_COMBINE"in t){var r=new t.constructor;return t._bioconductor_COMBINE(r,e),r}if(!m(t))throw new Error("no method for 'COMBINE' in '"+t.constructor.name+"' instance");var i,a,s,o=0,u=t.constructor,l=(0,n.Z)(e);try{for(l.s();!(i=l.n()).done;){var c=i.value;o+=c.length,a=u,s=c.constructor,u=a==s?a:a==Array||s==Array||a==BigInt64Array||s==BigInt64Array||a==BigUint64Array||s==BigUint64Array?Array:Float64Array}}catch(y){l.e(y)}finally{l.f()}var h,f=new u(o),d=0,v=(0,n.Z)(e);try{for(v.s();!(h=v.n()).done;){var p=h.value;"set"in f?(f.set(p,d),d+=p.length):p.forEach((function(e){f[d]=e,d++}))}}catch(y){v.e(y)}finally{v.f()}return f}function A(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).deepCopy,r=void 0===t||t;if(e instanceof Object){var i={deepCopy:r};if("_bioconductor_CLONE"in e){var a=new e.constructor;return e._bioconductor_CLONE(a,i),a}if(m(e))return e.constructor==Array?e.map((function(e){return A(e,i)})):r?e.slice():e.subarray();if(e.constructor==Object){if(r){for(var s={},o=0,u=Object.entries(e);o<u.length;o++){var l=(0,d.Z)(u[o],2),c=l[0],h=l[1];s[c]=A(h)}return s}return(0,f.Z)({},e)}if(e.constructor==Map){var v,p=new Map,y=(0,n.Z)(e);try{for(y.s();!(v=y.n()).done;){var b=(0,d.Z)(v.value,2),w=b[0],g=b[1];p.set(w,r?A(g):g)}}catch(E){y.e(E)}finally{y.f()}return p}if(e.constructor==Set){var _,Z=new Set,k=(0,n.Z)(e);try{for(k.s();!(_=k.n()).done;){var x=_.value;Z.add(r?A(x):x)}}catch(E){k.e(E)}finally{k.f()}return Z}throw new Error("unknown CLONE operation for instance of class '"+e.constructor.name+"'")}return e}function R(e,t){if(t.constructor!=Object&&(t=E(t)),"_bioconductor_SPLIT"in e)return e._bioconductor_SPLIT(t);for(var r={},n=0,i=Object.entries(t);n<i.length;n++){var a=(0,d.Z)(i[n],2),s=a[0],o=a[1];r[s]=O(e,o)}return r}function M(e){if(!("_bioconductor_NUMBER_OF_ROWS"in e))throw new Error("no 'NUMBER_OF_ROWS' method available for '"+e.constructor.name+"' instance");return e._bioconductor_NUMBER_OF_ROWS()}function N(e){if(!("_bioconductor_NUMBER_OF_COLUMNS"in e))throw new Error("no 'NUMBER_OF_COLUMNS' method available for '"+e.constructor.name+"' instance");return e._bioconductor_NUMBER_OF_COLUMNS()}function W(e,t,r){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allowView,i=void 0!==n&&n;if(!("_bioconductor_SLICE_2D"in e))throw new Error("no 'SLICE_2D' method available for '"+e.constructor.name+"' instance");var a=new e.constructor;return e._bioconductor_SLICE_2D(a,t,r,{allowView:i}),a}function I(e){var t=e[0];if(!("_bioconductor_COMBINE_ROWS"in t))throw new Error("no 'COMBINE_ROWS' method available for '"+t.constructor.name+"' instance");var r=new t.constructor;return t._bioconductor_COMBINE_ROWS(r,e),r}function z(e){var t=e[0];if(!("_bioconductor_COMBINE_COLUMNS"in t))throw new Error("no 'COMBINE_COLUMNS' method available for '"+t.constructor.name+"' instance");var r=new t.constructor;return t._bioconductor_COMBINE_COLUMNS(r,e),r}function D(e,t){return t?e:A(e,{deepCopy:!1})}function F(e,t){return t?A(e):e}var j=function(){function e(t){(0,i.Z)(this,e),0!=arguments.length&&(this._metadata=x(t))}return(0,a.Z)(e,[{key:"metadata",value:function(){return this._metadata}},{key:"setMetadata",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=D(this,void 0!==t&&t);return r._metadata=x(e),r}},{key:"$setMetadata",value:function(e){return this.setMetadata(e,{inPlace:!0})}},{key:"_bioconductor_CLONE",value:function(e,t){var r=t.deepCopy,n=void 0===r||r;e._metadata=F(this._metadata,n)}}]),e}(),P=r(8652),T=r(3889),B=new WeakSet,L=function(){function e(t,r){if((0,i.Z)(this,e),(0,P.Z)(this,B),0!=arguments.length){t=x(t);var n=Array.from(t.keys());if(null!==r){b(r,"'order'",n.length,"the length of 'entries'");var a=r.slice().sort();if(n.sort(),!v(a,n))throw new Error("values of 'order' should be the same as the keys of 'entries'")}else r=n;this._entries=t,this._order=r}}return(0,a.Z)(e,[{key:"names",value:function(){return this._order}},{key:"numberOfEntries",value:function(){return this._order.length}},{key:"entry",value:function(e){if("string"==typeof e){if(!this._entries.has(e))throw new Error("no entry '"+e+"' present in this "+this.constructor.className);return this._entries.get(e)}return(0,T.Z)(this,B,U).call(this,e),this._entries.get(this._order[e])}},{key:"has",value:function(e){return this._entries.has(e)}},{key:"delete",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);if(r||(n._order=n._order.slice(),n._entries=new Map(n._entries)),"string"==typeof e){var i=n._order.indexOf(e);if(i<0)throw new Error("no entry '"+e+"' present in this "+this.constructor.className);n._order.splice(i,1),n._entries.delete(e)}else{(0,T.Z)(this,B,U).call(this,e);var a=n._order[e];n._order.splice(e,1),n._entries.delete(a)}return n}},{key:"set",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,n=void 0!==r&&r,i=D(this,n);return n||(i._entries=new Map(i._entries)),"string"==typeof e?(i._entries.has(e)||(n||(i._order=i._order.slice()),i._order.push(e)),i._entries.set(e,t)):((0,T.Z)(this,B,U).call(this,e),i._entries.set(i._order[e],t)),i}},{key:"setNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;b(e,"replacement 'names'",this._order.length,"length of 'names()'");for(var n=new Map,i=0;i<e.length;i++){if(n.has(e[i]))throw new Error("detected duplicate value '"+e[i]+"' in replacement 'names'");n.set(e[i],this._entries.get(this._order[i]))}var a=D(this,r);return a._entries=n,a._order=e,a}},{key:"slice",value:function(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,i=void 0!==r&&r,a=new Map,s=[],o=(0,n.Z)(e);try{for(o.s();!(t=o.n()).done;){var u=t.value;if("string"!=typeof u&&((0,T.Z)(this,B,U).call(this,u),u=this._order[u]),a.has(u))throw new Error("duplicate entries detected in slice request");if(!this._entries.has(u))throw new Error("slice contains missing entry '"+u+"' ");a.set(u,this._entries.get(u)),s.push(u)}}catch(c){o.e(c)}finally{o.f()}var l=D(this,i);return l._entries=a,l._order=s,l}},{key:"reorder",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;if(e.length!==this._order.length)throw p("reordered indices","the number of existing entries");var i,a=[],s=(0,n.Z)(e);try{for(s.s();!(i=s.n()).done;){var o=i.value;if("string"!=typeof o&&((0,T.Z)(this,B,U).call(this,o),o=this._order[o]),!this._entries.has(o))throw new Error("missing entry '"+o+"' among the reordered indices");a.push(o)}}catch(l){s.e(l)}finally{s.f()}var u=D(this,r);return u._order=a,u}},{key:"_bioconductor_CLONE",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).deepCopy,r=void 0===t||t;e._entries=r?A(this._entries):this._entries,e._order=r?A(this._order):this._order}},{key:"apply",value:function(t){var r,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,a=void 0!==i&&i,s=a?this._entries:new Map,o=(0,n.Z)(this._entries);try{for(o.s();!(r=o.n()).done;){var u=(0,d.Z)(r.value,2),l=u[0],c=u[1];s.set(l,t(c))}}catch(h){o.e(h)}finally{o.f()}return a?this:new e(s,this._order)}}],[{key:"parallelCombine",value:function(t,r){for(var i=t[0]._order,a=1;a<t.length;a++)if(!v(i,t[a]._order))throw new Error("detected differences in names between first object and object "+String(a)+" to be combined");var s,o=new Map,u=(0,n.Z)(i);try{var l=function(){var e=s.value,n=t.map((function(t){return t._entries.get(e)}));o.set(e,r(n))};for(u.s();!(s=u.n()).done;)l()}catch(c){u.e(c)}finally{u.f()}return new e(o,i)}}]),e}();function U(e){if(e<0||e>=this._order.length)throw new Error(" index '"+String(e)+"' out of range for this "+this.constructor.className)}(0,h.Z)(L,"className","InternalList");var Y=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.numberOfRows,l=void 0===u?null:u,c=o.rowNames,h=void 0===c?null:c,f=o.columnOrder,d=void 0===f?null:f,v=o.metadata,m=void 0===v?{}:v;if((0,i.Z)(this,r),0==arguments.length)return a=t.call(this),(0,s.Z)(a);(a=t.call(this,m))._numberOfRows=l,a._rowNames=h;try{a._columns=new L(e,d)}catch(_){throw new Error("failed to initialize columns for this "+a.constructor.className+"; "+_.message,{cause:_})}var p,y=(0,n.Z)(a._columns.names());try{for(y.s();!(p=y.n()).done;){var w=p.value,g=C(a._columns.entry(w));if(null==a._numberOfRows)a._numberOfRows=g;else if(g!=a._numberOfRows)throw new Error("expected all arrays in 'columns' to have equal length")}}catch(Z){y.e(Z)}finally{y.f()}return null!=h&&(null==a._numberOfRows&&(a._numberOfRows=h.length),b(h,"'rowNames'",a._numberOfRows,"'numberOfRows' or the length of arrays in 'columns'")),null==a._numberOfRows&&(a._numberOfRows=0),(0,s.Z)(a)}return(0,a.Z)(r,[{key:"rowNames",value:function(){return this._rowNames}},{key:"columnNames",value:function(){return this._columns.names()}},{key:"hasColumn",value:function(e){return this._columns.has(e)}},{key:"numberOfRows",value:function(){return this._numberOfRows}},{key:"numberOfColumns",value:function(){return this._columns.numberOfEntries()}},{key:"column",value:function(e){return this._columns.entry(e)}},{key:"removeColumn",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);return n._columns=this._columns.delete(e,{inPlace:r}),n}},{key:"$removeColumn",value:function(e){return this.removeColumn(e,{inPlace:!0})}},{key:"setColumn",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,n=void 0!==r&&r;if(C(t)!=this._numberOfRows)throw new Error("expected 'value' to have the same length as the number of rows in 'x'");var i=D(this,n);return i._columns=this._columns.set(e,t,{inPlace:n}),i}},{key:"$setColumn",value:function(e,t){return this.setColumn(e,t,{inPlace:!0})}},{key:"setColumnNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);return n._columns=n._columns.setNames(e,{inPlace:r}),n}},{key:"$setColumnNames",value:function(e){return this.setColumnNames(e,{inPlace:!0})}},{key:"setRowNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;null!=e&&b(e,"replacement 'names'",this._numberOfRows,"'numberOfRows()'");var n=D(this,r);return n._rowNames=e,n}},{key:"$setRowNames",value:function(e){return this.setRowNames(e,{inPlace:!0})}},{key:"sliceColumns",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);return n._columns=this._columns.slice(e,{inPlace:r}),n}},{key:"$sliceColumns",value:function(e){return this.sliceColumns(e,{inPlace:!0})}},{key:"_bioconductor_LENGTH",value:function(){return this.numberOfRows()}},{key:"_bioconductor_SLICE",value:function(e,t,r){var n,i=r.allowView,a={allowView:void 0!==i&&i},s=this._columns.apply((function(e){return O(e,t,a)})),o=null==this._rowNames?null:O(this._rowNames,t,a);n=t.constructor==Object?t.end-t.start:t.length,e._rowNames=o,e._columns=s,e._numberOfRows=n,e._metadata=this._metadata}},{key:"_bioconductor_COMBINE",value:function(e,t){var r,i=L.parallelCombine(t.map((function(e){return e._columns})),S),a=[],s=[],o=(0,n.Z)(t);try{for(o.s();!(r=o.n()).done;){var u=r.value;a.push(u.rowNames()),s.push(u.numberOfRows())}}catch(h){o.e(h)}finally{o.f()}var l=w(s),c=g(a,s,l);e._rowNames=c,e._columns=i,e._numberOfRows=l,e._metadata=this._metadata}},{key:"_bioconductor_CLONE",value:function(e,t){var n=t.deepCopy,i=void 0===n||n;u((0,o.Z)(r.prototype),"_bioconductor_CLONE",this).call(this,e,{deepCopy:i}),e._columns=F(this._columns,i),e._rowNames=F(this._rowNames,i),e._numberOfRows=this._numberOfRows}}]),r}(j);function q(e){var t,r=new Set,i=[],a=(0,n.Z)(e);try{for(a.s();!(t=a.n()).done;){var s,o=t.value.columnNames(),u=(0,n.Z)(o);try{for(u.s();!(s=u.n()).done;){var l=s.value;r.has(l)||(r.add(l),i.push(l))}}catch(w){u.e(w)}finally{u.f()}}}catch(w){a.e(w)}finally{a.f()}var c,h=[],f=(0,n.Z)(e);try{for(f.s();!(c=f.n()).done;){var d=c.value,v=new Array(d.numberOfRows());v.fill(null);var m,p=A(d,{deepCopy:!1}),y=(0,n.Z)(i);try{for(y.s();!(m=y.n()).done;){var b=m.value;d.hasColumn(b)||p.$setColumn(b,v)}}catch(w){y.e(w)}finally{y.f()}p._columns=p._columns.reorder(i),h.push(p)}}catch(w){f.e(w)}finally{f.f()}return S(h)}function H(e,t,r){if(null!==e){if(!(e instanceof Y))throw new Error("'elementMetadata' should be a DataFrame");if(C(e)!==t)throw new Error("'elementMetadata' should have the same number of rows as 'LENGTH(<"+r+">)'")}else e=new Y({},{numberOfRows:t});return e}(0,h.Z)(Y,"className","DataFrame");var G=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.names,u=void 0===o?null:o,l=a.elementMetadata,c=void 0===l?null:l,h=a.metadata,f=void 0===h?{}:h;return(0,i.Z)(this,r),0==arguments.length?(n=t.call(this),(0,s.Z)(n)):((n=t.call(this,f))._elementMetadata=H(c,e,n.constructor.className),null!==u&&b(u,"'names'",e,"'LENGTH(<"+n.constructor.className+">)'"),n._names=u,(0,s.Z)(n))}return(0,a.Z)(r,[{key:"elementMetadata",value:function(){return this._elementMetadata}},{key:"names",value:function(){return this._names}},{key:"setElementMetadata",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=D(this,void 0!==t&&t);return r._elementMetadata=H(e,C(r),r.constructor.className),r}},{key:"$setElementMetadata",value:function(e){return this.setElementMetadata(e,{inPlace:!0})}},{key:"setNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;null!==e&&b(e,"replacement 'names'",C(this),"'LENGTH(<"+this.constructor.className+">)'");var n=D(this,r);return n._names=e,n}},{key:"$setNames",value:function(e){return this.setNames(e,{inPlace:!0})}},{key:"_bioconductor_SLICE",value:function(e,t,r){var n=r.allowView,i=void 0!==n&&n;e._elementMetadata=O(this._elementMetadata,t,{allowView:i}),e._names=null===this._names?null:O(this._names,t,{allowView:i}),e._metadata=this._metadata}},{key:"_bioconductor_COMBINE",value:function(e,t){var r,i=[],a=[],s=[],o=(0,n.Z)(t);try{for(o.s();!(r=o.n()).done;){var u=r.value;i.push(u._elementMetadata),a.push(u._names),s.push(C(u))}}catch(l){o.e(l)}finally{o.f()}e._elementMetadata=S(i),e._names=g(a,s)}},{key:"_bioconductor_CLONE",value:function(e,t){var n=t.deepCopy,i=void 0===n||n;u((0,o.Z)(r.prototype),"_bioconductor_CLONE",this).call(this,e,{deepCopy:i}),e._elementMetadata=F(this._elementMetadata,i),e._names=F(this._names,i)}}]),r}(j);function V(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).slice,i=void 0===r?null:r,a=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).slice,i=void 0===r?null:r,a=null==i?e.length:i.length,s=new Int32Array(2*a),o=new Uint8Array(2*a),u=new Int32Array(2*a),l=0,c=function(r){var n=2*l,i=n+1;s[n]=e[r],s[i]=t[r],o[n]=1,o[i]=0,u[n]=l,u[i]=l,l++};if(null===i)for(var h=0;h<a;h++)c(h);else{var f,d=(0,n.Z)(i);try{for(d.s();!(f=d.n()).done;)c(f.value)}catch(E){d.e(E)}finally{d.f()}}var v=_(s.length);v.sort((function(e,t){return s[e]-s[t]}));var m,p=[],y=new Int32Array(a),b=new Int32Array(a),w=null,g=(0,n.Z)(v);try{for(g.s();!(m=g.n()).done;){var Z=m.value,k=s[Z],x=u[Z];k!==w&&(p.push(k),w=k),o[Z]?y[x]=p.length-1:b[x]=p.length-1}}catch(E){g.e(E)}finally{g.f()}return{rank2position:p,startRanks:y,endRanks:b}}(e,t,{slice:i}),s=a.rank2position,o=a.startRanks,u=a.endRanks,l=[$(0,s.length)];if(null===i)for(var c=0;c<o.length;c++)K(o[c],u[c],c,l,0);else for(c=0;c<o.length;c++)K(o[c],u[c],i[c],l,0);var h=s.length>0?s[s.length-1]+1:1;s.push(h);for(var f=0,d=l;f<d.length;f++){var v=d[f];v.left_bound=s[v.left_bound],v.right_bound=s[v.right_bound],v.center=s[v.center];var m=v.overlaps.slice().sort((function(t,r){return e[t]-e[r]})),p=v.overlaps.sort((function(e,r){return t[r]-t[e]}));v.overlaps={start:m.map((function(t){return[e[t],t]})),end:p.map((function(e){return[t[e],e]}))}}return l}function $(e,t){return{left_bound:e,right_bound:t,center:e+Math.floor((t-e)/2),left_node:null,right_node:null,overlaps:[]}}function K(e,t,r,n,i){var a=n[i];e>a.center?(null===a.right_node&&(a.right_node=n.length,n.push($(a.center,a.right_bound))),K(e,t,r,n,a.right_node)):t<a.center||t==a.center&&t>e?(null===a.left_node&&(a.left_node=n.length,n.push($(a.left_bound,a.center))),K(e,t,r,n,a.left_node)):a.overlaps.push(r)}function J(e,t,r){var n=[];return e>r.right_bound||t<r.left_bound||t==r.left_bound&&t>e||X(e,t,r,0,n),n}function X(e,t,r,i,a){var s=r[i];if(e>s.center){var o,u=(0,n.Z)(s.overlaps.end);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(!(l[0]>e))break;a.push(l[1])}}catch(p){u.e(p)}finally{u.f()}null!==s.right_node&&X(e,t,r,s.right_node,a)}else if(t<s.center||t==s.center&&t>e){var c,h=(0,n.Z)(s.overlaps.start);try{for(h.s();!(c=h.n()).done;){var f=c.value;if(!(f[0]<t||f[0]==t&&e==t))break;a.push(f[1])}}catch(p){h.e(p)}finally{h.f()}null!==s.left_node&&X(e,t,r,s.left_node,a)}else{var d,v=(0,n.Z)(s.overlaps.start);try{for(v.s();!(d=v.n()).done;){var m=d.value;a.push(m[1])}}catch(p){v.e(p)}finally{v.f()}t>s.center&&null!==s.right_node&&X(e,t,r,s.right_node,a),e<s.center&&null!==s.left_node&&X(e,t,r,s.left_node,a)}}var Q=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.names,l=void 0===u?null:u,c=o.elementMetadata,h=void 0===c?null:c,f=o.metadata,d=void 0===f?{}:f;if((0,i.Z)(this,r),0==arguments.length)return a=t.call(this),(0,s.Z)(a);if((a=t.call(this,e.length,{names:l,elementMetadata:h,metadata:d}))._start=Z(e),k(a._start,"start"),a._width=Z(n),k(a._width,"width"),a._start.length!==a._width.length)throw new Error("'start' and 'width' should have the same length");return(0,s.Z)(a)}return(0,a.Z)(r,[{key:"start",value:function(){return this._start}},{key:"end",value:function(){var e=this;return this._start.map((function(t,r){return t+e._width[r]}))}},{key:"width",value:function(){return this._width}},{key:"setStart",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=Z(e);if(n.length!==C(this))throw new Error("'start' should be replaced by array of the same length");k(n,"start");var i=D(this,r);return i._start=n,i}},{key:"$setStart",value:function(e){return this.setStart(e,{inPlace:!0})}},{key:"setWidth",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=Z(e);if(n.length!==C(this))throw new Error("'width' should be replaced by array of the same length");k(n,"width");var i=D(this,r);return i._width=n,i}},{key:"$setWidth",value:function(e){return this.setWidth(e,{inPlace:!0})}},{key:"buildOverlapIndex",value:function(){var e=V(this._start,this.end());return new ee(e)}},{key:"_bioconductor_LENGTH",value:function(){return this._start.length}},{key:"_bioconductor_SLICE",value:function(e,t,n){var i=n.allowView,a=void 0!==i&&i;u((0,o.Z)(r.prototype),"_bioconductor_SLICE",this).call(this,e,t,{allowView:a}),e._start=O(this._start,t,{allowView:a}),e._width=O(this._width,t,{allowView:a})}},{key:"_bioconductor_COMBINE",value:function(e,t){u((0,o.Z)(r.prototype),"_bioconductor_COMBINE",this).call(this,e,t);var i,a=[],s=[],l=(0,n.Z)(t);try{for(l.s();!(i=l.n()).done;){var c=i.value;a.push(c._start),s.push(c._width)}}catch(h){l.e(h)}finally{l.f()}e._start=S(a),e._width=S(s)}},{key:"_bioconductor_CLONE",value:function(e,t){var n=t.deepCopy,i=void 0===n||n;u((0,o.Z)(r.prototype),"_bioconductor_CLONE",this).call(this,e,{deepCopy:i}),e._start=F(this._start,i),e._width=F(this._width,i)}}],[{key:"empty",value:function(){return new r(new Int32Array,new Int32Array)}}]),r}(G);(0,h.Z)(Q,"className","IRanges");var ee=function(){function e(t){(0,i.Z)(this,e),this._tree=t}return(0,a.Z)(e,[{key:"overlap",value:function(e){for(var t=C(e),r=new Array(t),n=0;n<t;n++)r[n]=J(e._start[n],e._start[n]+e._width[n],this._tree);return r}}]),e}(),te=r(2415),re=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.strand,l=void 0===u?null:u,c=o.names,h=void 0===c?null:c,f=o.elementMetadata,d=void 0===f?null:f,v=o.metadata,m=void 0===v?{}:v;if((0,i.Z)(this,r),0==arguments.length)return a=t.call(this),(0,s.Z)(a);a=t.call(this,e.length,{names:h,elementMetadata:d,metadata:m}),y(e,"seqnames"),a._seqnames=e;var b=e.length;if(b!==C(n))throw p("'ranges'","'seqnames'");if(a._ranges=n,null!==l){if(b!==l.length)throw p("'strand'","'seqnames'");l=(0,te.Z)(r,r,ne).call(r,l),(0,te.Z)(r,r,ie).call(r,l)}else(l=new Int8Array(b)).fill(0);return a._strand=l,(0,s.Z)(a)}return(0,a.Z)(r,[{key:"start",value:function(){return this._ranges.start()}},{key:"end",value:function(){return this._ranges.end()}},{key:"width",value:function(){return this._ranges.width()}},{key:"seqnames",value:function(){return this._seqnames}},{key:"ranges",value:function(){return this._ranges}},{key:"strand",value:function(){return this._strand}},{key:"setSeqnames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;b(e,"replacement 'seqnames'",C(this),"'LENGTH(<GRanges>)'");var n=D(this,r);return n._seqnames=e,n}},{key:"$setSeqnames",value:function(e){return this.setSeqnames(e,{inPlace:!0})}},{key:"setRanges",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;if(!(e instanceof Q))throw new Error("'ranges' should be an IRanges object");if(C(e)!==C(this._ranges))throw p("replacement 'ranges'","'LENGTH(<GRanges>)'");var n=D(this,r);return n._ranges=e,n}},{key:"$setRanges",value:function(e){return this.setRanges(e,{inPlace:!0})}},{key:"setStrand",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,n=void 0!==t&&t;if(this._strand.length!==e.length)throw p("'strand'","'seqnames'");e=(0,te.Z)(r,r,ne).call(r,e),(0,te.Z)(r,r,ie).call(r,e);var i=D(this,n);return i._strand=e,i}},{key:"$setStrand",value:function(e){return this.setStrand(e,{inPlace:!0})}},{key:"buildOverlapIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.restrictToSeqnames,r=void 0===t?null:t,n=e.restrictToStrand,i=void 0===n?null:n,a=R(_(C(this)),this._seqnames),s=this.start(),o=this.end();null!==r&&r instanceof Array&&(r=new Set(r)),null!==i&&i instanceof Array&&(i=new Set(i));for(var u=0,l=Object.keys(a);u<l.length;u++){var c=l[u];if(null===r||r.has(c)){for(var h=a[c],f=R(h,O(this._strand,h)),d=0,v=Object.keys(f);d<v.length;d++){var m=v[d];if(null===i||i.has(Number(m))){var p=f[m];f[m]=V(s,o,{slice:p})}else delete f[m]}a[c]=f}else delete a[c]}return new ae(a)}},{key:"_bioconductor_LENGTH",value:function(){return this._seqnames.length}},{key:"_bioconductor_SLICE",value:function(e,t,n){var i=n.allowView,a=void 0!==i&&i;u((0,o.Z)(r.prototype),"_bioconductor_SLICE",this).call(this,e,t,{allowView:a}),e._seqnames=O(this._seqnames,t,{allowView:a}),e._ranges=O(this._ranges,t,{allowView:a}),e._strand=O(this._strand,t,{allowView:a})}},{key:"_bioconductor_COMBINE",value:function(e,t){u((0,o.Z)(r.prototype),"_bioconductor_COMBINE",this).call(this,e,t);var i,a=[],s=[],l=[],c=(0,n.Z)(t);try{for(c.s();!(i=c.n()).done;){var h=i.value;a.push(h._seqnames),s.push(h._ranges),l.push(h._strand)}}catch(f){c.e(f)}finally{c.f()}e._seqnames=S(a),e._ranges=S(s),e._strand=S(l)}},{key:"_bioconductor_CLONE",value:function(e,t){var n=t.deepCopy,i=void 0===n||n;u((0,o.Z)(r.prototype),"_bioconductor_CLONE",this).call(this,e,{deepCopy:i}),e._seqnames=F(this._seqnames,i),e._ranges=F(this._ranges,i),e._strand=F(this._strand,i)}}],[{key:"empty",value:function(){return new r([],Q.empty())}}]),r}(G);function ne(e){return e instanceof Int8Array?e:new Int8Array(e)}function ie(e){var t,r=(0,n.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i<-1||i>1)throw new Error("'strand' must be -1, 0 or 1")}}catch(a){r.e(a)}finally{r.f()}}var ae=function(){function e(t){(0,i.Z)(this,e),this._index=t}return(0,a.Z)(e,[{key:"overlap",value:function(e){for(var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreStrand,i=void 0===r||r,a=C(e),s=new Array(a),o=e.start(),u=e.end(),l=function(){s[c]=[];var r=s[c],a=e._seqnames[c];if(!(a in t._index))return"continue";var l,h=t._index[a],f=e._strand[c];if(i||0==f)l=Object.keys(h);else{var d=String(f);if(!(d in h))return"continue";l=[d]}var v,m=o[c],p=u[c],y=(0,n.Z)(l);try{for(y.s();!(v=y.n()).done;){J(m,p,h[v.value]).forEach((function(e){return r.push(e)}))}}catch(b){y.e(b)}finally{y.f()}},c=0;c<a;c++)l();return s}}]),e}(),se=r(7326),oe=r(2346),ue=r(2793),le=r(8916),ce=new WeakMap,he=new WeakSet,fe=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.rangeLengths,u=void 0===o?null:o,l=a.names,c=void 0===l?null:l,h=a.elementMetadata,f=void 0===h?null:h,d=a.metadata,v=void 0===d?{}:d;if((0,i.Z)(this,r),0==arguments.length)return n=t.call(this),(0,P.Z)((0,se.Z)(n),he),(0,oe.Z)((0,se.Z)(n),ce,{writable:!0,value:null}),(0,s.Z)(n);if(e.constructor==Array){n=t.call(this,e.length,{names:c,elementMetadata:f,metadata:v}),(0,P.Z)((0,se.Z)(n),he),(0,oe.Z)((0,se.Z)(n),ce,{writable:!0,value:null}),u=new Int32Array(e.length);for(var m=0;m<u.length;m++){if(!(e[m]instanceof re))throw new Error("'ranges' must either be a 'GRanges' or an array of 'GRanges'");u[m]=C(e[m])}e=S(e)}else{if(!(e instanceof re))throw new Error("'ranges' must either be a 'GRanges' or an array of 'GRanges'");if(null==u)throw new Error("'rangeLengths' must be specified when 'ranges' is a 'GRanges'");n=t.call(this,u.length,{names:c,elementMetadata:f,metadata:v}),(0,P.Z)((0,se.Z)(n),he),(0,oe.Z)((0,se.Z)(n),ce,{writable:!0,value:null}),k(u=Z(u))}n._ranges=e,n._rangeLengths=u;var p=(0,te.Z)(r,r,de).call(r,u);if(n._rangeStarts=p.starts,p.total!==C(e))throw new Error("sum of 'rangeLengths' must be equal to the length of 'ranges'");return(0,s.Z)(n)}return(0,a.Z)(r,[{key:"ranges",value:function(){return(0,T.Z)(this,he,ve).call(this),this._ranges}},{key:"rangeStarts",value:function(){return(0,T.Z)(this,he,ve).call(this),this._rangeStarts}},{key:"rangeLengths",value:function(){return(0,T.Z)(this,he,ve).call(this),this._rangeLengths}},{key:"group",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowView,r=void 0!==t&&t;(0,T.Z)(this,he,ve).call(this);var n=this._rangeStarts[e];return O(this._ranges,{start:n,end:n+this._rangeLengths[e]},{allowView:r})}},{key:"numberOfGroups",value:function(){return this._rangeStarts.length}},{key:"setRanges",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;if(!(e instanceof re))throw new Error("'ranges' must be a 'GRanges'");if((0,T.Z)(this,he,ve).call(this),C(e)!==C(this._ranges))throw p("'ranges'","number of ranges");var n=D(this,r);return n._ranges=e,n}},{key:"$setRanges",value:function(e){return this.setRanges(e,{inPlace:!0})}},{key:"setGroup",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,n=void 0!==r&&r,i=D(this,n);null===(0,le.Z)(i,ce)?(0,ue.Z)(i,ce,[]):n||(0,ue.Z)(i,ce,(0,le.Z)(i,ce).slice()),n||(i._rangeStarts=i._rangeStarts.slice(),i._rangeLengths=i._rangeLengths.slice());var a=(0,le.Z)(i,ce).length;return(0,le.Z)(i,ce).push([e,a,t]),i}},{key:"$setGroup",value:function(e,t){return this.setGroup(e,t,{inPlace:!0})}},{key:"buildOverlapIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.restrictToSeqnames,r=void 0===t?null:t,n=e.restrictToStrand,i=void 0===n?null:n;return(0,T.Z)(this,he,ve).call(this),new me(this._ranges.buildOverlapIndex({restrictToSeqnames:r,restrictToStrand:i}),C(this._ranges),this._rangeStarts,this._rangeLengths)}},{key:"_bioconductor_LENGTH",value:function(){return this._rangeStarts.length}},{key:"_bioconductor_SLICE",value:function(e,t){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allowView,a=void 0!==i&&i;u((0,o.Z)(r.prototype),"_bioconductor_SLICE",this).call(this,e,t,{allowView:a}),(0,T.Z)(this,he,ve).call(this),e._rangeLengths=O(this._rangeLengths,t,{allowView:a});var s=(0,te.Z)(r,r,de).call(r,e._rangeLengths);if(e._rangeStarts=s.starts,t.constructor==Object){var l=this._rangeStarts[t.start];e._ranges=O(this._ranges,{start:l,end:l+s.total},{allowView:a})}else{var c,h=new Int32Array(s.total),f=0,d=(0,n.Z)(t);try{for(d.s();!(c=d.n()).done;)for(var v=c.value,m=this._rangeStarts[v],p=m+this._rangeLengths[v],y=m;y<p;y++)h[f]=y,f++}catch(b){d.e(b)}finally{d.f()}e._ranges=O(this._ranges,h,{allowView:a})}}},{key:"_bioconductor_COMBINE",value:function(e,t){u((0,o.Z)(r.prototype),"_bioconductor_COMBINE",this).call(this,e,t);var i,a=(0,n.Z)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;(0,T.Z)(s,he,ve).call(s)}}catch(c){a.e(c)}finally{a.f()}e._rangeLengths=S(t.map((function(e){return e.rangeLengths()})));var l=(0,te.Z)(r,r,de).call(r,e._rangeLengths);e._rangeStarts=l.starts,e._ranges=S(t.map((function(e){return e._ranges})))}},{key:"_bioconductor_CLONE",value:function(e,t){var n=t.deepCopy,i=void 0===n||n;u((0,o.Z)(r.prototype),"_bioconductor_CLONE",this).call(this,e,{deepCopy:i}),(0,ue.Z)(e,ce,F((0,le.Z)(this,ce),i)),e._rangeLengths=F(this._rangeLengths,i),e._rangeStarts=F(this._rangeStarts,i),e._ranges=F(this._ranges,i)}}],[{key:"empty",value:function(e){var t=new Int32Array(e);return t.fill(0),new r(re.empty(),{rangeLengths:t})}}]),r}(G);function de(e){for(var t=new Int32Array(e.length),r=0,n=0;n<e.length;n++)t[n]=r,r+=e[n];return{starts:t,total:r}}function ve(){var e=(0,le.Z)(this,ce);if(null!==e){e.sort((function(e,t){var r=e[0]-t[0];return 0===r?e[1]-t[1]:r}));for(var t=0,r=0,n=0,i=[],a=this.numberOfGroups(),s=0;s<a;s++){if(t<e.length&&s==e[t][0]){var o=this._rangeStarts[s];n<o&&i.push(O(this._ranges,{start:n,end:o})),n=o+this._rangeLengths[s];var u=void 0;do{u=e[t][2],t++}while(t<e.length&&s==e[t][0]);i.push(u),this._rangeLengths[s]=C(u)}this._rangeStarts[s]=r,r+=this._rangeLengths[s]}var l=C(this._ranges);n<l&&i.push(O(this._ranges,{start:n,end:l}));try{this._ranges=S(i)}catch(c){throw new Error("failed to combine staged '$setGroup' operations; "+c.message)}(0,ue.Z)(this,ce,null)}}var me=function(){function e(t,r,n,a){(0,i.Z)(this,e),this._index=t,this._rangeStarts=n,this._rangeLengths=a;for(var s=new Int32Array(r),o=0;o<n.length;o++)for(var u=n[o],l=u+a[o],c=u;c<l;c++)s[c]=o;this._reverseMapping=s}return(0,a.Z)(e,[{key:"overlap",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreStrand;var t=new Array(this._rangeStarts.length),r=this._reverseMapping;if(e instanceof fe)for(var n=this._index.overlap(e._ranges),i=function(){var i=e._rangeStarts[a],o=i+e._rangeLengths[a],u=new Set;for(s=i;s<o;s++)n[s].forEach((function(e){return u.add(r[e])}));t[a]=Array.from(u)},a=0;a<e._rangeStarts.length;a++){var s;i()}else{var o=this._index.overlap(e),u=function(){var e=new Set;o[a].forEach((function(t){return e.add(r[t])})),t[a]=Array.from(e)};for(a=0;a<o.length;a++)u()}return t}}]),e}();var pe=new WeakSet,ye=new WeakSet,be=new WeakSet,we=new WeakSet,ge=function(){function e(t,r,n){var a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).columnMajor,s=void 0===a||a;if((0,i.Z)(this,e),(0,P.Z)(this,we),(0,P.Z)(this,be),(0,P.Z)(this,ye),(0,P.Z)(this,pe),0!=arguments.length&&(this._numberOfRows=t,this._numberOfColumns=r,this._values=n,this._columnMajor=s,t*r!=n.length))throw new Error("length of 'values' should be equal to the product of 'dimensions'")}return(0,a.Z)(e,[{key:"numberOfRows",value:function(){return this._numberOfRows}},{key:"numberOfColumns",value:function(){return this._numberOfColumns}},{key:"isColumnMajor",value:function(){return this._columnMajor}},{key:"values",value:function(){return this._values}},{key:"row",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowView,r=void 0!==t&&t;return(0,T.Z)(this,pe,_e).call(this,e,this._numberOfRows,this._numberOfColumns,r,!this._columnMajor)}},{key:"column",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowView,r=void 0!==t&&t;return(0,T.Z)(this,pe,_e).call(this,e,this._numberOfColumns,this._numberOfRows,r,this._columnMajor)}},{key:"setValues",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;if(e.length!==this._values.length)throw new Error("replacement 'values' should have length equal to 'values()'");var n=D(this,r);return n._values=e,n}},{key:"$setValues",value:function(e){return this.setValues(e,{inPlace:!0})}},{key:"setRow",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,n=void 0!==r&&r;if(t.length!==this._numberOfColumns)throw new Error("replacement row should have length equal to 'numberOfColumns()'");var i=D(this,n);return n||(i._values=i._values.slice()),(0,T.Z)(i,ye,Ze).call(i,e,i._numberOfRows,i._numberOfColumns,!i._columnMajor,t),i}},{key:"$setRow",value:function(e,t){return this.setRow(e,t,{inPlace:!0})}},{key:"setColumn",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,n=void 0!==r&&r;if(t.length!==this._numberOfRows)throw new Error("replacement column should have length equal to 'numberOfRows()'");var i=D(this,n);return n||(i._values=i._values.slice()),(0,T.Z)(i,ye,Ze).call(i,e,i._numberOfColumns,i._numberOfRows,i._columnMajor,t),i}},{key:"$setColumn",value:function(e,t){return this.setColumn(e,t,{inPlace:!0})}},{key:"_bioconductor_NUMBER_OF_ROWS",value:function(){return this.numberOfRows()}},{key:"_bioconductor_NUMBER_OF_COLUMNS",value:function(){return this.numberOfColumns()}},{key:"_bioconductor_SLICE_2D",value:function(e,t,r,n){!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(n);var i=null===t,a=!i&&t.constructor==Object,s=i?this._numberOfRows:a?t.end-t.start:t.length;e._numberOfRows=s;var o=null===r,u=!o&&r.constructor==Object,l=o?this._numberOfColumns:u?r.end-r.start:r.length;e._numberOfColumns=l;var c=new this._values.constructor(s*l);e._values=c,this._columnMajor?(0,T.Z)(this,be,ke).call(this,r,o,u,this._numberOfColumns,t,i,a,this._numberOfRows,s,c):(0,T.Z)(this,be,ke).call(this,t,i,a,this._numberOfRows,r,o,u,this._numberOfColumns,l,c),e._columnMajor=this._columnMajor}},{key:"_combiner",value:function(e,t,r,n,i){for(var a=t(e[0]),s=r(e[0]),o=1;o<e.length;o++){if(r(e[o])!==s)throw new Error("all objects must have the same number of "+i);a+=t(e[o])}var u=n(e[0]),l=new e[0]._values.constructor(a*s);if(u){var c=0;for(o=0;o<e.length;o++){var h=e[o],f=t(h),d=c*s;if(n(h))l.set(h._values,d);else for(var v=0;v<s;v++)for(var m=v*f,p=d+v,y=0;y<f;y++)l[p+y*s]=h._values[m+y];c+=f}}else{var b=0;for(o=0;o<e.length;o++){var w=e[o],g=t(w);if(n(w))for(y=0;y<g;y++){var _=y*s,Z=b+y;for(v=0;v<s;v++)l[Z+v*a]=w._values[_+v]}else for(var v=0;v<s;v++){var k=v*g,x=w._values.subarray(k,k+g);l.set(x,b+v*a)}b+=g}}return{num_primary:a,num_secondary:s,values:l,primary_major:u}}},{key:"_bioconductor_COMBINE_ROWS",value:function(e,t){var r=this._combiner(t,(function(e){return e._numberOfRows}),(function(e){return e._numberOfColumns}),(function(e){return!e._columnMajor}),"columns");e._numberOfRows=r.num_primary,e._numberOfColumns=r.num_secondary,e._values=r.values,e._columnMajor=!r.primary_major}},{key:"_bioconductor_COMBINE_COLUMNS",value:function(e,t){var r=this._combiner(t,(function(e){return e._numberOfColumns}),(function(e){return e._numberOfRows}),(function(e){return e._columnMajor}),"rows");e._numberOfColumns=r.num_primary,e._numberOfRows=r.num_secondary,e._values=r.values,e._columnMajor=r.primary_major}},{key:"_bioconductor_CLONE",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).deepCopy,r=void 0===t||t;e._values=r?this._values.slice():this._values,e._numberOfRows=this._numberOfRows,e._numberOfColumns=this._numberOfColumns,e._columnMajor=this._columnMajor}}]),e}();function _e(e,t,r,n,i){if(i){var a=e*r,s=a+r;return n?this._values.subarray(a,s):this._values.slice(a,s)}for(var o=new this._values.constructor(r),u=e,l=0;l<r;l++)o[l]=this._values[u],u+=t;return o}function Ze(e,t,r,n,i){if(n){var a=e*r;this._values.set(i,a)}else{new this._values.constructor(r);for(var s=e,o=0;o<r;o++)this._values[s]=i[o],s+=t}}function ke(e,t,r,n,i,a,s,o,u,l){if(t)for(var c=0;c<n;c++)(0,T.Z)(this,we,xe).call(this,i,a,s,o,u,l,c,c);else if(r)for(c=e.start;c<e.end;c++)(0,T.Z)(this,we,xe).call(this,i,a,s,o,u,l,c,c-e.start);else for(var h=0;h<e.length;h++)(0,T.Z)(this,we,xe).call(this,i,a,s,o,u,l,e[h],h)}function xe(e,t,r,n,i,a,s,o){var u=s*n,l=o*i;if(t){var c=this._values.subarray(u,u+n);a.set(c,l)}else if(r)for(var h=e.start;h<e.end;h++)a[l+h-e.start]=this._values[u+h];else for(var f=0;f<e.length;f++)a[l+f]=this._values[u+e[f]]}(0,h.Z)(ge,"name","DenseMatrix");var Ee=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.assayOrder,l=void 0===u?null:u,c=o.rowData,h=void 0===c?null:c,f=o.columnData,d=void 0===f?null:f,v=o.rowNames,m=void 0===v?null:v,p=o.columnNames,y=void 0===p?null:p,w=o.metadata,g=void 0===w?{}:w;if((0,i.Z)(this,r),0==arguments.length)return a=t.call(this),(0,s.Z)(a);a=t.call(this,g);try{a._assays=new L(e,l)}catch(R){throw new Error("failed to initialize assay list for this SummarizedExperiment; "+R.message,{cause:R})}var _,Z=null,k=null,x=(0,n.Z)(a._assays.names());try{for(x.s();!(_=x.n()).done;){var E=_.value,O=a._assays.entry(E),S=M(O),A=N(O);if(null==Z)Z=S,k=A;else if(Z!==S||k!==A)throw new Error("expected all assays in 'assays' to have the same number of rows and columns")}}catch(W){x.e(W)}finally{x.f()}if(null===h){if(null==Z)throw new Error("'rowData' must be specified if 'assays' is empty");h=new Y({},{numberOfRows:Z})}else if(null!==Z&&Z!==C(h))throw new Error("'rowData' should be equal to the number of rows in each 'assays'");if(a._rowData=h,null===d){if(null==k)throw new Error("'columnData' must be specified if 'assays' is empty");d=new Y({},{numberOfRows:k})}else if(null!==k&&k!==C(d))throw new Error("'columnData' should be equal to the number of columns in each 'assays'");return a._columnData=d,null!=m&&b(m,"'rowNames'",a._rowData.numberOfRows(),"the number of rows in each 'assays'"),a._rowNames=m,null!=y&&b(y,"'columnNames'",a._columnData.numberOfRows(),"the number of columns in each 'assays'"),a._columnNames=y,(0,s.Z)(a)}return(0,a.Z)(r,[{key:"assayNames",value:function(){return this._assays.names()}},{key:"numberOfAssays",value:function(){return this._assays.numberOfEntries()}},{key:"assay",value:function(e){var t;try{t=this._assays.entry(e)}catch(r){throw new Error("failed to retrieve the specified assay from this "+this.constructor.className+"; "+r.message,{cause:r})}return t}},{key:"rowData",value:function(){return this._rowData}},{key:"numberOfRows",value:function(){return this._rowData.numberOfRows()}},{key:"rowNames",value:function(){return this._rowNames}},{key:"columnData",value:function(){return this._columnData}},{key:"numberOfColumns",value:function(){return this._columnData.numberOfRows()}},{key:"columnNames",value:function(){return this._columnNames}},{key:"removeAssay",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._assays=n._assays.delete(e,{inPlace:r})}catch(i){throw new Error("failed to remove assay "+("string"==typeof e?"'"+e+"'":String(e))+" from this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$removeAssay",value:function(e){return this.removeAssay(e,{inPlace:!0})}},{key:"setAssay",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,n=void 0!==r&&r;if(M(t)!==this.numberOfRows()||N(t)!==this.numberOfColumns())throw new Error("expected 'value' to have the same dimensions as this 'SummarizedExperiment'");var i=D(this,n);return i._assays=i._assays.set(e,t,{inPlace:n}),i}},{key:"$setAssay",value:function(e,t){return this.setAssay(e,t,{inPlace:!0})}},{key:"setAssayNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._assays=n._assays.setNames(e,{inPlace:r})}catch(i){throw new Error("failed to set the assay names for this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$setAssayNames",value:function(e){return this.setAssayNames(e,{inPlace:!0})}},{key:"sliceAssays",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._assays=this._assays.slice(e,{inPlace:r})}catch(i){throw new Error("failed to slice the assays for this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$sliceAssays",value:function(e){return this.sliceAssays(e,{inPlace:!0})}},{key:"setRowData",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;if(!(e instanceof Y))throw new Error("'value' should be a DataFrame");if(e.numberOfRows()!==this.numberOfRows())throw new Error("expected 'value' to have the same number of rows as this 'SummarizedExperiment'");var n=D(this,r);return n._rowData=e,n}},{key:"$setRowData",value:function(e){return this.setRowData(e,{inPlace:!0})}},{key:"setColumnData",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;if(!(e instanceof Y))throw new Error("'value' should be a DataFrame");if(e.numberOfRows()!==this.numberOfColumns())throw new Error("expected 'value' to have the same number of rows as the number of columns of this 'SummarizedExperiment'");var n=D(this,r);return n._columnData=e,n}},{key:"$setColumnData",value:function(e){return this.setColumnData(e,{inPlace:!0})}},{key:"setRowNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;null!==e&&b(e,"replacement 'names'",this.numberOfRows(),"'numberOfRows()'");var n=D(this,r);return n._rowNames=e,n}},{key:"$setRowNames",value:function(e){return this.setRowNames(e,{inPlace:!0})}},{key:"setColumnNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;null!==e&&b(e,"replacement 'names'",this.numberOfColumns(),"'numberOfColumns()'");var n=D(this,r);return n._columnNames=e,n}},{key:"$setColumnNames",value:function(e){return this.setColumnNames(e,{inPlace:!0})}},{key:"_bioconductor_NUMBER_OF_ROWS",value:function(){return this.numberOfRows()}},{key:"_bioconductor_NUMBER_OF_COLUMNS",value:function(){return this.numberOfColumns()}},{key:"_bioconductor_SLICE_2D",value:function(e,t,r,n){var i=n.allowView,a=void 0!==i&&i;e._assays=this._assays.apply((function(e){return W(e,t,r,{allowView:a})})),null!==t?(e._rowData=O(this._rowData,t,{allowView:a}),e._rowNames=null==this._rowNames?null:O(this._rowNames,t,{allowView:a})):(e._rowData=this._rowData,e._rowNames=this._rowNames),null!==r?(e._columnData=O(this._columnData,r,{allowView:a}),e._columnNames=null==this._columnNames?null:O(this._columnNames,r,{allowView:a})):(e._columnData=this._columnData,e._columnNames=this._columnNames),e._metadata=this._metadata}},{key:"_bioconductor_COMBINE_ROWS",value:function(e,t){e._assays=L.parallelCombine(t.map((function(e){return e._assays})),I);var r=t.map((function(e){return e._rowData}));e._rowData=S(r);var n=t.map((function(e){return e._rowNames})),i=t.map((function(e){return e.numberOfRows()}));e._rowNames=g(n,i),e._columnData=this._columnData,e._columnNames=this._columnNames,e._metadata=this._metadata}},{key:"_bioconductor_COMBINE_COLUMNS",value:function(e,t){e._assays=L.parallelCombine(t.map((function(e){return e._assays})),z);var r=t.map((function(e){return e._columnData}));e._columnData=S(r);var n=t.map((function(e){return e._columnNames})),i=t.map((function(e){return e.numberOfColumns()}));e._columnNames=g(n,i),e._rowData=this._rowData,e._rowNames=this._rowNames,e._metadata=this._metadata}},{key:"_bioconductor_CLONE",value:function(e,t){var n=t.deepCopy,i=void 0===n||n;u((0,o.Z)(r.prototype),"_bioconductor_CLONE",this).call(this,e,{deepCopy:i}),e._assays=F(this._assays,i),e._rowData=F(this._rowData,i),e._rowNames=F(this._rowNames,i),e._columnData=F(this._columnData,i),e._columnNames=F(this._columnNames,i)}}]),r}(j);(0,h.Z)(Ee,"className","SummarizedExperiment");var Ce=new WeakSet,Oe=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.Z)(this,r),0==arguments.length?(a=t.call(this),(0,P.Z)((0,se.Z)(a),Ce),(0,s.Z)(a)):(a=t.call(this,e,o),(0,P.Z)((0,se.Z)(a),Ce),null===n?n=fe.empty(a.numberOfRows()):(0,T.Z)((0,se.Z)(a),Ce,Se).call((0,se.Z)(a),n),a._rowRanges=n,(0,s.Z)(a))}return(0,a.Z)(r,[{key:"rowRanges",value:function(){return this._rowRanges}},{key:"setRowRanges",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t;(0,T.Z)(this,Ce,Se).call(this,e);var n=D(this,r);return n._rowRanges=e,n}},{key:"$setRowRanges",value:function(e){return this.setRowRanges(e,{inPlace:!0})}},{key:"_bioconductor_SLICE_2D",value:function(e,t,n,i){var a=i.allowView,s=void 0!==a&&a;u((0,o.Z)(r.prototype),"_bioconductor_SLICE_2D",this).call(this,e,t,n,{allowView:s}),e._rowRanges=null!==t?O(this._rowRanges,t):this._rowRanges}},{key:"_bioconductor_COMBINE_ROWS",value:function(e,t){u((0,o.Z)(r.prototype),"_bioconductor_COMBINE_ROWS",this).call(this,e,t);for(var n=[],i=!1,a=!1,s=0;s<t.length;s++){var l=t[s];if(l instanceof r){var c=l._rowRanges;c instanceof fe&&(a=!0),n.push(c)}else{if(!(l instanceof Ee))throw new Error("objects to be combined must be SummarizedExperiments (failing for object "+String(s)+")");i=!0,n.push(null)}}if(i||a)for(s=0;s<n.length;s++){var h=n[s];if(h instanceof re){var f=new Int32Array(C(h));f.fill(1);var d={rangeLengths:f,names:h.names(),elementMetadata:h.elementMetadata(),metadata:h.metadata()};null!==d.names&&(h=h.setNames(null)),(d.elementMetadata.metadata().size>0||d.elementMetadata.numberOfColumns()>0)&&(h=h.setElementMetadata(null)),d.metadata.size>0&&(h=h.setMetadata(new Map)),n[s]=new fe(h,d)}else null===h&&(n[s]=fe.empty(t[s].numberOfRows()))}e._rowRanges=S(n)}},{key:"_bioconductor_COMBINE_COLUMNS",value:function(e,t){u((0,o.Z)(r.prototype),"_bioconductor_COMBINE_COLUMNS",this).call(this,e,t),e._rowRanges=t[0]._rowRanges}},{key:"_bioconductor_CLONE",value:function(e,t){var n=t.deepCopy;u((0,o.Z)(r.prototype),"_bioconductor_CLONE",this).call(this,e,{deepCopy:n}),e._rowRanges=F(this._rowRanges,n)}}]),r}(Ee);function Se(e){if(!(e instanceof re)&&!(e instanceof fe))throw new Error("'rowRanges' should be a 'GRanges' or 'GroupedGRanges' instance");if(C(e)!==this._rowData.numberOfRows())throw p("'rowRanges'","the number of rows")}var Ae=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,i.Z)(this,r),0==arguments.length)return a=t.call(this),(0,s.Z)(a);var u=o.reducedDimensions,l=void 0===u?{}:u,c=o.reducedDimensionOrder,h=void 0===c?null:c,f=o.alternativeExperiments,d=void 0===f?{}:f,v=o.alternativeExperimentOrder,m=void 0===v?null:v,p=o.rowRanges,y=void 0===p?null:p,b=(a=t.call(this,e,y,o)).numberOfColumns();try{a._reducedDimensions=new L(l,h)}catch(C){throw new Error("failed to initialize reduced dimension list for this "+a.constructor.className+"; "+C.message,{cause:C})}var w,g=(0,n.Z)(a._reducedDimensions.names());try{for(g.s();!(w=g.n()).done;){var _=w.value;if(M(a._reducedDimensions.entry(_))!==b)throw new Error("number of rows for reduced dimension '"+_+"' is not equal to number of columns for this "+a.constructor.className)}}catch(O){g.e(O)}finally{g.f()}try{a._alternativeExperiments=new L(d,m)}catch(C){throw new Error("failed to initialize alternative experiment list for this "+a.constructor.className+"; "+C.message,{cause:C})}var Z,k=(0,n.Z)(a._alternativeExperiments.names());try{for(k.s();!(Z=k.n()).done;){var x=Z.value,E=a._alternativeExperiments.entry(x);if(!(E instanceof Ee))throw new Error("alternative experiment '"+x+"' is not a SummarizedExperiment");if(E.numberOfColumns(E)!==b)throw new Error("number of columns for alternative experiment '"+x+"' is not equal to number of columns for this "+a.constructor.className)}}catch(O){k.e(O)}finally{k.f()}return(0,s.Z)(a)}return(0,a.Z)(r,[{key:"reducedDimensionNames",value:function(){return this._reducedDimensions.names()}},{key:"reducedDimension",value:function(e){var t;try{t=this._reducedDimensions.entry(e)}catch(r){throw new Error("failed to retrieve the specified reduced dimension from this "+this.constructor.className+"; "+r.message,{cause:r})}return t}},{key:"alternativeExperimentNames",value:function(){return this._alternativeExperiments.names()}},{key:"alternativeExperiment",value:function(e){var t;try{t=this._alternativeExperiments.entry(e)}catch(r){throw new Error("failed to retrieve the specified alternative experiment from this "+this.constructor.className+"; "+r.message,{cause:r})}return t}},{key:"removeReducedDimension",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._reducedDimensions=n._reducedDimensions.delete(e,{inPlace:r})}catch(i){throw new Error("failed to remove the specified reduced dimension from this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$removeReducedDimension",value:function(e){return this.removeReducedDimension(e,{inPlace:!0})}},{key:"setReducedDimension",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,n=void 0!==r&&r;if(M(t)!=this.numberOfColumns())throw new Error("number of rows of 'value' should be the same as the number of columns of this SingleCellExperiment");var i=D(this,n);return i._reducedDimensions=i._reducedDimensions.set(e,t,{inPlace:n}),i}},{key:"$setReducedDimension",value:function(e,t){return this.setReducedDimension(e,t,{inPlace:!0})}},{key:"setReducedDimensionNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._reducedDimensions=n._reducedDimensions.setNames(e,{inPlace:r})}catch(i){throw new Error("failed to set the reduced dimension names for this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$setReducedDimensionNames",value:function(e){return this.setReducedDimensionNames(e,{inPlace:!0})}},{key:"sliceReducedDimensions",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._reducedDimensions=this._reducedDimensions.slice(e,{inPlace:r})}catch(i){throw new Error("failed to slice the reduced dimensions for this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$sliceReducedDimensions",value:function(e){return this.sliceReducedDimensions(e,{inPlace:!0})}},{key:"removeAlternativeExperiment",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._alternativeExperiments=n._alternativeExperiments.delete(e,{inPlace:r})}catch(i){throw new Error("failed to remove the specified alternative experiment from this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$removeAlternativeExperiment",value:function(e){return this.removeAlternativeExperiment(e,{inPlace:!0})}},{key:"setAlternativeExperiment",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,n=void 0!==r&&r;if(!(t instanceof Ee)||N(t)!=this.numberOfColumns())throw new Error("'value' should be a SummarizedExperiment with the same number of columns as this SingleCellExperiment");var i=D(this,n);return i._alternativeExperiments=i._alternativeExperiments.set(e,t,{inPlace:n}),i}},{key:"$setAlternativeExperiment",value:function(e,t){return this.setAlternativeExperiment(e,t,{inPlace:!0})}},{key:"setAlternativeExperimentNames",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._alternativeExperiments=n._alternativeExperiments.setNames(e,{inPlace:r})}catch(i){throw new Error("failed to set the alternative experiment names for this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$setAlternativeExperimentNames",value:function(e){return this.setAlternativeExperimentNames(e,{inPlace:!0})}},{key:"sliceAlternativeExperiments",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).inPlace,r=void 0!==t&&t,n=D(this,r);try{n._alternativeExperiments=this._alternativeExperiments.slice(e,{inPlace:r})}catch(i){throw new Error("failed to slice the alternative experiments for this "+this.constructor.className+"; "+i.message,{cause:i})}return n}},{key:"$sliceAlternativeExperiments",value:function(e){return this.sliceAlternativeExperiments(e,{inPlace:!0})}},{key:"_bioconductor_SLICE_2D",value:function(e,t,n,i){var a=i.allowView,s=void 0!==a&&a;u((0,o.Z)(r.prototype),"_bioconductor_SLICE_2D",this).call(this,e,t,n,{allowView:s}),null!==n?(e._reducedDimensions=this._reducedDimensions.apply((function(e){return W(e,n,null,{allowView:s})})),e._alternativeExperiments=this._alternativeExperiments.apply((function(e){return W(e,null,n,{allowView:s})}))):(e._reducedDimensions=this._reducedDimensions,e._alternativeExperiments=this._alternativeExperiments)}},{key:"_bioconductor_COMBINE_ROWS",value:function(e,t){u((0,o.Z)(r.prototype),"_bioconductor_COMBINE_ROWS",this).call(this,e,t),e._reducedDimensions=this._reducedDimensions,e._alternativeExperiments=this._alternativeExperiments}},{key:"_bioconductor_COMBINE_COLUMNS",value:function(e,t){u((0,o.Z)(r.prototype),"_bioconductor_COMBINE_COLUMNS",this).call(this,e,t);try{e._reducedDimensions=L.parallelCombine(t.map((function(e){return e._reducedDimensions})),I)}catch(n){throw new Error("failed to combine reduced dimensions for "+this.constructor.className+" objects; "+n.message,{cause:n})}try{e._alternativeExperiments=L.parallelCombine(t.map((function(e){return e._alternativeExperiments})),z)}catch(n){throw new Error("failed to combine alternative experiments for "+this.constructor.className+" objects; "+n.message,{cause:n})}}},{key:"_bioconductor_CLONE",value:function(e,t){var n=t.deepCopy;u((0,o.Z)(r.prototype),"_bioconductor_CLONE",this).call(this,e,{deepCopy:n}),e._reducedDimensions=F(this._reducedDimensions,n),e._alternativeExperiments=F(this._alternativeExperiments,n)}}]),r}(Oe);(0,h.Z)(Ae,"className","SingleCellExperiment")},5137:function(e,t,r){"use strict";r.d(t,{or:function(){return ne},is:function(){return H},bj:function(){return $},Uy:function(){return X},RR:function(){return te},Kk:function(){return m},d9:function(){return y},XZ:function(){return c},ao:function(){return f},$g:function(){return ie},wy:function(){return ae},XW:function(){return U}});var n={};r.r(n),r.d(n,{convertToUint32Array:function(){return A},decompressLines:function(){return w},default_download:function(){return u},fetchNumber:function(){return I},fetchSizes:function(){return W},geneBaseUrl:function(){return m},geneDownload:function(){return y},gene_download:function(){return p},intersect:function(){return R},referenceBaseUrl:function(){return c},referenceDownload:function(){return f},reference_download:function(){return h},retrieveBytes:function(){return O},retrieveBytesByIndex:function(){return C},retrieveNamedRanges:function(){return Z},retrieveRanges:function(){return g},retrieveRangesWithExtras:function(){return x},setGeneDownload:function(){return b},setReferenceDownload:function(){return d}});var i=r(4165),a=r(7762),s=r(5861),o=r(714),u=function(e,t,r,n){var i=e+"/"+t;return null==r||null==n?fetch(i):fetch(i,{headers:{Range:"bytes="+String(r)+"-"+String(n)}})},l="https://github.com/LTLA/gesel-feedstock/releases/download/indices-v0.2.1";function c(e){return l}var h=function(e){return u(l,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)};function f(e){var t=h;return"undefined"!==typeof e&&(h=e),t}function d(e){return f(e)}var v="https://github.com/LTLA/gesel-feedstock/releases/download/genes-v1.0.0";function m(e){return v}var p=function(e){return u(v,e,null,null)};function y(e){var t=p;return"undefined"!==typeof e&&(p=e),t}function b(e){return y(e)}function w(e){var t=o.rr(new Uint8Array(e)),r=(new TextDecoder).decode(t).split("\n");return""==r[r.length-1]?r.slice(0,r.length-1):r}function g(e){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)((0,i.Z)().mark((function e(t){var r,n,a,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t+".ranges.gz");case 2:if((r=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,r.arrayBuffer();case 7:for(n=e.sent,a=w(n),s=[0],o=0;o<a.length;o++)s.push(s[o]+Number(a[o])+1);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return k.apply(this,arguments)}function k(){return(k=(0,s.Z)((0,i.Z)().mark((function e(t){var r,n,a,s,o,u,l,c,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t+".ranges.gz");case 2:if((r=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,r.arrayBuffer();case 7:for(n=e.sent,a=w(n),s=0,o=new Map,u=[],l=0;l<a.length;l++)c=a[l].split("\t"),f=s+Number(c[1])+1,o.set(c[0],[s,f]),u.push(c[0]),s=f;return e.abrupt("return",{ranges:o,order:u});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return E.apply(this,arguments)}function E(){return(E=(0,s.Z)((0,i.Z)().mark((function e(t){var r,n,a,s,o,u,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t+".ranges.gz");case 2:if((r=e.sent).ok){e.next=5;break}throw"failed to fetch ranges for '"+t+"'";case 5:return e.next=7,r.arrayBuffer();case 7:for(n=e.sent,a=w(n),s=[0],o=[],u=0;u<a.length;u++)l=a[u].split("\t"),s.push(s[u]+Number(l[0])+1),o.push(Number(l[1]));return e.abrupt("return",{ranges:s,extra:o});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,r){return O(e,t[r],t[r+1])}function O(e,t,r){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)((0,i.Z)().mark((function e(t,r,n){var a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n--,e.next=3,h(t,r,n);case 3:if((a=e.sent).ok){e.next=6;break}throw"failed to fetch ranges for '"+t+"'";case 6:return e.next=8,a.text();case 8:return s=e.sent,e.abrupt("return",s.slice(0,n-r));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){var t=[];if(""!==e){var r=0;e.split("\t").forEach((function(e){var n=Number(e)+r;t.push(n),r=n}))}return new Uint32Array(t)}function R(e){if(0==e.length)return[];if(1==e.length)return e[0];for(var t=new Set(e[0]),r=1;r<e.length;r++){var n,i=new Set,s=(0,a.Z)(e[r]);try{for(s.s();!(n=s.n()).done;){var o=n.value;t.has(o)&&i.add(o)}}catch(u){s.e(u)}finally{s.f()}t=i}return Array.from(t)}function M(e,t,r,n,i,a){return N.apply(this,arguments)}function N(){return N=(0,s.Z)((0,i.Z)().mark((function e(t,r,n,a,s,o){var u,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof(u=r.get(t))){e.next=10;break}return e.next=4,n(t,{download:!1});case 4:if(null===(l=e.sent)){e.next=7;break}return e.abrupt("return",o(l));case 7:return e.next=9,a(t);case 9:u=r.get(t);case 10:return e.abrupt("return",s(u));case 11:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function W(e,t,r,n){return M(e,t,r,n,(function(e){return e}),(function(r){var n,i=[],s=(0,a.Z)(r);try{for(s.s();!(n=s.n()).done;){var o=n.value;i.push(o.size)}}catch(u){s.e(u)}finally{s.f()}return t.set(e,i),i}))}function I(e,t,r,n){return M(e,t,r,n,(function(e){return e.length}),(function(e){return e.length}))}var z=new Map;function D(e){return F.apply(this,arguments)}function F(){return F=(0,s.Z)((0,i.Z)().mark((function e(t){var r,n,s,o,u,l,c,h,f,d,v,m,y,b,g,_,Z,k,x,E,C=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(C.length>1&&void 0!==C[1]?C[1]:{}).types,null==(n=void 0===r?null:r)&&(n=["symbol","entrez","ensembl"]),"undefined"==typeof(s=z.get(t))&&(s=new Map,z.set(t,s)),o=new Map,u=[],l=[],c=(0,a.Z)(n);try{for(c.s();!(h=c.n()).done;)f=h.value,"undefined"==typeof(d=s.get(f))?(u.push(p(t+"_"+f+".tsv.gz")),l.push(f)):o.set(f,d)}catch(i){c.e(i)}finally{c.f()}if(!(u.length>0)){e.next=31;break}return e.next=12,Promise.all(u);case 12:v=e.sent,m=0;case 14:if(!(m<v.length)){e.next=31;break}if((y=v[m]).ok){e.next=18;break}throw"failed to fetch symbol information for genes";case 18:return e.next=20,y.arrayBuffer();case 20:b=e.sent,g=w(b),_=[],Z=(0,a.Z)(g);try{for(Z.s();!(k=Z.n()).done;)""==(x=k.value)?_.push([]):_.push(x.split("\t"))}catch(i){Z.e(i)}finally{Z.f()}E=l[m],s.set(E,_),o.set(E,_);case 28:m++,e.next=14;break;case 31:return e.abrupt("return",o);case 32:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}var j=r(3324),P=new Map,T=new Map;function B(e,t){return L.apply(this,arguments)}function L(){return L=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,s,o,u,l,c,h,f,d,v,m,p,y,b,w,g,_=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(_.length>2&&void 0!==_[2]?_[2]:{}).lowerCase,"undefined"===typeof(u=(o=(s=void 0!==n&&n)?T:P).get(t))&&(u=new Map,o.set(t,u)),"undefined"!==typeof(l=u.get(r))){e.next=14;break}return l=new Map,u.set(r,l),e.next=10,D(t,{types:[r]});case 10:for(c=e.sent.get(r),h=0;h<c.length;h++){f=(0,a.Z)(c[h]);try{for(f.s();!(d=f.n()).done;)v=d.value,s&&(v=v.toLowerCase()),"undefined"!==typeof(m=l.get(v))?m.add(h):l.set(v,new Set([h]))}catch(i){f.e(i)}finally{f.f()}}p=(0,a.Z)(l);try{for(p.s();!(y=p.n()).done;)b=(0,j.Z)(y.value,2),w=b[0],g=b[1],l.set(w,Array.from(g))}catch(i){p.e(i)}finally{p.f()}case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function U(e,t){return Y.apply(this,arguments)}function Y(){return Y=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,s,o,u,l,c,h,f,d,v,m,p,y,b,w,g,_,Z,k,x=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(n=x.length>2&&void 0!==x[2]?x[2]:{}).types,o=void 0===s?null:s,u=n.ignoreCase,l=void 0===u||u,null===o&&(o=["entrez","ensembl","symbol"]),c=[],h=(0,a.Z)(o);try{for(h.s();!(f=h.n()).done;)d=f.value,c.push(B(t,d,{lowerCase:l}))}catch(i){h.e(i)}finally{h.f()}return e.next=7,Promise.all(c);case 7:v=e.sent,m=[],p=0;case 10:if(!(p<r.length)){e.next=22;break}if(0!=(y=r[p]).length){e.next=15;break}return m.push([]),e.abrupt("continue",19);case 15:for(l&&(y=y.toLowerCase()),b=[],w=0;w<o.length;w++)if("undefined"!==typeof(g=v[w].get(y))){_=(0,a.Z)(g);try{for(_.s();!(Z=_.n()).done;)k=Z.value,b.push(k)}catch(i){_.e(i)}finally{_.f()}}m.push(b);case 19:p++,e.next=10;break;case 22:return e.abrupt("return",m);case 23:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}var q=new Map;function H(e){return G.apply(this,arguments)}function G(){return G=(0,s.Z)((0,i.Z)().mark((function e(t){var r,n,a,s,o,u,l,c,f,d,v=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(v.length>1&&void 0!==v[1]?v[1]:{}).download,n=void 0===r||r,"undefined"===typeof(a=q.get(t))){e.next=6;break}return e.abrupt("return",a);case 6:if(n){e.next=8;break}return e.abrupt("return",null);case 8:return a=[],q.set(t,a),e.next=12,h(t+"_collections.tsv.gz");case 12:if((s=e.sent).ok){e.next=15;break}throw new Error("failed to fetch collection information for species '"+t+"'");case 15:return e.t0=w,e.next=18,s.arrayBuffer();case 18:for(e.t1=e.sent,o=(0,e.t0)(e.t1),u=0,l=0;l<o.length;l++)c=o[l],f=c.split("\t"),d=Number(f[5]),a.push({title:f[0],description:f[1],species:f[2],maintainer:f[3],source:f[4],start:u,size:d}),u+=d;return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}var V=new Map;function $(e){return K.apply(this,arguments)}function K(){return K=(0,s.Z)((0,i.Z)().mark((function e(t){var r,n,a,s,o,u,l,c,f,d,v,m,p,y,b=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(b.length>1&&void 0!==b[1]?b[1]:{}).download,n=void 0===r||r,"undefined"===typeof(a=V.get(t))){e.next=6;break}return e.abrupt("return",a);case 6:if(n){e.next=8;break}return e.abrupt("return",null);case 8:return a=[],V.set(t,a),e.next=12,Promise.all([h(t+"_sets.tsv.gz"),H(t)]);case 12:if(s=e.sent,o=(0,j.Z)(s,2),u=o[0],l=o[1],u.ok){e.next=18;break}throw new Error("failed to fetch set information for species '"+t+"'");case 18:return e.t0=w,e.next=21,u.arrayBuffer();case 21:for(e.t1=e.sent,c=(0,e.t0)(e.t1),f=0;f<c.length;f++)d=c[f],v=d.split("\t"),a.push({name:v[0],description:v[1],size:Number(v[2])});for(m=0,f=0;f<l.length;f++){for(p=l[f].size,y=0;y<p;y++)a[y+m].collection=f,a[y+m].number=y;m+=p}return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}new Map,new Map,new Map,new Map;new Map,new Map,new Map,new Map,new Map,new Map;var J=new Map;function X(e){return Q.apply(this,arguments)}function Q(){return Q=(0,s.Z)((0,i.Z)().mark((function e(t){var r,a,s,o,u,l,c=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(c.length>1&&void 0!==c[1]?c[1]:{}).download,a=void 0===r||r,"undefined"===typeof(s=J.get(t))){e.next=6;break}return e.abrupt("return",s);case 6:if(a){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,h(t+"_set2gene.tsv.gz");case 10:if((o=e.sent).ok){e.next=13;break}throw new Error("failed to fetch full set-to-gene information for species '"+t+"'");case 13:return e.t0=n,e.next=16,o.arrayBuffer();case 16:return e.t1=e.sent,u=e.t0.decompressLines.call(e.t0,e.t1),l=u.map(A),J.set(t,l),e.abrupt("return",l);case 21:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}new Map,new Map;var ee=new Map;function te(e){return re.apply(this,arguments)}function re(){return re=(0,s.Z)((0,i.Z)().mark((function e(t){var r,a,s,o,u,l,c=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(c.length>1&&void 0!==c[1]?c[1]:{}).download,a=void 0===r||r,"undefined"===typeof(s=ee.get(t))){e.next=6;break}return e.abrupt("return",s);case 6:if(a){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,h(t+"_gene2set.tsv.gz");case 10:if((o=e.sent).ok){e.next=13;break}throw new Error("failed to fetch full gene-to-set information for species '"+t+"'");case 13:return e.t0=n,e.next=16,o.arrayBuffer();case 16:return e.t1=e.sent,u=e.t0.decompressLines.call(e.t0,e.t1),l=u.map(A),ee.set(t,l),e.abrupt("return",l);case 21:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}new Map,new Map;new Map,new Map,new Map;new Map,new Map,new Map;function ne(e){var t,r=new Map,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var i,s=t.value,o=(0,a.Z)(s);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=r.get(u);"undefined"==typeof l?r.set(u,1):r.set(u,l+1)}}catch(y){o.e(y)}finally{o.f()}}}catch(y){n.e(y)}finally{n.f()}var c,h=[],f=(0,a.Z)(r);try{for(f.s();!(c=f.n()).done;){var d=(0,j.Z)(c.value,2),v=d[0],m=d[1],p={id:Number(v),count:m};h.push(p)}}catch(y){f.e(y)}finally{f.f()}return h}function ie(e,t){for(var r=new Map,n=0;n<e.length;n++){var i,s=(0,a.Z)(e[n]);try{for(s.s();!(i=s.n()).done;){var o=i.value,u=r.get(o);"undefined"==typeof u&&(u=new Set,r.set(o,u)),u.add(n)}}catch(k){s.e(k)}finally{s.f()}}var l,c=(0,a.Z)(r);try{for(c.s();!(l=c.n()).done;){var h=(0,j.Z)(l.value,2),f=h[0],d=h[1];r[f]=new Uint32Array(d)}}catch(k){c.e(k)}finally{c.f()}var v=new Array(t.length);for(n=0;n<t.length;n++){var m,p=new Set,y=(0,a.Z)(t[n]);try{for(y.s();!(m=y.n()).done;){var b=m.value,w=r.get(b);if("undefined"!==typeof w){var g,_=(0,a.Z)(w);try{for(_.s();!(g=_.n()).done;){var Z=g.value;p.add(Z)}}catch(k){_.e(k)}finally{_.f()}}}}catch(k){y.e(k)}finally{y.f()}v[n]=new Uint32Array(p).sort()}return v}function ae(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++){var i,s=new Set,o=(0,a.Z)(e[n]);try{for(o.s();!(i=o.n()).done;){var u,l=i.value,c=(0,a.Z)(t[l]);try{for(c.s();!(u=c.n()).done;){var h=u.value;s.add(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}r[n]=new Uint32Array(s).sort()}return r}},4021:function(e,t,r){"use strict";r.d(t,{V:function(){return f}});var n=r(3324),i=r(5671),a=r(3144),s=r(2346),o=r(8916),u=r(2793),l=r(6635),c=new WeakMap,h=new WeakMap,f=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).store,r=void 0===t?{}:t;(0,i.Z)(this,e),(0,s.Z)(this,c,{writable:!0,value:void 0}),(0,s.Z)(this,h,{writable:!0,value:void 0}),(0,u.Z)(this,c,r),(0,u.Z)(this,h,null);var n=Object.keys(r);if(n.length)for(var a=0;a<n.length;a++){var l=r[n[a]];if(0==a)(0,u.Z)(this,h,l.numberOfColumns());else if(l.numberOfColumns()!=(0,o.Z)(this,h))throw new Error("all matrices should have the same number of columns")}}return(0,a.Z)(e,[{key:"numberOfColumns",value:function(){return(0,o.Z)(this,h)}},{key:"available",value:function(){return Object.keys((0,o.Z)(this,c))}},{key:"has",value:function(e){return e in(0,o.Z)(this,c)}},{key:"get",value:function(e){return(0,o.Z)(this,c)[e]}},{key:"add",value:function(e,t){if(null===(0,o.Z)(this,h))(0,u.Z)(this,h,t.numberOfColumns());else if(t.numberOfColumns()!=(0,o.Z)(this,h))throw new Error("all matrices should have the same number of columns");if(e in(0,o.Z)(this,c)){var r=(0,o.Z)(this,c)[e];l.gd(r)}(0,o.Z)(this,c)[e]=t}},{key:"remove",value:function(e){l.gd((0,o.Z)(this,c)[e]),delete(0,o.Z)(this,c)[e],0==Object.keys((0,o.Z)(this,c)).length&&(0,u.Z)(this,h,null)}},{key:"clone",value:function(){var t=new e;try{for(var r=0,i=Object.entries((0,o.Z)(this,c));r<i.length;r++){var a=(0,n.Z)(i[r],2),s=a[0],u=a[1];t.add(s,u.clone())}}catch(l){throw t.free(),l}return t}},{key:"rename",value:function(e,t){e!==t&&(t in(0,o.Z)(this,c)&&l.gd((0,o.Z)(this,c)[t]),(0,o.Z)(this,c)[t]=(0,o.Z)(this,c)[e],delete(0,o.Z)(this,c)[e])}},{key:"free",value:function(){for(var e=0,t=Object.entries((0,o.Z)(this,c));e<t.length;e++){var r=(0,n.Z)(t[e],2),i=(r[0],r[1]);l.gd(i)}}}]),e}()},2306:function(e,t,r){"use strict";r.d(t,{p:function(){return f}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(6635),l=r(7108),c=new WeakMap,h=new WeakMap,f=function(){function e(t,r){(0,n.Z)(this,e),(0,a.Z)(this,c,{writable:!0,value:void 0}),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,o.Z)(this,c,t),(0,o.Z)(this,h,r)}return(0,i.Z)(e,[{key:"clone",value:function(){var t=this;return l.R((function(e){return(0,s.Z)(t,h).clone()}),e)}},{key:"matrix",get:function(){return(0,s.Z)(this,h)}},{key:"numberOfRows",value:function(){return(0,s.Z)(this,h).nrow()}},{key:"numberOfColumns",value:function(){return(0,s.Z)(this,h).ncol()}},{key:"row",value:function(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).buffer,n=void 0===r?null:r;if(null!=n)return(0,s.Z)(this,h).row(e,n.offset),n.array();n=u.RJ((0,s.Z)(this,h).ncol());try{(0,s.Z)(this,h).row(e,n.offset),t=n.slice()}finally{n.free()}return t}},{key:"column",value:function(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).buffer,n=void 0===r?null:r;if(null!=n)return(0,s.Z)(this,h).column(e,n.offset),n.array();n=u.RJ((0,s.Z)(this,h).nrow());try{(0,s.Z)(this,h).column(e,n.offset),t=n.slice()}finally{n.free()}return t}},{key:"free",value:function(){null!==(0,s.Z)(this,h)&&(l.A((0,s.Z)(this,c)),(0,o.Z)(this,h,null))}},{key:"isSparse",value:function(){return(0,s.Z)(this,h).sparse()}},{key:"isReorganized",value:function(){return(0,s.Z)(this,h).reorganized()}},{key:"identities",value:function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).buffer,r=void 0===t?null:t;if(null!=r)return(0,s.Z)(this,h).identities(r.offset),r.array();r=u.Wf((0,s.Z)(this,h).nrow());try{(0,s.Z)(this,h).identities(r.offset),e=r.slice()}finally{r.free()}return e}},{key:"wipeIdentities",value:function(){(0,s.Z)(this,h).wipe_identities()}}]),e}()},3102:function(e,t,r){"use strict";r.d(t,{E:function(){return i},z:function(){return a}});var n=r(489);function i(e,t){var r;do{r=e+String(Number(new Date))+"_"+String(Math.round(1e4*Math.random()))+t}while(n.xW(r));return r}function a(e){throw new Error("cannot access the file system in a browser context")}},5644:function(e,t,r){"use strict";r.d(t,{D4:function(){return u},DS:function(){return s},fw:function(){return o},j4:function(){return a}});var n=r(6635),i=r(6737);r(4292);function a(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).buffer,i=void 0===r?null:r,a=0;e.forEach((function(e){a+=e}));try{if(null==i)i=t=n.Wf(a);else if(i.length!==a)throw new Error("'buffer' should have length equal to sum of 'ncells'");for(var s=i.array(),o=0,u=0;u<e.length;u++){var l=o;o+=e[u],s.fill(u,l,o)}}catch(c){throw n.gd(t),c}return i}function s(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.filter,s=void 0===a?null:a,o=i.buffer,u=void 0===o?null:o,l=0;if(null===s)l=t.length;else{if(t.length!=e.length)throw new Error("'x' and 'filter' should have the same length");var c=0;t.forEach((function(e){c+=0!=e})),l=s?t.length-c:c}try{if(null==u)u=r=n.Wf(l);else if(u.length!==l)throw new Error("length of 'buffer' is not consistent with 'subset'");var h=u.array(),f=e.array();if(null==s)t.forEach((function(e,t){h[t]=f[e]}));else if(s){var d=0;t.forEach((function(e,t){0==e&&(h[d]=f[t],d++)}))}else{var v=0;t.forEach((function(e,t){0!==e&&(h[v]=f[t],v++)}))}}catch(m){throw n.gd(r),m}return u}function o(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).buffer;return s(e,t,{buffer:void 0===r?null:r,filter:!0})}function u(e){e instanceof i.PQ&&(e=e.array());var t=new Set(e),r=Array.from(t).sort(),n={};return r.forEach((function(e,t){n[e]=t})),e.forEach((function(t,r){e[r]=n[t]})),r}},5470:function(e,t,r){"use strict";r.d(t,{KV:function(){return u}});var n=r(7762),i=r(6635),a=r(2306),s=r(7108);function o(e){for(var t=i.GF(e.length),r=t.array(),n=0;n<e.length;n++)r[n]=BigInt(e[n].matrix.$$.ptr);return t}function u(e,t){var r,u,l,c=[],h={};try{if(t.length!==e.length)throw new Error("length of 'names' should be equal to length of 'x'");for(var f={},d=[],v=0;v<t.length;v++){if(e[v].numberOfRows()!==t[v].length)throw new Error("length of each 'names' must equal number of rows of its corresponding 'x'");t[v].forEach((function(e){e in f||(f[e]=d.length,d.push(e))}))}var m=(u=i.GF(e.length)).array(),p=function(){var e=t[v],r=i.Wf(e.length),n=r.array();e.forEach((function(e,t){n[t]=f[e]})),c.push(r),m[v]=BigInt(r.offset)};for(v=0;v<t.length;v++)p();r=o(e),l=i.Wf(e[0].numberOfRows()),h.matrix=s.R((function(t){return t.cbind_with_rownames(e.length,r.offset,u.offset,l.offset)}),a.p),h.indices=l.slice(0,h.matrix.numberOfRows());var y,b=[],w=(0,n.Z)(h.indices);try{for(w.s();!(y=w.n()).done;){var g=y.value;b.push(t[0][g])}}catch(x){w.e(x)}finally{w.f()}h.names=b}catch(E){throw i.gd(h.matrix),E}finally{i.gd(r),i.gd(u),i.gd(l);for(var _=0,Z=c;_<Z.length;_++){var k=Z[_];i.gd(k)}}return h}},6199:function(e,t,r){"use strict";r.d(t,{Y:function(){return n}});r(6635),r(4812);function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.copy,i=void 0===n||n,a=r.largest,s=void 0===a||a;return i&&(e=e.slice()),e instanceof Array?e.sort((function(e,t){return e-t})):e.sort(),0==e.length?Number.NaN:s?e[Math.max(0,e.length-t)]:e[Math.min(t,e.length)-1]}},2494:function(e,t,r){"use strict";r.d(t,{eu:function(){return g}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(6635),l=r(7108),c=r(5159),h=new WeakMap,f=new WeakMap,d=new WeakMap,v=new WeakMap,m=new WeakMap,p=new WeakMap,y=new WeakMap,b=new WeakMap,w=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,a.Z)(this,m,{writable:!0,value:void 0}),(0,a.Z)(this,p,{writable:!0,value:void 0}),(0,a.Z)(this,y,{writable:!0,value:void 0}),(0,a.Z)(this,b,{writable:!0,value:void 0}),(0,o.Z)(this,f,r),(0,o.Z)(this,h,t),(0,o.Z)(this,d,i),(0,o.Z)(this,v,i),(0,o.Z)(this,m,i),(0,o.Z)(this,p,i),(0,o.Z)(this,y,i),(0,o.Z)(this,b,i)}return(0,i.Z)(e,[{key:"numberOfCells",value:function(){return(0,s.Z)(this,f).num_obs()}},{key:"numberOfClusters",value:function(){return(0,s.Z)(this,f).num_clusters()}},{key:"setIterations",value:function(e){(0,s.Z)(this,y)||(0,o.Z)(this,y,!0),(0,s.Z)(this,f).set_iterations(e)}},{key:"setStatus",value:function(e){(0,s.Z)(this,b)||(0,o.Z)(this,b,!0),(0,s.Z)(this,f).set_status(e)}},{key:"clusters",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return u.Hw(a,n,(0,s.Z)(this,d),(function(){(0,o.Z)(e,d,!0)}),(function(t){return u.Yj((0,s.Z)(e,f).clusters(),t)}),"clusters")}},{key:"clusterSizes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return u.Hw(a,n,(0,s.Z)(this,v),(function(){(0,o.Z)(e,v,!0)}),(function(t){return u.Yj((0,s.Z)(e,f).cluster_sizes(),t)}),"clusterSizes")}},{key:"withinClusterSumSquares",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return u.Hw(a,n,(0,s.Z)(this,p),(function(){(0,o.Z)(e,p,!0)}),(function(t){return u.Yj((0,s.Z)(e,f).wcss(),t)}))}},{key:"clusterCenters",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return u.Hw(a,n,(0,s.Z)(this,m),(function(){(0,o.Z)(e,m,!0)}),(function(t){return u.Yj((0,s.Z)(e,f).centers(),t)}))}},{key:"iterations",value:function(){return(0,s.Z)(this,y)?(0,s.Z)(this,f).iterations():null}},{key:"status",value:function(){return(0,s.Z)(this,b)?(0,s.Z)(this,f).status():null}},{key:"free",value:function(){null!==(0,s.Z)(this,f)&&(l.A((0,s.Z)(this,h)),(0,o.Z)(this,f,null))}}]),e}();function g(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.numberOfDims,s=void 0===a?null:a,o=i.numberOfCells,h=void 0===o?null:o,f=i.initMethod,d=void 0===f?"pca-part":f,v=i.initSeed,m=void 0===v?5768:v,p=i.initPCASizeAdjust,y=void 0===p?1:p,b=i.numberOfThreads,g=void 0===b?null:b,_=u.mV(g);try{var Z;if(e instanceof c.RY){s=e.numberOfPCs(),h=e.numberOfCells();var k=e.principalComponents({copy:!1});Z=k.byteOffset}else{if(null===s||null===h)throw new Error("'numberOfDims' and 'numberOfCells' must be specified when 'x' is an Array");if((r=u.de(e,"Float64WasmArray")).length!=s*h)throw new Error("length of 'x' must be the product of 'numberOfDims' and 'numberOfCells'");Z=r.offset}n=l.R((function(e){return e.cluster_kmeans(Z,s,h,t,d,m,y,_)}),w)}catch(x){throw u.gd(n),x}finally{u.gd(r)}return n}},9273:function(e,t,r){"use strict";r.d(t,{ZI:function(){return D},bD:function(){return p}});var n=r(8652),i=r(3889),a=r(5671),s=r(3144),o=r(2346),u=r(8916),l=r(2793),c=r(6635),h=r(7108),f=r(7067),d=new WeakMap,v=new WeakMap,m=function(){function e(t,r){(0,a.Z)(this,e),(0,o.Z)(this,d,{writable:!0,value:void 0}),(0,o.Z)(this,v,{writable:!0,value:void 0}),(0,l.Z)(this,d,t),(0,l.Z)(this,v,r)}return(0,s.Z)(e,[{key:"free",value:function(){null!==(0,u.Z)(this,v)&&(h.A((0,u.Z)(this,d)),(0,l.Z)(this,v,null))}},{key:"graph",get:function(){return(0,u.Z)(this,v)}}]),e}();function p(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.scheme,a=void 0===i?"rank":i,s=n.neighbors,o=void 0===s?10:s,u=n.numberOfThreads,l=void 0===u?null:u,d=c.mV(l);c.c2("scheme",a,["rank","number","jaccard"]);try{var v;e instanceof f.qv?v=e:(r=(0,f.wf)(e,o,{numberOfThreads:d}),v=r),t=h.R((function(e){return e.build_snn_graph(v.results,a,d)}),m)}catch(p){throw c.gd(t),p}finally{c.gd(r)}return t}var y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,_=new WeakMap,Z=new WeakSet,k=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,a.Z)(this,e),(0,n.Z)(this,Z),(0,o.Z)(this,y,{writable:!0,value:void 0}),(0,o.Z)(this,b,{writable:!0,value:void 0}),(0,o.Z)(this,w,{writable:!0,value:void 0}),(0,o.Z)(this,g,{writable:!0,value:void 0}),(0,o.Z)(this,_,{writable:!0,value:void 0}),(0,l.Z)(this,y,t),(0,l.Z)(this,b,r),(0,l.Z)(this,w,i),(0,l.Z)(this,g,c.oH(this.numberOfLevels(),i)),(0,l.Z)(this,_,c.oH(this.numberOfLevels(),i))}return(0,s.Z)(e,[{key:"best",value:function(){return(0,u.Z)(this,w)?(0,u.Z)(this,b).best():null}},{key:"setBest",value:function(e){(0,u.Z)(this,w)||(0,l.Z)(this,w,!0),(0,u.Z)(this,b).set_best(e)}},{key:"numberOfLevels",value:function(){return(0,u.Z)(this,b).number()}},{key:"modularity",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).level,t=void 0===e?null:e;return t=(0,i.Z)(this,Z,x).call(this,t),(0,u.Z)(this,g)[t]?(0,u.Z)(this,b).modularity(t):null}},{key:"setModularity",value:function(e,t){(0,u.Z)(this,g)[e]||((0,u.Z)(this,g)[e]=!0),(0,u.Z)(this,b).set_modularity(e,t)}},{key:"membership",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.level,n=void 0===r?null:r,a=t.copy,s=void 0===a||a,o=t.fillable,l=void 0!==o&&o;return n=(0,i.Z)(this,Z,x).call(this,n),c.Hw(l,s,(0,u.Z)(this,_)[n],(function(){(0,u.Z)(e,_)[n]=!0}),(function(t){return c.Yj((0,u.Z)(e,b).membership(n),t)}))}},{key:"free",value:function(){null!==(0,u.Z)(this,b)&&(h.A((0,u.Z)(this,y)),(0,l.Z)(this,b,null))}}]),e}();function x(e){if(null===e&&null==(e=this.best()))throw new Error("'best' has not yet been set via 'setBest'");return e}var E=new WeakMap,C=new WeakMap,O=new WeakMap,S=new WeakMap,A=new WeakMap,R=function(){function e(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if((0,a.Z)(this,e),(0,o.Z)(this,E,{writable:!0,value:void 0}),(0,o.Z)(this,C,{writable:!0,value:void 0}),(0,o.Z)(this,O,{writable:!0,value:void 0}),(0,o.Z)(this,S,{writable:!0,value:void 0}),(0,o.Z)(this,A,{writable:!0,value:void 0}),(0,l.Z)(this,E,t),(0,l.Z)(this,C,r),(0,l.Z)(this,O,n),(0,l.Z)(this,A,n),!n){var i=this.numberOfMergeSteps()+1;(0,l.Z)(this,S,{which:c.oH(i,!1),remaining:i})}}return(0,s.Z)(e,[{key:"numberOfMergeSteps",value:function(){return(0,u.Z)(this,C).num_merge_steps()}},{key:"modularity",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).at,t=void 0===e?null:e;if(null===t){if(!(0,u.Z)(this,O))return null;t=-1}else if(!(0,u.Z)(this,O)&&!(0,u.Z)(this,S)[t])return null;return(0,u.Z)(this,C).modularity(t)}},{key:"setModularity",value:function(e,t){(0,u.Z)(this,O)||((0,u.Z)(this,S).which[e]=!0,(0,u.Z)(this,S).remaining--,0==(0,u.Z)(this,S).remaining&&(0,l.Z)(this,O,!0)),(0,u.Z)(this,C).set_modularity(e,t)}},{key:"membership",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return c.Hw(a,n,(0,u.Z)(this,A),(function(){(0,l.Z)(e,A,!0)}),(function(t){return c.Yj((0,u.Z)(e,C).membership(),t)}))}},{key:"free",value:function(){null!==(0,u.Z)(this,C)&&(h.A((0,u.Z)(this,E)),(0,l.Z)(this,C,null))}}]),e}(),M=new WeakMap,N=new WeakMap,W=new WeakMap,I=new WeakMap,z=function(){function e(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,a.Z)(this,e),(0,o.Z)(this,M,{writable:!0,value:void 0}),(0,o.Z)(this,N,{writable:!0,value:void 0}),(0,o.Z)(this,W,{writable:!0,value:void 0}),(0,o.Z)(this,I,{writable:!0,value:void 0}),(0,l.Z)(this,M,t),(0,l.Z)(this,N,r),(0,l.Z)(this,W,n),(0,l.Z)(this,I,n)}return(0,s.Z)(e,[{key:"modularity",value:function(){return(0,u.Z)(this,W)?(0,u.Z)(this,N).modularity():null}},{key:"setModularity",value:function(e){(0,u.Z)(this,W)||(0,l.Z)(this,W,!0),(0,u.Z)(this,N).set_modularity(e)}},{key:"membership",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return c.Hw(a,n,(0,u.Z)(this,I),(function(){(0,l.Z)(e,I,!0)}),(function(t){return c.Yj((0,u.Z)(e,N).membership(),t)}))}},{key:"free",value:function(){null!==(0,u.Z)(this,N)&&(h.A((0,u.Z)(this,M)),(0,l.Z)(this,N,null))}}]),e}();function D(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.method,i=void 0===n?"multilevel":n,a=r.multiLevelResolution,s=void 0===a?1:a,o=r.leidenResolution,u=void 0===o?1:o,l=r.leidenModularityObjective,f=void 0!==l&&l,d=r.walktrapSteps,v=void 0===d?4:d;try{if("multilevel"==i)t=h.R((function(t){return t.cluster_snn_graph_multilevel(e.graph,s)}),k);else if("walktrap"==i)t=h.R((function(t){return t.cluster_snn_graph_walktrap(e.graph,v)}),R);else{if("leiden"!=i)throw new Error("unknown method '"+i+"'");t=h.R((function(t){return t.cluster_snn_graph_leiden(e.graph,u,f)}),z)}}catch(m){throw c.gd(t),m}return t}},4292:function(e,t,r){"use strict";r.d(t,{Y:function(){return a}});var n=r(6737),i=r(6635);function a(e){var t,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.asWasmArray,o=void 0===s||s,u=a.buffer,l=void 0===u?null:u,c=a.action,h=void 0===c?"error":c,f=a.placeholder,d=void 0===f?-1:f,v=[];if("warn"==h){var m=!1;r=function(){m&&(console.warn("replacing invalid values with the placeholder index '"+String(d)+"'"),m=!0)}}else if("none"==h)r=function(){};else{if("error"!=h)throw new Error("unknown action '"+h+"' for handling invalid entries");r=function(){throw new Error("detected invalid value (e.g., null, NaN) in 'x'")}}try{if(null==l)l=t=o?i.Wf(e.length):new Int32Array(e.length);else{if(l.length!==e.length)throw new Error("'buffer' should have length equal to that of 'x'");o=l instanceof n.do}for(var p=o?l.array():l,y=new Map,b=0;b<e.length;b++){var w=e[b];if(null==w||"number"==typeof w&&!Number.isFinite(w))r(),p[b]=d;else{var g=y.get(w);if("undefined"==typeof g){var _=v.length;y.set(w,_),v.push(w),p[b]=_}else p[b]=g}}}catch(Z){throw i.gd(t),Z}return{ids:l,levels:v}}},8420:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n=r(7108),i=r(6635);function a(e,t){var r,a;try{if((r=i.de(t,"Uint8WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'filters' must be equal to number of columns in 'x'");var s=r.offset;a=n.R((function(t){return t.filter_cells(e.matrix,s,!1)}),e.constructor)}catch(o){throw i.gd(a),o}finally{i.gd(r)}return a}},7067:function(e,t,r){"use strict";r.d(t,{Fu:function(){return v},qv:function(){return y},wf:function(){return b}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(6635),l=r(7108),c=r(5159),h=new WeakMap,f=new WeakMap,d=function(){function e(t,r){(0,n.Z)(this,e),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,o.Z)(this,h,t),(0,o.Z)(this,f,r)}return(0,i.Z)(e,[{key:"numberOfCells",value:function(){return(0,s.Z)(this,f).num_obs()}},{key:"numberOfDims",value:function(){return(0,s.Z)(this,f).num_dim()}},{key:"free",value:function(){null!==(0,s.Z)(this,f)&&(l.A((0,s.Z)(this,h)),(0,o.Z)(this,f,null))}},{key:"index",get:function(){return(0,s.Z)(this,f)}}]),e}();function v(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.numberOfDims,a=void 0===i?null:i,s=n.numberOfCells,o=void 0===s?null:s,h=n.approximate,f=void 0===h||h;try{var v;if(e instanceof c.RY){a=e.numberOfPCs(),o=e.numberOfCells();var m=e.principalComponents({copy:!1});v=m.byteOffset}else{if(null===a||null===o)throw new Error("'numberOfDims' and 'numberOfCells' must be specified when 'x' is an Array");if((t=u.de(e,"Float64WasmArray")).length!=a*o)throw new Error("length of 'x' must be the product of 'numberOfDims' and 'numberOfCells'");v=t.offset}r=l.R((function(e){return e.build_neighbor_index(v,a,o,f)}),d)}catch(p){throw u.gd(r),p}finally{u.gd(t)}return r}var m=new WeakMap,p=new WeakMap,y=function(){function e(t,r){(0,n.Z)(this,e),(0,a.Z)(this,m,{writable:!0,value:void 0}),(0,a.Z)(this,p,{writable:!0,value:void 0}),(0,o.Z)(this,m,t),(0,o.Z)(this,p,r)}return(0,i.Z)(e,[{key:"size",value:function(){return(0,s.Z)(this,p).size()}},{key:"numberOfCells",value:function(){return(0,s.Z)(this,p).num_obs()}},{key:"results",get:function(){return(0,s.Z)(this,p)}},{key:"serialize",value:function(){var e,t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.runs,o=void 0===a?null:a,l=i.indices,c=void 0===l?null:l,h=i.distances,f=void 0===h?null:h,d=(null===o)+(null===c)+(null===f);if(3!=d&&0!=d)throw new Error("either all or none of 'runs', 'indices' and 'distances' can be 'null'");if(3===d)try{t=u.Wf(this.numberOfCells());var v=this.size();r=u.Wf(v),n=u.RJ(v),(0,s.Z)(this,p).serialize(t.offset,r.offset,n.offset),e={runs:t.slice(),indices:r.slice(),distances:n.slice()}}finally{u.gd(t),u.gd(r),u.gd(n)}else(0,s.Z)(this,p).serialize(o.offset,c.offset,f.offset),e={runs:o.array(),indices:c.array(),distances:f.array()};return e}},{key:"free",value:function(){null!==(0,s.Z)(this,p)&&(l.A((0,s.Z)(this,m)),(0,o.Z)(this,p,null))}}],[{key:"unserialize",value:function(t,r,n){var i,a,s,o;try{a=u.de(t,"Int32WasmArray"),s=u.de(r,"Int32WasmArray"),o=u.de(n,"Float64WasmArray"),i=l.R((function(e){return new e.NeighborResults(t.length,a.offset,s.offset,o.offset)}),e)}catch(c){throw u.gd(i),c}finally{u.gd(a),u.gd(s),u.gd(o)}return i}}]),e}();function b(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).numberOfThreads,n=void 0===r?null:r,i=u.mV(n);return l.R((function(r){return r.find_nearest_neighbors(e.index,t,i)}),y)}},9283:function(e,t,r){"use strict";r.d(t,{S:function(){return s}});var n=r(8782),i=r(6635),a=(r(2306),r(6737));function s(e,t){var r,s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.center,l=void 0===u||u,c=o.buffer,h=void 0===c?null:c,f=o.priorCount,d=void 0===f?10:f,v=o.reference,m=void 0===v?null:v,p=o.numberOfThreads,y=void 0===p?null:p,b=i.mV(y);try{if(h instanceof a.lt){if(h.length!==e.numberOfColumns())throw new Error("length of 'buffer' must be equal to the number of columns in 'x'")}else r=i.RJ(e.numberOfColumns()),h=r;s=i.de(t,"Int32WasmArray"),null==m&&(m=-1),n.RE((function(t){return t.grouped_size_factors(e.matrix,s.offset,l,d,m,h.offset,b)}))}catch(w){throw i.gd(r),w}finally{i.gd(s)}return h}},2284:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var n=r(7762);function i(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forceTaxonomy,r=void 0!==t&&t,i=e.length,a=Math.ceil(i/2),s=function(e){return e.confidence/=i,e};e=new Set(e);var o=0,u=0,l=0,c=0,h=0,f=0,d=0,v=0,m=0,p=0,y=0,b=0,w=r?"9606":"human",g=r?"10090":"mouse",_=[],Z=0;if(e.forEach((function(e){e&&e.match(/^ENS[A-Z]*G[0-9]{11}$/)&&Z++})),Z){e.forEach((function(e){e&&(e.startsWith("ENSG")?o++:e.startsWith("ENSMUSG")?u++:e.startsWith("ENSRNOG")?c++:e.startsWith("ENSMFAG")?h++:e.startsWith("ENSDARG")?d++:e.startsWith("ENSPTRG")&&v++)})),_.push({species:w,type:"ensembl",confidence:o}),_.push({species:g,type:"ensembl",confidence:u}),_.push({species:"10116",type:"ensembl",confidence:c}),_.push({species:"9541",type:"ensembl",confidence:h}),_.push({species:"7955",type:"ensembl",confidence:d}),_.push({species:"9598",type:"ensembl",confidence:v});var k,x=(0,n.Z)(_);try{for(x.s();!(k=x.n()).done;){var E=k.value;if(E.confidence>=a)return s(E)}}catch(I){x.e(I)}finally{x.f()}}e.forEach((function(e){e&&e.match(/^[A-Z][^a-z]+$/)&&!e.match(/^ENS[A-Z]+[0-9]{11}/)&&m++}));var C={species:w,type:"symbol",confidence:m};if(C.confidence>=a)return s(C);_.push(C),e.forEach((function(e){e&&e.match(/^[A-Z][^A-Z]+$/)&&p++}));var O={species:g,type:"symbol",confidence:p};if(O.confidence>=a)return s(O);_.push(O),e.forEach((function(e){e&&e.match(/^WBGene[0-9]+$/)&&l++}));var S={species:"6239",type:"ensembl",confidence:l};if(S.confidence>=a)return s(S);_.push(S),e.forEach((function(e){e&&e.match(/^FBgn[0-9]+$/)&&f++}));var A={species:"7227",type:"ensembl",confidence:f};if(A.confidence>=a)return s(A);_.push(A),e.forEach((function(e){e&&e.match(/^[a-z]{3,}-[0-9]+$/)&&y++}));var R={species:"6239",type:"symbol",confidence:y};if(R.confidence>=a)return s(R);_.push(R),e.forEach((function(e){e&&e.match(/^[a-z]{3,}[0-9a-z]+$/)&&b++}));var M={species:"7955",type:"symbol",confidence:b};if(M.confidence>=a)return s(M);_.push(M);for(var N=_[0],W=1;W<_.length;W++)_[W].confidence>N.confidence&&(N=_[W]);return s(N)}},5538:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var n=r(6635),i=r(8782);function a(e,t,r,a){var s,o,u,l,c,h,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=f.numberOfThreads,v=void 0===d?null:d,m=f.assumeSorted,p=void 0!==m&&m,y=n.mV(v),b=null,w=function(e,t,r){if(null!==r&&e.length!==r)throw new Error("array inputs must have the same length (failing for '"+t+"')");return e.length};"number"==typeof e?e=[e]:b=w(e,"markersInSet",b),"number"==typeof t?t=[t]:b=w(t,"numberOfMarkers",b),"number"==typeof r?r=[r]:b=w(r,"featureSetSize",b),"number"==typeof a?a=[a]:b=w(a,"numberOfFeatures",b),null==b&&(b=1);try{s=n.de(e,"Int32WasmArray"),o=n.de(t,"Int32WasmArray"),u=n.de(r,"Int32WasmArray"),l=n.de(a,"Int32WasmArray"),h=n.RJ(b),i.RE((function(e){return e.hypergeometric_test(b,1!=s.length,s.offset,1!=u.length,u.offset,1!=o.length,o.offset,1!=l.length,l.offset,p,h.offset,y)})),c=h.slice()}finally{n.gd(s),n.gd(o),n.gd(u),n.gd(l),n.gd(h)}return c}},8311:function(e,t,r){"use strict";r.d(t,{Bp:function(){return d},EF:function(){return c},N6:function(){return h},_3:function(){return o},gP:function(){return f},us:function(){return l}});var n=r(7108),i=r(8782),a=r(6635),s=r(2306);function o(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.compressed,l=void 0===o?null:o,c=i.layered,h=void 0===c||c,f=null;try{l=u(l),"string"!==typeof e?(t=a.de(e,"Uint8WasmArray"),r=n.R((function(e){return e.read_matrix_market_from_buffer(t.offset,t.length,l,h)}),s.p)):r=n.R((function(t){return t.read_matrix_market_from_file(e,l,h)}),s.p),r.isReorganized()&&(f=r.identities(),r.wipeIdentities())}catch(d){throw a.gd(r),d}finally{a.gd(t)}return{matrix:r,row_ids:f}}function u(e){return null===e?-1:e?1:0}function l(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).compressed,n=void 0===r?null:r,s=a.RJ(3),o={};try{n=u(n),"string"!==typeof e?(t=a.de(e,"Uint8WasmArray"),i.RE((function(e){return e.read_matrix_market_header_from_buffer(t.offset,t.length,n,s.offset)}))):i.RE((function(t){return t.read_matrix_market_header_from_file(e,n,s.offset)}));var l=s.array();o.rows=l[0],o.columns=l[1],o.lines=l[2]}finally{a.gd(t),a.gd(s)}return o}function c(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.forceInteger,u=void 0===o||o,l=i.layered,c=void 0===l||l,h=null;try{(r=n.R((function(r){return r.read_hdf5_matrix(e,t,u,c)}),s.p)).isReorganized()&&(h=r.identities(),r.wipeIdentities())}catch(f){throw a.gd(r),f}return{matrix:r,row_ids:h}}function h(e,t){var r={},n=a.Wf(5);try{i.RE((function(r){return r.extract_hdf5_matrix_details(e,t,n.offset)}));var s=n.array();s[0]>0?r.format="dense":s[1]>0?r.format="csc":r.format="csr",r.rows=s[2],r.columns=s[3],r.integer=s[4]>0}finally{n.free()}return r}function f(e,t,r){var i,o,u=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).forceInteger,l=void 0!==u&&u;try{i=a.de(r,null),o=n.R((function(r){return r.initialize_dense_matrix(e,t,i.offset,i.constructor.className.replace("Wasm",""),l)}),s.p)}catch(c){throw a.gd(o),c}finally{a.gd(i)}return o}function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.consume,o=void 0!==i&&i,u=r.forceInteger,l=void 0===u||u,c=r.layered,h=void 0===c||c,f=null;try{(t=n.R((function(t){return t.initialize_sparse_matrix_from_rds(e.object.$$.ptr,l,h,o)}),s.p)).isReorganized()&&(f=t.identities(),t.wipeIdentities())}catch(d){throw a.gd(t),d}return{matrix:t,row_ids:f}}},6807:function(e,t,r){"use strict";r.d(t,{H:function(){return a},R:function(){return s}});var n=r(6635),i=r(8782);function a(e,t,r){var i,a;try{var s=0,o=!1;if(null!==t){if((i=n.de(t,"Int32WasmArray")).length!=e.numberOfCells())throw new Error("'block' must be of length equal to the number of cells in 'metrics'");o=!0,s=i.offset}a=r(e,o,s)}catch(u){throw n.gd(a),u}finally{n.gd(i)}return a}function s(e,t,r,a){var s,o,u;try{var l,c=0,h=!1;if(null!==r){if((s=n.de(r,"Int32WasmArray")).length!=t.numberOfCells())throw new Error("'block' must be of length equal to the number of cells in 'metrics'");h=!0,c=s.offset}if(null==a)o=n.TS(t.numberOfCells()),l=o.offset;else{if(a.length!=t.numberOfCells())throw new Error("'buffer' must be of length equal to the number of cells in 'metrics'");l=a.offset}i.RE((function(r){return e.filter(t.results.$$.ptr,h,c,l)})),u=null==a?o.slice():a.array()}catch(f){throw n.gd(u),f}finally{n.gd(s),n.gd(o)}return u}},6078:function(e,t,r){"use strict";r.d(t,{$:function(){return i}});r(8782);var n=r(6635);r(6737);function i(e,t,r){var i,a,s=[];try{var o=0,u=0;if(null!=t){o=t.length,u=(a=n.GF(o)).offset;for(var l=a.array(),c=0;c<o;c++){var h=n.de(t[c],"Uint8WasmArray");if(h.length!=e.numberOfRows())throw new Error("length of each array in 'subsets' should be equal to the matrix rows");s.push(h),l[c]=BigInt(h.offset)}}i=r(e.matrix,o,u)}catch(m){throw n.gd(i),m}finally{n.gd(a);for(var f=0,d=s;f<d.length;f++){var v=d[f];n.gd(v)}}return i}},6774:function(e,t,r){"use strict";r.d(t,{C:function(){return s},b:function(){return a}});var n=r(7762),i=r(6635);function a(e,t){var r,i=new TextDecoder,a=[],s=0,o=(0,n.Z)(t);try{for(o.s();!(r=o.n()).done;){var u=r.value,l=e.slice(s,s+u);a.push(i.decode(l)),s+=u}}catch(c){o.e(c)}finally{o.f()}return a}function s(e){var t,r,a,s=(0,n.Z)(e);try{for(s.s();!(a=s.n()).done;){if("string"!=typeof a.value)throw new Error("all entries of 'x' should be strings for a string HDF5 dataset")}}catch(f){s.e(f)}finally{s.f()}try{var o=(r=i.Wf(e.length)).array(),u=0,l=new TextEncoder,c=new Array(e.length);e.forEach((function(e,t){var r=l.encode(e);o[t]=r.length,c[t]=r,u+=r.length}));var h=(t=i.TS(u)).array();u=0,c.forEach((function(e){h.set(e,u),u+=e.length}))}catch(d){throw i.gd(t),i.gd(r),d}return[r,t]}},3779:function(e,t,r){"use strict";r.d(t,{Os:function(){return R},Qj:function(){return A},St:function(){return k},pG:function(){return E},tY:function(){return y}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(7108),l=r(8782),c=r(6635),h=r(2306),f=r(6737),d=r(8311),v=new WeakMap,m=new WeakMap,p=function(){function e(t,r){(0,n.Z)(this,e),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,a.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,v,t),(0,o.Z)(this,m,r)}return(0,i.Z)(e,[{key:"reference",get:function(){return(0,s.Z)(this,m)}},{key:"numberOfSamples",value:function(){return(0,s.Z)(this,m).num_samples()}},{key:"numberOfFeatures",value:function(){return(0,s.Z)(this,m).num_features()}},{key:"numberOfLabels",value:function(){return(0,s.Z)(this,m).num_labels()}},{key:"free",value:function(){null!==(0,s.Z)(this,m)&&(u.A((0,s.Z)(this,v)),(0,o.Z)(this,m,null))}}]),e}();function y(e,t,r){var n,i,a,s;try{i=c.de(e,"Uint8WasmArray"),a=c.de(t,"Uint8WasmArray"),s=c.de(r,"Uint8WasmArray"),n=u.R((function(e){return e.load_singlepp_reference(s.offset,s.length,a.offset,a.length,i.offset,i.length)}),p)}catch(o){throw c.gd(n),o}finally{c.gd(i),c.gd(a),c.gd(s)}return n}var b=new WeakMap,w=new WeakMap,g=function(){function e(t,r){(0,n.Z)(this,e),(0,a.Z)(this,b,{writable:!0,value:void 0}),(0,a.Z)(this,w,{writable:!0,value:void 0}),(0,o.Z)(this,b,t),(0,o.Z)(this,w,r)}return(0,i.Z)(e,[{key:"reference",get:function(){return(0,s.Z)(this,w)}},{key:"sharedFeatures",value:function(){return(0,s.Z)(this,w).shared_features()}},{key:"free",value:function(){null!==(0,s.Z)(this,w)&&(u.A((0,s.Z)(this,b)),(0,o.Z)(this,w,null))}}]),e}();function _(e,t){var r=t.array(),n={},i=0;return e.forEach((function(e){null!==e&&(n[e]=i),r[i]=i,i++})),n}function Z(e,t,r){var n=r.array(),i=Object.keys(t).length;e.forEach((function(e,r){null!==e&&e in t?n[r]=t[e]:(n[r]=i,i++)}))}function k(e,t,r){var n,i,a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=s.top,l=void 0===o?20:o,h=s.numberOfThreads,f=void 0===h?null:h,d=c.mV(f);try{var v=e.length;if(n=c.Wf(v),i=c.Wf(t.numberOfFeatures()),r.length!=i.length)throw new Error("length of 'referenceFeatures' should be equal to the number of features in 'reference'");Z(r,_(e,n),i),(a=u.R((function(e){return e.build_singlepp_reference(v,n.offset,t.reference,i.offset,l,d)}),g)).expectedNumberOfFeatures=v}catch(m){throw c.gd(a),m}finally{c.gd(n),c.gd(i)}return a}function x(e,t,r,n,i,a,s){var o,u,l=null,v=r instanceof f.do;try{var m,p;if(e instanceof h.p)m=e.matrix;else{if(!(e instanceof f.lt))throw new Error("unknown type for 'x'");m=(o=d.gP(n,i,e,{forceInteger:!1})).matrix}if(m.nrow()!=t)throw new Error("number of rows in 'x' should be equal to length of 'features' used to build '"+s+"'");p=v?r.offset:(u=c.Wf(m.ncol())).offset,a(m,p),v||(l=u.slice())}finally{c.gd(undefined),c.gd(o),c.gd(u)}return l}function E(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.buffer,i=void 0===n?null:n,a=r.numberOfFeatures,s=void 0===a?null:a,o=r.numberOfCells,u=void 0===o?null:o,h=r.quantile,f=void 0===h?.8:h,d=r.numberOfThreads,v=void 0===d?null:d,m=c.mV(v),p=x(e,t.expectedNumberOfFeatures,i,s,u,(function(e,r){l.RE((function(n){return n.run_singlepp(e,t.reference,f,r,m)}))}),"reference");return null===p&&(p=i.array()),p}var C=new WeakMap,O=new WeakMap,S=function(){function e(t,r){(0,n.Z)(this,e),(0,a.Z)(this,C,{writable:!0,value:void 0}),(0,a.Z)(this,O,{writable:!0,value:void 0}),(0,o.Z)(this,C,t),(0,o.Z)(this,O,r)}return(0,i.Z)(e,[{key:"integrated",get:function(){return(0,s.Z)(this,O)}},{key:"numberOfReferences",value:function(){return(0,s.Z)(this,O).num_references()}},{key:"free",value:function(){null!==(0,s.Z)(this,O)&&(u.A((0,s.Z)(this,C)),(0,o.Z)(this,O,null))}}]),e}();function A(e,t,r,n){var i,a,s,o,l,h=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).numberOfThreads,d=void 0===h?null:h,v=c.mV(d),m=t.length;if(r.length!=m)throw new Error("'loaded' and 'referenceFeatures' should be of the same length");if(n.length!=m)throw new Error("'loaded' and 'built' should be of the same length");for(var p=0;p<m;p++)if(t[p].numberOfFeatures()!=r[p].length)throw new Error("length of each 'referenceFeatures' should be equal to the number of features in the corresponding 'loaded'");var y=new Array(m);try{i=c.Wf(e.length);var b=_(e,i),w=(a=c.GF(m)).array();for(p=0;p<m;p++)w[p]=BigInt(t[p].reference.$$.ptr);var g=(s=c.GF(m)).array();for(p=0;p<m;p++){var k=r[p];k instanceof f.do?g[p]=BigInt(k.offset):(y[p]=c.Wf(k.length),Z(k,b,y[p]),g[p]=BigInt(y[p].offset))}var x=(o=c.GF(m)).array();for(p=0;p<m;p++)x[p]=BigInt(n[p].reference.$$.ptr);(l=u.R((function(t){return t.integrate_singlepp_references(e.length,i.offset,m,a.offset,s.offset,o.offset,v)}),S)).expectedNumberOfFeatures=e.length}catch(A){throw c.gd(l),A}finally{c.gd(i),c.gd(a),c.gd(o),c.gd(s);for(var E=0,C=y;E<C.length;E++){var O=C[E];c.gd(O)}}return l}function R(e,t,r){var n,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.buffer,o=void 0===s?null:s,u=a.numberOfFeatures,f=void 0===u?null:u,d=a.numberOfCells,v=void 0===d?null:d,m=a.quantile,p=void 0===m?.8:m,y=a.numberOfThreads,b=void 0===y?null:y,w=r.numberOfReferences();if(t.length!=w)throw new Error("length of 'assigned' should be equal to the number of references in 'integrated'");var g=new Array(w),_=c.mV(b);try{for(var Z=(i=c.GF(w)).array(),k=0;k<t.length;k++){var E=t[k],C=!1;if(e instanceof h.p?E.length!=e.numberOfColumns()&&(C=!0):E.length!=v&&(C=!0),C)throw new Error("length of each element 'assigned' should be equal to number of columns in 'x'");g[k]=c.de(E,"Int32WasmArray"),Z[k]=BigInt(g[k].offset)}n=x(e,r.expectedNumberOfFeatures,o,f,v,(function(e,t){l.RE((function(n){return n.integrate_singlepp(e,Z.offset,r.integrated,p,t,_)}))}),"integrated")}finally{c.gd(i);for(var O=0,S=g;O<S.length;O++){var A=S[O];c.gd(A)}}return null===n&&(n=o.array()),n}},1184:function(e,t,r){"use strict";r.d(t,{g:function(){return o},v:function(){return u}});var n=r(7108),i=r(6635),a=r(6737),s=r(8782);function o(e){var t,r,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.sizeFactors,u=void 0===o?null:o,l=s.center,c=void 0===l||l,h=s.block,f=void 0===h?null:h,d=s.allowZeros,v=void 0!==d&&d;try{var m=0,p=!1;if(null!==u){if((t=i.de(u,"Float64WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'sizeFactors' must be equal to number of columns in 'x'");m=t.offset,p=!0}var y=0,b=!1;if(null!==f){if((r=i.de(f,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("'block' must be of length equal to the number of columns in 'x'");b=!0,y=r.offset}a=n.R((function(t){return t.log_norm_counts(e.matrix,p,m,b,y,c,v)}),e.constructor)}catch(w){throw i.gd(a),w}finally{i.gd(t),i.gd(r)}return a}function u(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.block,u=void 0===o?null:o,l=n.buffer,c=void 0===l?null:l;try{null===c&&(t=i.RJ(e.length),c=t),c!==e&&c.set(e instanceof a.PQ?e.array():e);var h=0,f=!1;if(null!==u){if((r=i.de(u,"Int32WasmArray")).length!=c.length)throw new Error("'block' must be of length equal to that of 'sizeFactors'");f=!0,h=r.offset}s.RE((function(e){return e.center_size_factors(c.length,c.offset,f,h)}))}catch(d){throw i.gd(t),d}finally{i.gd(r)}return c}},5696:function(e,t,r){"use strict";r.d(t,{F:function(){return s}});var n=r(6635),i=r(5159),a=r(8782);function s(e,t){var r,s,o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=u.buffer,c=void 0===l?null:l,h=u.numberOfDims,f=void 0===h?null:h,d=u.numberOfCells,v=void 0===d?null:d,m=u.k,p=void 0===m?15:m,y=u.numberOfMADs,b=void 0===y?3:y,w=u.robustIterations,g=void 0===w?2:w,_=u.robustTrim,Z=void 0===_?.25:_,k=u.referencePolicy,x=void 0===k?"max-rss":k,E=u.approximate,C=void 0===E||E,O=u.numberOfThreads,S=void 0===O?null:O,A=n.mV(S);try{if(e instanceof i.RY)f=e.numberOfPCs(),v=e.numberOfCells(),e=e.principalComponents({copy:"view"});else{if(null===f||null===v||f*v!==e.length)throw new Error("length of 'x' must be equal to the product of 'numberOfDims' and 'numberOfCells'");s=n.de(e,"Float64WasmArray"),e=s}if(null==c)r=n.RJ(v*f),c=r;else if(c.length!==e.length)throw new Error("length of 'buffer' must be equal to the product of the number of dimensions and cells");if((o=n.de(t,"Int32WasmArray")).length!=v)throw new Error("'block' must be of length equal to the number of cells in 'x'");a.RE((function(t){return t.mnn_correct(f,v,e.offset,o.offset,c.offset,p,b,g,Z,x,C,A)}))}catch(R){throw n.gd(r),R}finally{n.gd(s)}return c}},4812:function(e,t,r){"use strict";r.d(t,{rY:function(){return _}});var n=r(5671),i=r(3144),a=r(8652),s=r(2346),o=r(3889),u=r(8916),l=r(2793),c=r(7108),h=r(6635),f=new WeakMap,d=new WeakMap,v=new WeakMap,m=new WeakMap,p=new WeakMap,y=new WeakMap,b=new WeakSet,w=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,b),(0,s.Z)(this,f,{writable:!0,value:void 0}),(0,s.Z)(this,d,{writable:!0,value:void 0}),(0,s.Z)(this,v,{writable:!0,value:void 0}),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,y,{writable:!0,value:void 0}),(0,l.Z)(this,f,t),(0,l.Z)(this,d,r),(0,l.Z)(this,v,h.oH(this.numberOfBlocks()+1,i)),(0,l.Z)(this,m,h.oH(this.numberOfBlocks()+1,i)),(0,l.Z)(this,p,h.oH(this.numberOfBlocks()+1,i)),(0,l.Z)(this,y,h.oH(this.numberOfBlocks()+1,i))}return(0,i.Z)(e,[{key:"means",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.block,r=void 0===t?null:t,n=e.copy,i=void 0===n||n,a=e.fillable,s=void 0!==a&&a;return(0,o.Z)(this,b,g).call(this,r,i,s,(0,u.Z)(this,v),"means")}},{key:"variances",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.block,r=void 0===t?null:t,n=e.copy,i=void 0===n||n,a=e.fillable,s=void 0!==a&&a;return(0,o.Z)(this,b,g).call(this,r,i,s,(0,u.Z)(this,m),"variances")}},{key:"fitted",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.block,r=void 0===t?null:t,n=e.copy,i=void 0===n||n,a=e.fillable,s=void 0!==a&&a;return(0,o.Z)(this,b,g).call(this,r,i,s,(0,u.Z)(this,p),"fitted")}},{key:"residuals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.block,r=void 0===t?null:t,n=e.copy,i=void 0===n||n,a=e.fillable,s=void 0!==a&&a;return(0,o.Z)(this,b,g).call(this,r,i,s,(0,u.Z)(this,y),"residuals")}},{key:"numberOfBlocks",value:function(){return(0,u.Z)(this,d).num_blocks()}},{key:"free",value:function(){null!==(0,u.Z)(this,d)&&(c.A((0,u.Z)(this,f)),(0,l.Z)(this,d,null))}}]),e}();function g(e,t,r,n,i){var a=this,s=e;if(null==e){var o=this.numberOfBlocks();s=o>1?o:0,e=-1}return h.Hw(r,t,n[s],(function(){n[s]=!0}),(function(t){return h.Yj((0,u.Z)(a,d)[i](e),t)}))}function _(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.block,a=void 0===i?null:i,s=n.span,o=void 0===s?.3:s,u=n.numberOfThreads,l=void 0===u?null:u,f=h.mV(l);try{var d=0,v=!1;if(null!==a){if((t=h.de(a,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("'block' must be of length equal to the number of columns in 'x'");v=!0,d=t.offset}r=c.R((function(t){return t.model_gene_var(e.matrix,v,d,o,f)}),w)}catch(m){throw h.gd(r),m}finally{h.gd(t)}return r}},9206:function(e,t,r){"use strict";r.d(t,{dH:function(){return y},yf:function(){return p}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(7108),l=r(6635),c=r(6078),h=new WeakMap,f=new WeakMap,d=new WeakMap,v=new WeakMap,m=new WeakMap,p=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,a.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,h,t),(0,o.Z)(this,f,r),(0,o.Z)(this,d,i),(0,o.Z)(this,v,i),(0,o.Z)(this,m,l.oH(this.numberOfSubsets(),i))}return(0,i.Z)(e,[{key:"results",get:function(){return(0,s.Z)(this,f)}},{key:"sums",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,d),(function(){(0,o.Z)(e,d,!0)}),(function(t){return l.Yj((0,s.Z)(e,f).sums(),t)}))}},{key:"detected",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,v),(function(){(0,o.Z)(e,v,!0)}),(function(t){return l.Yj((0,s.Z)(e,f).detected(),t)}))}},{key:"subsetTotals",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.copy,i=void 0===n||n,a=r.fillable,o=void 0!==a&&a;return l.Hw(o,i,(0,s.Z)(this,m)[e],(function(){(0,s.Z)(t,m)[e]=!0}),(function(r){return l.Yj((0,s.Z)(t,f).subset_totals(e),r)}))}},{key:"numberOfSubsets",value:function(){return(0,s.Z)(this,f).num_subsets()}},{key:"numberOfCells",value:function(){return(0,s.Z)(this,f).num_cells()}},{key:"free",value:function(){null!==(0,s.Z)(this,f)&&(u.A((0,s.Z)(this,h)),(0,o.Z)(this,f,null))}}]),e}();function y(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).numberOfThreads,n=void 0===r?null:r,i=l.mV(n);return c.$(e,t,(function(e,t,r){return u.R((function(n){return n.per_cell_adt_qc_metrics(e,t,r,i)}),p)}))}},2945:function(e,t,r){"use strict";r.d(t,{J4:function(){return y},UY:function(){return p}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(7108),l=r(6635),c=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,v=new WeakMap,m=new WeakMap,p=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,c,{writable:!0,value:void 0}),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,a.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,c,t),(0,o.Z)(this,h,r),(0,o.Z)(this,f,i),(0,o.Z)(this,d,i),(0,o.Z)(this,v,i),(0,o.Z)(this,m,i)}return(0,i.Z)(e,[{key:"results",get:function(){return(0,s.Z)(this,h)}},{key:"sums",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,f),(function(){(0,o.Z)(e,f,!0)}),(function(t){return l.Yj((0,s.Z)(e,h).sums(),t)}))}},{key:"detected",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,d),(function(){(0,o.Z)(e,d,!0)}),(function(t){return l.Yj((0,s.Z)(e,h).detected(),t)}),"detected")}},{key:"maxProportions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,v),(function(){(0,o.Z)(e,v,!0)}),(function(t){return l.Yj((0,s.Z)(e,h).max_proportion(),t)}))}},{key:"maxIndex",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,m),(function(){(0,o.Z)(e,m,!0)}),(function(t){return l.Yj((0,s.Z)(e,h).max_index(),t)}),"maxIndex")}},{key:"numberOfCells",value:function(){return(0,s.Z)(this,h).num_cells()}},{key:"free",value:function(){null!==(0,s.Z)(this,h)&&(u.A((0,s.Z)(this,c)),(0,o.Z)(this,h,null))}}]),e}();function y(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).numberOfThreads,r=void 0===t?null:t,n=l.mV(r);return u.R((function(t){return t.per_cell_crispr_qc_metrics(e.matrix,n)}),p)}},5448:function(e,t,r){"use strict";r.d(t,{eD:function(){return p},wj:function(){return y}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(7108),l=r(6635),c=r(6078),h=new WeakMap,f=new WeakMap,d=new WeakMap,v=new WeakMap,m=new WeakMap,p=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,a.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,h,t),(0,o.Z)(this,f,r),(0,o.Z)(this,d,i),(0,o.Z)(this,v,i),(0,o.Z)(this,m,l.oH(this.numberOfSubsets(),i))}return(0,i.Z)(e,[{key:"results",get:function(){return(0,s.Z)(this,f)}},{key:"sums",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,d),(function(){(0,o.Z)(e,d,!0)}),(function(t){return l.Yj((0,s.Z)(e,f).sums(),t)}))}},{key:"detected",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,v),(function(){(0,o.Z)(e,v,!0)}),(function(t){return l.Yj((0,s.Z)(e,f).detected(),t)}))}},{key:"subsetProportions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.copy,i=void 0===n||n,a=r.fillable,o=void 0!==a&&a;return l.Hw(o,i,(0,s.Z)(this,m)[e],(function(){(0,s.Z)(t,m)[e]=!0}),(function(r){return l.Yj((0,s.Z)(t,f).subset_proportions(e),r)}))}},{key:"numberOfSubsets",value:function(){return(0,s.Z)(this,f).num_subsets()}},{key:"numberOfCells",value:function(){return(0,s.Z)(this,f).num_cells()}},{key:"free",value:function(){null!==(0,s.Z)(this,f)&&(u.A((0,s.Z)(this,h)),(0,o.Z)(this,f,null))}}]),e}();function y(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).numberOfThreads,n=void 0===r?null:r,i=l.mV(n);return c.$(e,t,(function(e,t,r){return u.R((function(n){return n.per_cell_rna_qc_metrics(e,t,r,i)}),p)}))}},6974:function(e,t,r){"use strict";r.d(t,{C:function(){return u}});var n=r(2494),i=r(1184),a=r(9283),s=r(5159),o=r(6635);function u(e){var t,r,u,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=c.numberOfClusters,f=void 0===h?20:h,d=c.numberOfPCs,v=void 0===d?25:d,m=c.totals,p=void 0===m?null:m,y=c.block,b=void 0===y?null:y,w=c.buffer,g=void 0===w?null:w,_=c.numberOfThreads,Z=void 0===_?null:_;try{t=(0,i.g)(e,{sizeFactors:p,block:b}),r=(0,s.dO)(t,{numberOfPCs:Math.min(t.numberOfRows()-1,v),numberOfThreads:Z,block:b,blockMethod:"weight"})}finally{o.gd(t)}try{u=(0,n.eu)(r,f,{numberOfThreads:Z})}finally{o.gd(r)}try{if(null===g)g=l=o.RJ(e.numberOfColumns());else if(g.length!==e.numberOfColumns())throw new Error("length of 'buffer' should be equal to the number of columns in 'x'");(0,a.S)(e,u.clusters({copy:"view"}),{buffer:g,numberOfThreads:Z})}catch(k){throw o.gd(l),k}finally{o.gd(u)}return g}},6663:function(e,t,r){"use strict";r.d(t,{BA:function(){return _},D6:function(){return p},II:function(){return w},SV:function(){return g},p$:function(){return O},qu:function(){return m}});var n=r(2346),i=r(8916),a=r(2793),s=r(136),o=r(9388),u=r(5671),l=r(3144),c=r(6635),h=r(8782),f=r(7108),d=r(6774),v=function(){function e(t,r,n){(0,u.Z)(this,e),this.id=t,this.object=r,this.parent=n}return(0,l.Z)(e,[{key:"type",value:function(){return this.object.type()}},{key:"free",value:function(){null!==this.object&&(f.A(this.id),this.object=null)}}]),e}(),m=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,i){return(0,u.Z)(this,r),t.call(this,e,n,i)}return(0,l.Z)(r,[{key:"length",value:function(){return this.object.size()}},{key:"attributeNames",value:function(){var e=this;return h.RE((function(t){e.object.fill_attribute_names();var r=e.object.attribute_names_buffer(),n=e.object.attribute_names_length();return d.b(r,n)}))}},{key:"findAttribute",value:function(e){var t=this;return h.RE((function(r){return t.object.find_attribute(e)}))}},{key:"attribute",value:function(e){var t=this;return k("number"==typeof e?function(r){return t.object.load_attribute_by_index(e)}:function(r){return t.object.load_attribute_by_name(e)},this.parent)}}]),r}(v),p=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,i){return(0,u.Z)(this,r),t.call(this,e,n,i)}return(0,l.Z)(r,[{key:"values",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e;return c.Yj(this.object.numeric_vector(),t)}}]),r}(m),y=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,i){return(0,u.Z)(this,r),t.call(this,e,n,i)}return(0,l.Z)(r,[{key:"values",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e;return c.Yj(this.object.numeric_vector(),t)}}]),r}(m),b=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,i){return(0,u.Z)(this,r),t.call(this,e,n,i)}return(0,l.Z)(r,[{key:"values",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).copy,t=void 0===e||e;return c.Yj(this.object.numeric_vector(),t)}}]),r}(m),w=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,i){return(0,u.Z)(this,r),t.call(this,e,n,i)}return(0,l.Z)(r,[{key:"values",value:function(){var e=this;return h.RE((function(t){e.object.fill_string_vector();var r=e.object.string_vector_buffer(),n=e.object.string_vector_length();return d.b(r,n)}))}}]),r}(m),g=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,i){return(0,u.Z)(this,r),t.call(this,e,n,i)}return(0,l.Z)(r,[{key:"load",value:function(e){var t=this;return k((function(r){return t.object.load_list_element(e)}),this.parent)}}]),r}(m),_=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,i){return(0,u.Z)(this,r),t.call(this,e,n,i)}return(0,l.Z)(r,[{key:"className",value:function(){var e=this;return h.RE((function(t){return e.object.class_name()}))}},{key:"packageName",value:function(){var e=this;return h.RE((function(t){return e.object.package_name()}))}},{key:"attributeNames",value:function(){var e=this;return h.RE((function(t){e.object.fill_attribute_names();var r=e.object.attribute_names_buffer(),n=e.object.attribute_names_length();return d.b(r,n)}))}},{key:"findAttribute",value:function(e){var t=this;return h.RE((function(r){return t.object.find_attribute(e)}))}},{key:"attribute",value:function(e){var t=this;return k("number"==typeof e?function(r){return t.object.load_attribute_by_index(e)}:function(r){return t.object.load_attribute_by_name(e)},this.parent)}}]),r}(v),Z=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,i){return(0,u.Z)(this,r),t.call(this,e,n,i)}return(0,l.Z)(r)}(m);function k(e,t){var r,n=h.RE(e),i=null;try{i=n.type()}catch(a){throw n.delete(),a}return r="integer"==i?p:"double"==i?b:"boolean"==i?y:"string"==i?w:"vector"==i?g:"S4"==i?_:"null"==i?Z:v,f.R((function(e){return n}),r,t)}var x=new WeakMap,E=new WeakMap,C=function(){function e(t,r){(0,u.Z)(this,e),(0,n.Z)(this,x,{writable:!0,value:void 0}),(0,n.Z)(this,E,{writable:!0,value:void 0}),(0,a.Z)(this,x,t),(0,a.Z)(this,E,r)}return(0,l.Z)(e,[{key:"formatVersion",value:function(){return(0,i.Z)(this,E).format_version()}},{key:"writerVersion",value:function(){var e=(0,i.Z)(this,E).writer_version();return String(e[0])+"."+String(e[1])+"."+String(e[2])}},{key:"readerVersion",value:function(){var e=(0,i.Z)(this,E).reader_version();return String(e[0])+"."+String(e[1])+"."+String(e[2])}},{key:"value",value:function(){var e=this;return k((function(t){return(0,i.Z)(e,E).load()}),this)}},{key:"free",value:function(){null!==(0,i.Z)(this,E)&&(f.A((0,i.Z)(this,x)),(0,a.Z)(this,E,null))}}]),e}();function O(e){var t,r;try{"string"==typeof e?r=f.R((function(t){return t.parse_rds_from_file(e)}),C):(t=c.de(e,"Uint8WasmArray"),r=f.R((function(e){return e.parse_rds_from_buffer(t.offset,t.length)}),C))}finally{c.gd(t)}return r}},5159:function(e,t,r){"use strict";r.d(t,{RY:function(){return m},dO:function(){return p}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(7108),l=r(6635),c=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,v=new WeakMap,m=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,c,{writable:!0,value:void 0}),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,o.Z)(this,c,t),(0,o.Z)(this,h,r),(0,o.Z)(this,f,i),(0,o.Z)(this,d,i),(0,o.Z)(this,v,i)}return(0,i.Z)(e,[{key:"principalComponents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,f),(function(){(0,o.Z)(e,f,!0)}),(function(t){return l.Yj((0,s.Z)(e,h).pcs(),t)}))}},{key:"setTotalVariance",value:function(e){(0,s.Z)(this,v)||(0,o.Z)(this,v,!0),(0,s.Z)(this,h).set_total_variance(e)}},{key:"varianceExplained",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,d),(function(){(0,o.Z)(e,d,!0)}),(function(t){return l.Yj((0,s.Z)(e,h).variance_explained(),t)}))}},{key:"totalVariance",value:function(){return(0,s.Z)(this,v)?(0,s.Z)(this,h).total_variance():null}},{key:"numberOfPCs",value:function(){return(0,s.Z)(this,h).num_pcs()}},{key:"numberOfCells",value:function(){return this.principalComponents({copy:!1}).length/this.numberOfPCs()}},{key:"free",value:function(){null!==(0,s.Z)(this,h)&&(u.A((0,s.Z)(this,c)),(0,o.Z)(this,h,null))}}]),e}();function p(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.features,s=void 0===a?null:a,o=i.numberOfPCs,c=void 0===o?25:o,h=i.scale,f=void 0!==h&&h,d=i.block,v=void 0===d?null:d,p=i.blockMethod,y=void 0===p?"regress":p,b=i.numberOfThreads,w=void 0===b?null:b;l.c2("blockMethod",y,["none","regress","weight"]);var g=l.mV(w);try{var _=!1,Z=0;if(null!==s){if((t=l.de(s,"Uint8WasmArray")).length!=e.numberOfRows())throw new Error("length of 'features' should be equal to number of rows in 'x'");_=!0,Z=t.offset}if(c=Math.min(c,e.numberOfRows()-1,e.numberOfColumns()-1),null===v||"none"==y)n=u.R((function(t){return t.run_pca(e.matrix,c,_,Z,f,g)}),m);else{if((r=l.de(v,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'block' should be equal to the number of columns in 'x'");if("regress"==y)n=u.R((function(t){return t.run_blocked_pca(e.matrix,c,_,Z,f,r.offset,g)}),m);else{if("weight"!=y)throw new Error("unknown value '"+y+"' for 'blockMethod='");n=u.R((function(t){return t.run_multibatch_pca(e.matrix,c,_,Z,f,r.offset,g)}),m)}}}catch(k){throw l.gd(n),k}finally{l.gd(t),l.gd(r)}return n}},4181:function(e,t,r){"use strict";r.d(t,{Tk:function(){return i}});r(6635);var n=r(8782);r(7108),r(7067);function i(e){return n.RE((function(t){return t.perplexity_to_k(e)}))}},5319:function(e,t,r){"use strict";r(6635),r(8782),r(7108),r(7067)},2732:function(e,t,r){"use strict";r.d(t,{j:function(){return a}});var n=r(8782),i=r(6635);r(7067);function a(e,t){var r,a,s,o,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=l.neighbors,h=void 0===c?20:c,f=l.indices,d=void 0===f?null:f,v=l.buffer,m=void 0===v?null:v,p=l.approximate,y=void 0===p||p,b=l.weights,w=void 0===b?null:b,g=l.numberOfThreads,_=void 0===g?null:g,Z=e.length,k=i.mV(_);try{for(var x=(r=i.GF(Z)).array(),E=0;E<Z;E++)x[E]=BigInt(e[E].offset);var C=0,O=!1;if(null!==w){if(O=!0,(o=i.de(w,"Float64WasmArray")).length!=Z)throw new Error("length of 'weights' should be equal to the number of embeddings");C=o.offset}var S=function(e){var r=e*t;if(null===m)u=i.RJ(r),m=u;else if(r!==m.length)throw new Error("length of 'buffer' should be equal to the product of 'numberOfCells' and the total number of dimensions")};if(null!==d){if(Z!==d.length)throw new Error("'indices' and 'embeddings' should have the same length");var A=(a=i.GF(Z)).array(),R=0;for(E=0;E<Z;E++){var M=d[E];if(t!=M.numberOfCells())throw new Error("each element of 'indices' should have the same number of cells as 'numberOfCells'");if(e[E].length!=M.numberOfCells()*M.numberOfDims())throw new Error("length of arrays in 'embeddings' should equal the length of arrays used to build 'indices'");A[E]=BigInt(d[E].index.$$.ptr),R+=d[E].numberOfDims()}S(R),n.RE((function(e){return e.scale_by_neighbors_indices(t,Z,r.offset,a.offset,m.offset,h,O,C,k)}))}else{var N=(s=i.Wf(Z)).array(),W=0;for(E=0;E<Z;E++){var I=e[E].length;if(N[E]=Math.floor(I/t),t*N[E]!==I)throw new Error("length of arrays in 'embeddings' should be a multiple of 'numberOfCells'");W+=N[E]}S(W),n.RE((function(e){return e.scale_by_neighbors_matrices(t,Z,s.offset,r.offset,m.offset,h,O,C,y,k)}))}}catch(F){throw i.gd(u),F}finally{for(var z=0,D=[];z<D.length;z++){D[z].free()}i.gd(r),i.gd(a),i.gd(o),i.gd(s)}return m}},7039:function(e,t,r){"use strict";r.d(t,{B:function(){return a}});r(7108);var n=r(8782),i=r(6635);r(6737);function a(e,t){var r,a,s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.block,l=void 0===u?null:u,c=o.scale,h=void 0!==c&&c,f=o.numberOfThreads,d=void 0===f?null:f,v={},m=i.mV(d);try{if(t.length!==e.numberOfRows())throw new Error("Uint8Array 'features' must be of length equal to the number of rows in 'x'");a=i.de(t,"Uint8WasmArray");var p=0,y=!1;if(null!==l){if((s=i.de(l,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("'block' must be of length equal to the number of columns in 'x'");y=!0,p=s.offset}r=n.RE((function(t){return t.score_feature_set(e.matrix,a.offset,y,p,h,m)})),v.weights=r.weights().slice(),v.scores=r.scores().slice()}finally{i.gd(s),i.gd(a),r&&r.delete()}return v}},9249:function(e,t,r){"use strict";r.d(t,{y5:function(){return C}});var n=r(5671),i=r(3144),a=r(8652),s=r(2346),o=r(3889),u=r(8916),l=r(2793),c=r(7108),h=r(8782),f=r(6635);function d(e,t,r,n,i,a){return f.Hw(r,n,i.filled||i.details[e][t]||!1,(function(){i.details[e][t]=!0}),a)}function v(e){if("number"==typeof e)return e;var t;switch(e){case"minimum":t=0;break;case"mean":t=1;break;case"median":t=2;break;case"maximum":t=3;break;case"min-rank":t=4;break;default:throw new Error("unknown summary type '"+e+"'")}return t}var m=new WeakMap,p=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,_=new WeakMap,Z=new WeakMap,k=new WeakSet,x=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,k),(0,s.Z)(this,m,{writable:!0,value:void 0}),(0,s.Z)(this,p,{writable:!0,value:void 0}),(0,s.Z)(this,y,{writable:!0,value:void 0}),(0,s.Z)(this,b,{writable:!0,value:void 0}),(0,s.Z)(this,w,{writable:!0,value:void 0}),(0,s.Z)(this,g,{writable:!0,value:void 0}),(0,s.Z)(this,_,{writable:!0,value:void 0}),(0,s.Z)(this,Z,{writable:!0,value:void 0}),(0,l.Z)(this,m,t),(0,l.Z)(this,p,r);var o=this.numberOfGroups(),u=this.numberOfBlocks();function c(e){var t={filled:e};if(!e){t.details=new Array(o);for(var r=0;r<o;r++)t.details[r]=f.oH(u+1,e)}return t}function h(e){var t={filled:e};if(!e){t.details=new Array(o);for(var r=0;r<o;r++)t.details[r]={}}return t}(0,l.Z)(this,y,c(i)),(0,l.Z)(this,b,c(i)),(0,l.Z)(this,w,h(i)),(0,l.Z)(this,g,h(i)),(0,l.Z)(this,_,h(i)),(0,l.Z)(this,Z,h(i))}return(0,i.Z)(e,[{key:"numberOfBlocks",value:function(){return(0,u.Z)(this,p).num_blocks()}},{key:"numberOfGroups",value:function(){return(0,u.Z)(this,p).num_groups()}},{key:"means",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.block,n=void 0===r?null:r,i=t.copy,a=void 0===i||i,s=t.fillable,l=void 0!==s&&s;return(0,o.Z)(this,k,E).call(this,e,n,a,l,(0,u.Z)(this,y),"means")}},{key:"detected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.block,n=void 0===r?null:r,i=t.copy,a=void 0===i||i,s=t.fillable,l=void 0!==s&&s;return(0,o.Z)(this,k,E).call(this,e,n,a,l,(0,u.Z)(this,b),"detected")}},{key:"cohen",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.summary,i=void 0===n?"mean":n,a=r.copy,s=void 0===a||a,o=r.fillable,l=void 0!==o&&o;return i=v(i),d(e,i,l,s,(0,u.Z)(this,w),(function(r){return f.Yj(h.RE((function(r){return(0,u.Z)(t,p).cohen(e,i)})),r)}))}},{key:"auc",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.summary,i=void 0===n?"mean":n,a=r.copy,s=void 0===a||a,o=r.fillable,l=void 0!==o&&o;return i=v(i),d(e,i,l,s,(0,u.Z)(this,_),(function(r){return f.Yj(h.RE((function(r){return(0,u.Z)(t,p).auc(e,i)})),r)}))}},{key:"lfc",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.summary,i=void 0===n?"mean":n,a=r.copy,s=void 0===a||a,o=r.fillable,l=void 0!==o&&o;return i=v(i),d(e,i,l,s,(0,u.Z)(this,g),(function(r){return f.Yj(h.RE((function(r){return(0,u.Z)(t,p).lfc(e,i)})),r)}))}},{key:"deltaDetected",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.summary,i=void 0===n?"mean":n,a=r.copy,s=void 0===a||a,o=r.fillable,l=void 0!==o&&o;return i=v(i),d(e,i,l,s,(0,u.Z)(this,Z),(function(r){return f.Yj(h.RE((function(r){return(0,u.Z)(t,p).delta_detected(e,i)})),r)}))}},{key:"free",value:function(){null!==(0,u.Z)(this,p)&&(c.A((0,u.Z)(this,m)),(0,l.Z)(this,p,null))}}]),e}();function E(e,t,r,n,i,a){var s=this,o=t;if(null==t){var l=this.numberOfBlocks();o=l>1?l:0,t=-1}return f.Hw(n,r,i.filled||i.details[e][o]||!1,(function(){i.details[e][o]=!0}),(function(r){return f.Yj((0,u.Z)(s,p)[a](e,t),r)}))}function C(e,t){var r,n,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=a.block,o=void 0===s?null:s,u=a.numberOfThreads,l=void 0===u?null:u,h=a.lfcThreshold,d=void 0===h?0:h,v=a.computeAuc,m=void 0===v||v,p=a.computeMedian,y=void 0!==p&&p,b=a.computeMaximum,w=void 0!==b&&b,g=f.mV(l);try{if((i=f.de(t,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("length of 'groups' should be equal to number of columns in 'x'");var _=0,Z=!1;if(null!==o){if((n=f.de(o,"Int32WasmArray")).length!=e.numberOfColumns())throw new Error("'block' must be of length equal to the number of columns in 'x'");Z=!0,_=n.offset}r=c.R((function(t){return t.score_markers(e.matrix,i.offset,Z,_,d,m,y,w,g)}),x)}catch(k){throw f.gd(r),k}finally{f.gd(n),f.gd(i)}return r}},1196:function(e,t,r){"use strict";r.d(t,{ZW:function(){return o},vc:function(){return u}});var n=r(6635),i=r(8782),a=r(4021);function s(e,t){var r,a,s,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,u=void 0!==o&&o;try{u?a=e:(r=e.clone(),a=r),s=n.de(t,"Int32WasmArray"),i.RE((function(e){return e.row_subset(a.matrix,s.offset,s.length)}))}catch(l){throw n.gd(r),l}finally{n.gd(s)}return a}function o(e,t){var r,a,s,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inPlace,u=void 0!==o&&o;try{u?a=e:(r=e.clone(),a=r),s=n.de(t,"Int32WasmArray"),i.RE((function(e){return e.column_subset(a.matrix,s.offset,s.length)}))}catch(l){throw n.gd(r),l}finally{n.gd(s)}return a}function u(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.singleNull,o=void 0!==i&&i,u=n.createMultiMatrix,l=void 0!==u&&u,c={},h=Object.keys(t);if(1==h.length){var f=t[h[0]],d=f.length==e.numberOfRows();if(d)for(var v=0;v<f.length;v++)if(v!=f[v]){d=!1;break}if(d)return o?null:(c[h[0]]=e.clone(),c)}try{for(var m=0,p=h;m<p.length;m++){var y=p[m];c[y]=s(e,t[y])}l&&(r=new a.V({store:c}))}catch(g){for(var b=0,w=Object.values(c);b<w.length;b++){w[b].free()}throw g}return l?r:c}},6757:function(e,t,r){"use strict";r.d(t,{nO:function(){return y}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(7108),l=r(6635),c=r(6807),h=r(9206),f=new WeakMap,d=new WeakMap,v=new WeakMap,m=new WeakMap,p=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,a.Z)(this,m,{writable:!0,value:void 0}),(0,o.Z)(this,d,t),(0,o.Z)(this,f,r),(0,o.Z)(this,v,i),(0,o.Z)(this,m,l.oH(this.numberOfSubsets(),i))}return(0,i.Z)(e,[{key:"thresholdsDetected",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,v),(function(){(0,o.Z)(e,v,!0)}),(function(t){return l.Yj((0,s.Z)(e,f).thresholds_detected(),t)}))}},{key:"thresholdsSubsetTotals",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.copy,i=void 0===n||n,a=r.fillable,o=void 0!==a&&a;return l.Hw(o,i,(0,s.Z)(this,m)[e],(function(){(0,s.Z)(t,m)[e]=!0}),(function(r){return l.Yj((0,s.Z)(t,f).thresholds_subset_totals(e),r)}))}},{key:"numberOfSubsets",value:function(){return(0,s.Z)(this,f).num_subsets()}},{key:"numberOfBlocks",value:function(){return(0,s.Z)(this,f).num_blocks()}},{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.block,n=void 0===r?null:r,i=t.buffer,a=void 0===i?null:i;if(!(e instanceof h.yf))throw new Error("'metrics' should be a PerCellAdtQcMetricsResults object");return c.R((0,s.Z)(this,f),e,n,a)}},{key:"free",value:function(){null!==(0,s.Z)(this,f)&&(u.A((0,s.Z)(this,d)),(0,o.Z)(this,f,null))}}]),e}();function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.numberOfMADs,n=void 0===r?3:r,i=t.minDetectedDrop,a=void 0===i?.1:i,s=t.block,o=void 0===s?null:s;if(!(e instanceof h.yf))throw new Error("'metrics' should be a PerCellAdtQcMetricsResults object");return c.H(e,o,(function(e,t,r){return u.R((function(i){return i.suggest_adt_qc_filters(e.results.$$.ptr,t,r,n,a)}),p)}))}},4609:function(e,t,r){"use strict";r.d(t,{XU:function(){return p}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(7108),l=r(6635),c=r(6807),h=r(2945),f=new WeakMap,d=new WeakMap,v=new WeakMap,m=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,o.Z)(this,f,t),(0,o.Z)(this,d,r),(0,o.Z)(this,v,i)}return(0,i.Z)(e,[{key:"thresholdsMaxCount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,v),(function(){(0,o.Z)(e,v,!0)}),(function(t){return l.Yj((0,s.Z)(e,d).thresholds_max_count(),t)}))}},{key:"numberOfBlocks",value:function(){return(0,s.Z)(this,d).num_blocks()}},{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.block,n=void 0===r?null:r,i=t.buffer,a=void 0===i?null:i;if(!(e instanceof h.UY))throw new Error("'metrics' should be a PerCellCrisprQcMetricsResults object");return c.R((0,s.Z)(this,d),e,n,a)}},{key:"free",value:function(){null!==(0,s.Z)(this,d)&&(u.A((0,s.Z)(this,f)),(0,o.Z)(this,d,null))}}]),e}();function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.numberOfMADs,n=void 0===r?3:r,i=t.block,a=void 0===i?null:i;if(!(e instanceof h.UY))throw new Error("'metrics' should be a PerCellCrisprQcMetricsResults object");return c.H(e,a,(function(e,t,r){return u.R((function(i){return i.suggest_crispr_qc_filters(e.results.$$.ptr,t,r,n)}),m)}))}},7339:function(e,t,r){"use strict";r.d(t,{Lw:function(){return b}});var n=r(5671),i=r(3144),a=r(2346),s=r(8916),o=r(2793),u=r(7108),l=r(6635),c=r(6807),h=r(5448),f=new WeakMap,d=new WeakMap,v=new WeakMap,m=new WeakMap,p=new WeakMap,y=function(){function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,n.Z)(this,e),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,d,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,a.Z)(this,m,{writable:!0,value:void 0}),(0,a.Z)(this,p,{writable:!0,value:void 0}),(0,o.Z)(this,f,t),(0,o.Z)(this,d,r),(0,o.Z)(this,v,i),(0,o.Z)(this,m,i),(0,o.Z)(this,p,l.oH(this.numberOfSubsets(),i))}return(0,i.Z)(e,[{key:"thresholdsSums",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,v),(function(){(0,o.Z)(e,v,!0)}),(function(t){return l.Yj((0,s.Z)(e,d).thresholds_sums(),t)}))}},{key:"thresholdsDetected",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.copy,n=void 0===r||r,i=t.fillable,a=void 0!==i&&i;return l.Hw(a,n,(0,s.Z)(this,m),(function(){(0,o.Z)(e,m,!0)}),(function(t){return l.Yj((0,s.Z)(e,d).thresholds_detected(),t)}))}},{key:"thresholdsSubsetProportions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.copy,i=void 0===n||n,a=r.fillable,o=void 0!==a&&a;return l.Hw(o,i,(0,s.Z)(this,p)[e],(function(){(0,s.Z)(t,p)[e]=!0}),(function(r){return l.Yj((0,s.Z)(t,d).thresholds_proportions(e),r)}))}},{key:"numberOfSubsets",value:function(){return(0,s.Z)(this,d).num_subsets()}},{key:"numberOfBlocks",value:function(){return(0,s.Z)(this,d).num_blocks()}},{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.block,n=void 0===r?null:r,i=t.buffer,a=void 0===i?null:i;if(!(e instanceof h.eD))throw new Error("'metrics' should be a PerCellRnaQcMetricsResults object");return c.R((0,s.Z)(this,d),e,n,a)}},{key:"free",value:function(){null!==(0,s.Z)(this,d)&&(u.A((0,s.Z)(this,f)),(0,o.Z)(this,d,null))}}]),e}();function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.numberOfMADs,n=void 0===r?3:r,i=t.block,a=void 0===i?null:i;if(!(e instanceof h.eD))throw new Error("'metrics' should be a PerCellRnaQcMetricsResults object");return c.H(e,a,(function(e,t,r){return u.R((function(i){return i.suggest_rna_qc_filters(e.results.$$.ptr,t,r,n)}),y)}))}},6635:function(e,t,r){"use strict";r.d(t,{GF:function(){return o},Hw:function(){return m},RJ:function(){return u},TS:function(){return a},Wf:function(){return s},Yj:function(){return f},c2:function(){return d},de:function(){return l},gd:function(){return h},mV:function(){return c},oH:function(){return v}});var n=r(8782),i=r(6737);function a(e){return i.TS((0,n.Fx)(),e)}function s(e){return i.Wf((0,n.Fx)(),e)}function o(e){return i.GF((0,n.Fx)(),e)}function u(e){return i.RJ((0,n.Fx)(),e)}function l(e,t){if(e instanceof i.PQ){if(null!==t&&t!=e.constructor.className)throw new Error("expected '"+t+"', got '"+e.constructor.className+"'");return e.space===(0,n.Fx)()?null===e.owner?e.view():e:e.clone((0,n.Fx)())}return null!==t?i.Zv((0,n.Fx)(),e,i.rr(t)):i.Zv((0,n.Fx)(),e)}function c(e){return null==e?(0,n.TT)():e}function h(e){if("undefined"!=typeof e&&null!=e)return e.free()}function f(e,t){if("view"===t){if(e.buffer!==(0,n.f3)())throw new Error('cannot use copy = "view" for non-Wasm TypedArrays');var r=e.constructor.name.replace("Array","WasmArray");return i.dt((0,n.Fx)(),e.length,e.byteOffset,i.rr(r))}return t?e.slice():e}function d(e,t,r){if(-1==r.indexOf(t))throw new Error("'"+e+"=' should be one of '"+r.join("', '")+"'")}function v(e,t){var r=new Array(e);return r.fill(t),r}function m(e,t,r,n,i){if(!r){if(!e)return null;n(),t&&(t=!1)}return i(t)}},8782:function(e,t,r){"use strict";r.d(t,{Fx:function(){return d},RE:function(){return h},TT:function(){return c},f3:function(){return f},j2:function(){return u}});var n=r(4165),i=r(5861),a=r(8308),s=r(6737),o=(r(5941),{});function u(){return l.apply(this,arguments)}function l(){return l=(0,i.Z)((0,n.Z)().mark((function e(){var t,r,i,u,l,c,h=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(t=h.length>0&&void 0!==h[0]?h[0]:{}).numberOfThreads,i=void 0===r?4:r,u=t.localFile,l=void 0!==u&&u,!("module"in o)){e.next=3;break}return e.abrupt("return",!1);case 3:return c={scran_custom_nthreads:i},l&&(c.locateFile=function(e){return"file:///Users/kancherj/Projects/public/kana/scran.js.react/node_modules/scran.js/browser/wasm.js".substring(7)+"/../wasm/"+e}),e.next=7,(0,a.default)(c);case 7:return o.module=e.sent,o.space=(0,s.z2)(o.module),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function c(){return o.module.scran_custom_nthreads}function h(e){if(!("module"in o))throw new Error("Wasm module needs to be initialized via 'initialize()'");var t;try{t=e(o.module)}catch(r){throw"number"==typeof r?new Error(o.module.get_error_message(r)):r}return t}function f(){if(!("module"in o))throw new Error("Wasm module needs to be initialized via 'initialize()'");return o.module.wasmMemory.buffer}function d(){return o.space}},8383:function(e,t,r){"use strict";r.d(t,{do:function(){return m},g1:function(){return p},lt:function(){return w},rr:function(){return _},yh:function(){return c}});var n=r(5671),i=r(3144),a=r(136),s=r(9388),o=r(4942),u=r(2813),l=r(2905),c=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new Uint8Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(c,"className","Uint8WasmArray"),(0,o.Z)(c,"valueSize",1);var h=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new Int8Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(h,"className","Int8WasmArray"),(0,o.Z)(h,"valueSize",1);var f=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new Uint16Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(f,"className","Uint16WasmArray"),(0,o.Z)(f,"valueSize",2);var d=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new Int16Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(d,"className","Int16WasmArray"),(0,o.Z)(d,"valueSize",2);var v=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new Uint32Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(v,"className","Uint32WasmArray"),(0,o.Z)(v,"valueSize",4);var m=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new Int32Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(m,"className","Int32WasmArray"),(0,o.Z)(m,"valueSize",4);var p=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new BigUint64Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(p,"className","BigUint64WasmArray"),(0,o.Z)(p,"valueSize",8);var y=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new BigInt64Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(y,"className","BigInt64WasmArray"),(0,o.Z)(y,"valueSize",8);var b=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new Float32Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(b,"className","Float32WasmArray"),(0,o.Z)(b,"valueSize",4);var w=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"array",value:function(){return new Float64Array((0,u.f3)(this.space),this.offset,this.length)}}]),r}(l.P);(0,o.Z)(w,"className","Float64WasmArray"),(0,o.Z)(w,"valueSize",8);var g={Uint8WasmArray:c,Int8WasmArray:h,Uint16WasmArray:f,Int16WasmArray:d,Uint32WasmArray:v,Int32WasmArray:m,BigUint64WasmArray:p,BigInt64WasmArray:y,Float32WasmArray:b,Float64WasmArray:w};function _(e){if(!(e in g))throw new Error("unknown WasmArray class '"+e+"'");return g[e]}},6737:function(e,t,r){"use strict";r.d(t,{lt:function(){return i.lt},do:function(){return i.do},yh:function(){return i.yh},PQ:function(){return n.P},Zv:function(){return h.Zv},GF:function(){return l},RJ:function(){return c},Wf:function(){return u},TS:function(){return o},dt:function(){return f},z2:function(){return a.z2},rr:function(){return i.rr}});var n=r(2905),i=r(8383),a=r(2813);function s(e,t,r){return(0,a.TK)(e,t,r)}function o(e,t){return s(e,t,i.yh)}function u(e,t){return s(e,t,i.do)}function l(e,t){return s(e,t,i.g1)}function c(e,t){return s(e,t,i.lt)}var h=r(4163);function f(e,t,r,n){return new n(e,-1,t,r,{})}}}]);
//# sourceMappingURL=551.8e5084b5.chunk.js.map